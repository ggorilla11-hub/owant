<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>í†µí•©ì—°ê¸ˆë¶„ì„ ë¦¬í¬íŠ¸ | ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ</title>
<meta property="og:title" content="ë‚˜ì˜ í†µí•©ì—°ê¸ˆë¶„ì„ ê²°ê³¼">
<meta property="og:description" content="ì€í‡´ í›„ ë§¤ë‹¬ ë¶€ì¡±í•œ ê¸ˆì•¡ì„ í™•ì¸í•´ë³´ì„¸ìš”!">
<meta property="og:image" content="https://moneya-frontend.vercel.app/assets/house4-ywz7gWNQ.jpg">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js" crossorigin="anonymous"></script>
<style>
:root {
  --primary: #1B6CB0;
  --primary-dark: #0F2B4C;
  --gold: #D4A853;
  --navy: #0F2B4C;
  --dark: #1A1A2E;
  --success: #27AE60;
  --warning: #F39C12;
  --danger: #E74C3C;
  --gray: #8896A7;
  --light: #F5F7FA;
  --white: #FFFFFF;
  --blue-light: #EBF5FF;
  --green-light: #E8F8F0;
  --gold-light: #FFF9E6;
  --red-light: #FEE2E2;
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family:'Noto Sans KR',sans-serif;
  background:var(--light);
  color:var(--dark);
  max-width:480px;
  margin:0 auto;
  -webkit-font-smoothing:antialiased;
}

.report-header {
  background:linear-gradient(135deg, #0F2B4C 0%, #1a3a5c 50%, #1B6CB0 100%);
  color:#fff;
  padding:36px 22px 28px;
  text-align:center;
  position:relative;
}
.report-confetti { font-size:28px; margin-bottom:8px; }
.report-badge {
  display:inline-flex; align-items:center; gap:4px;
  background:rgba(212,168,83,0.2); border:1px solid rgba(212,168,83,0.35);
  color:var(--gold); padding:4px 12px; border-radius:20px;
  font-size:11px; font-weight:500; margin-bottom:12px;
}
.report-title { font-size:22px; font-weight:900; margin-bottom:4px; }
.report-subtitle { font-size:13px; opacity:.75; }

/* Gap Card */
.gap-card {
  background:var(--white);
  border-radius:16px;
  margin:-16px 16px 14px;
  box-shadow:0 4px 20px rgba(0,0,0,0.08);
  overflow:hidden;
  text-align:center;
  padding:24px 20px;
}
.gap-label { font-size:13px; color:var(--gray); margin-bottom:4px; }
.gap-amount { font-size:36px; font-weight:900; color:var(--danger); margin-bottom:4px; }
.gap-amount.surplus { color:var(--success); }
.gap-sub { font-size:12px; color:var(--gray); }
.gap-total { display:inline-block; background:var(--red-light); color:var(--danger); padding:6px 14px; border-radius:20px; font-size:13px; font-weight:700; margin-top:10px; }
.gap-total.surplus { background:var(--green-light); color:var(--success); }

/* Section Card */
.section-card {
  background:var(--white);
  border-radius:16px;
  margin:0 16px 14px;
  padding:20px;
  box-shadow:0 2px 12px rgba(0,0,0,0.05);
}
.section-header { display:flex; align-items:center; gap:10px; margin-bottom:16px; }
.section-icon {
  width:36px; height:36px; border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  font-size:18px; flex-shrink:0;
}
.section-icon.blue { background:#DBEAFE; }
.section-icon.green { background:#D1FAE5; }
.section-icon.gold { background:#FFF3CD; }
.section-icon.red { background:#FEE2E2; }
.section-icon.purple { background:#F3E8FF; }
.section-title { font-size:15px; font-weight:700; color:var(--navy); }
.section-subtitle { font-size:11px; color:var(--gray); margin-top:1px; }

/* Pension Bar */
.pension-row { margin-bottom:14px; }
.pension-row-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; }
.pension-row-name { font-size:13px; font-weight:600; color:#4A5568; }
.pension-row-value { font-size:14px; font-weight:800; color:var(--navy); }
.pension-bar-track { height:14px; background:#EDF2F7; border-radius:7px; overflow:hidden; position:relative; }
.pension-bar-fill { height:100%; border-radius:7px; transition:width 1.2s ease; min-width:2px; }
.pension-bar-fill.np { background:linear-gradient(90deg, #1B6CB0, #4A9FE5); }
.pension-bar-fill.rp { background:linear-gradient(90deg, #27AE60, #6EE7B7); }
.pension-bar-fill.pp { background:linear-gradient(90deg, #D4A853, #F0D78C); }
.pension-bar-fill.total { background:linear-gradient(90deg, #6C3CE1, #A78BFA); }
.pension-bar-fill.gap { background:linear-gradient(90deg, #E74C3C, #F87171); }

/* Rate Meter */
.rate-meter { text-align:center; padding:10px 0; }
.rate-circle {
  width:120px; height:120px; border-radius:50%;
  margin:0 auto 12px;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  position:relative;
}
.rate-circle::before {
  content:''; position:absolute; inset:0; border-radius:50%;
  border:8px solid #EDF2F7;
}
.rate-circle::after {
  content:''; position:absolute; inset:0; border-radius:50%;
  border:8px solid transparent;
  border-top-color: var(--rate-color, var(--danger));
  border-right-color: var(--rate-color, var(--danger));
  transform: rotate(var(--rate-rotate, 0deg));
}
.rate-value { font-size:28px; font-weight:900; color:var(--navy); z-index:1; }
.rate-label { font-size:11px; color:var(--gray); z-index:1; }
.rate-status { font-size:14px; font-weight:700; margin-top:4px; }
.rate-desc { font-size:12px; color:#4A5568; margin-top:6px; line-height:1.6; }

/* Solution */
.solution-item {
  display:flex; gap:10px; align-items:flex-start;
  padding:12px; border-radius:10px; margin-bottom:8px;
  background:#F8FAFC;
}
.solution-icon { font-size:20px; flex-shrink:0; margin-top:1px; }
.solution-text { font-size:13px; line-height:1.6; color:#4A5568; }
.solution-text strong { color:var(--navy); }

/* Monthly Need */
.monthly-need {
  background:linear-gradient(135deg, var(--primary-dark), var(--primary));
  color:#fff;
  border-radius:12px;
  padding:18px;
  text-align:center;
  margin-top:12px;
}
.monthly-need-label { font-size:12px; opacity:.8; margin-bottom:4px; }
.monthly-need-amount { font-size:24px; font-weight:900; }

/* CTA */
.cta-card {
  background:linear-gradient(135deg, #F5F3FF, #EDE9FE);
  border:2px solid #8B5CF6;
  border-radius:16px;
  margin:0 16px 14px;
  padding:24px 20px;
  text-align:center;
}
.cta-card h3 { font-size:17px; font-weight:900; color:var(--navy); margin-bottom:8px; }
.cta-card p { font-size:13px; color:#4A5568; line-height:1.6; margin-bottom:14px; }
.btn { width:100%; padding:14px; border:none; border-radius:12px; font-size:16px; font-weight:700; font-family:inherit; cursor:pointer; }
.btn-purple { background:linear-gradient(135deg, #6C3CE1, #7C3AED); color:#fff; }

/* Service */
.service-card {
  background:var(--gold-light); border:2px solid var(--gold);
  border-radius:16px; margin:0 16px 14px;
  padding:24px 20px; text-align:center;
}
.service-card h3 { font-size:17px; font-weight:900; color:var(--navy); margin-bottom:8px; }
.service-card p { font-size:13px; color:#4A5568; line-height:1.6; margin-bottom:14px; }
.expert-badge {
  display:inline-flex; align-items:center; gap:6px;
  background:var(--white); padding:8px 14px; border-radius:10px;
  font-size:12px; color:var(--navy); font-weight:500; margin-bottom:14px;
}
.btn-gold { background:linear-gradient(135deg, var(--gold), #E8B95A); color:var(--navy); }

/* Share */
.share-bar { display:flex; gap:8px; margin:0 16px 14px; }
.share-btn {
  flex:1; padding:12px; border:none; border-radius:12px;
  font-size:14px; font-weight:700; font-family:inherit; cursor:pointer;
}
.share-btn.kakao { background:#FEE500; color:#3C1E1E; }
.share-btn.sms { background:#27AE60; color:#fff; }
.share-btn.copy { background:#E2E8F0; color:#4A5568; }

/* Trust */
.trust-bar { display:flex; justify-content:center; gap:18px; padding:16px 16px; font-size:11px; color:var(--gray); }
.trust-item { text-align:center; }
.trust-item .num { font-size:15px; font-weight:700; color:var(--navy); }

.footer { text-align:center; padding:24px 20px; font-size:11px; color:var(--gray); line-height:1.8; }
.disclaimer {
  background:#FFF9E6; border:1px solid #F0D78C; border-radius:12px;
  margin:0 16px 14px; padding:14px 16px;
  font-size:12px; color:#92400E; line-height:1.7; text-align:center;
}

/* Toast */
.toast {
  position:fixed; bottom:80px; left:50%; transform:translateX(-50%);
  background:rgba(0,0,0,0.8); color:#fff; padding:10px 20px; border-radius:20px;
  font-size:13px; z-index:999; opacity:0; transition:opacity .3s;
}
.toast.show { opacity:1; }

/* Retire Card */
.retire-card { background:linear-gradient(135deg, #F0FDF9, #ECFDF5); border:1px solid #A7F3D0; }
.retire-row {
  display:flex; justify-content:space-between; align-items:center;
  padding:9px 0; border-bottom:1px solid #D1FAE5; font-size:13px; color:#4A5568;
}
.retire-row:last-of-type { border-bottom:none; }
.retire-row-border { border-top:2px solid #6EE7B7; padding-top:12px; margin-top:4px; }
.retire-val { font-weight:700; }
.retire-val.teal { color:#0D9488; }
.retire-val.red { color:#DC2626; }
.fw700 { font-weight:700; }
.retire-highlight {
  display:flex; justify-content:space-between; align-items:center;
  background:#fff; border:2px solid #0D9488; border-radius:12px;
  padding:14px 16px; margin-top:12px;
  font-size:14px; font-weight:700; color:#4A5568;
}
.retire-highlight-val { font-size:22px; font-weight:900; color:#0D9488; }
.formula-toggle {
  display:block; width:100%; text-align:left; background:none; border:none;
  font-size:12px; color:#0D9488; font-weight:600; padding:10px 0 0;
  cursor:pointer; font-family:inherit;
}
.formula-box {
  background:#fff; border:1px solid #D1FAE5; border-radius:10px;
  padding:14px; margin-top:8px;
}
.formula-line { font-size:12px; color:#4A5568; padding:3px 0; line-height:1.6; }
.formula-note { font-size:11px; color:#9CA3AF; margin-top:8px; padding-top:8px; border-top:1px dashed #D1FAE5; line-height:1.6; }
</style>
</head>
<body>

<!-- Header -->
<div class="report-header">
  <div class="report-confetti">ğŸ“Š</div>
  <div class="report-badge">âœ… ë¶„ì„ ì™„ë£Œ</div>
  <div class="report-title" id="rpt-name">ê³ ê°ë‹˜ì˜</div>
  <div class="report-subtitle">í†µí•©ì—°ê¸ˆë¶„ì„ ë¦¬í¬íŠ¸</div>
</div>

<!-- 1. í‘œì§€ (Gap Card) - ìˆœ ì€í‡´ì¼ì‹œê¸ˆ ê¸°ì¤€ -->
<div class="gap-card">
  <div class="gap-label">ì€í‡´ í›„ ë¶€ì¡±í•œ ì€í‡´ì¼ì‹œê¸ˆ</div>
  <div class="gap-amount" id="rpt-gap">0ì–µì›</div>
  <div class="gap-sub" id="rpt-gap-sub">ì›ê°€ê³„ì‚°ë°©ì‹ ê¸°ì¤€ ìˆœ ì€í‡´ì¼ì‹œê¸ˆ</div>
  <div class="gap-total" id="rpt-gap-total">ë§¤ì›” ì €ì¶• í•„ìš”ì•¡: 0ë§Œì›</div>
</div>

<!-- 2. ì€í‡´ ì¤€ë¹„ í˜„í™© ìš”ì•½ -->
<div class="section-card">
  <div class="section-header">
    <div class="section-icon green">ğŸ“‹</div>
    <div><div class="section-title">ì€í‡´ ì¤€ë¹„ í˜„í™© ìš”ì•½</div><div class="section-subtitle">ì…ë ¥í•˜ì‹  ì •ë³´ ê¸°ë°˜</div></div>
  </div>
  <table style="width:100%;font-size:13px;border-collapse:collapse" id="rpt-summary-table">
  </table>
</div>

<!-- 3. 3ì¸µ ì—°ê¸ˆ êµ¬ì„± í˜„í™© -->
<div class="section-card">
  <div class="section-header">
    <div class="section-icon blue">ğŸ›ï¸</div>
    <div><div class="section-title">3ì¸µ ì—°ê¸ˆ êµ¬ì„± í˜„í™©</div><div class="section-subtitle">êµ­ë¯¼ì—°ê¸ˆ + í‡´ì§ì—°ê¸ˆ + ê°œì¸ì—°ê¸ˆ</div></div>
  </div>
  <div class="pension-row">
    <div class="pension-row-header"><span class="pension-row-name">ğŸ›ï¸ êµ­ë¯¼ì—°ê¸ˆ (1ì¸µ)</span><span class="pension-row-value" id="rpt-np">0ë§Œì›</span></div>
    <div class="pension-bar-track"><div class="pension-bar-fill np" id="rpt-np-bar" style="width:0%"></div></div>
  </div>
  <div class="pension-row">
    <div class="pension-row-header"><span class="pension-row-name">ğŸ¢ í‡´ì§ì—°ê¸ˆ (2ì¸µ)</span><span class="pension-row-value" id="rpt-rp">0ë§Œì›</span></div>
    <div class="pension-bar-track"><div class="pension-bar-fill rp" id="rpt-rp-bar" style="width:0%"></div></div>
  </div>
  <div class="pension-row">
    <div class="pension-row-header"><span class="pension-row-name">ğŸ’° ê°œì¸ì—°ê¸ˆ (3ì¸µ)</span><span class="pension-row-value" id="rpt-pp">0ë§Œì›</span></div>
    <div class="pension-bar-track"><div class="pension-bar-fill pp" id="rpt-pp-bar" style="width:0%"></div></div>
  </div>
  <div style="border-top:1px dashed #E2E8F0;padding-top:12px;margin-top:6px">
    <div class="pension-row" style="margin-bottom:8px">
      <div class="pension-row-header"><span class="pension-row-name" style="font-weight:700;color:var(--primary)">âœ… ì—°ê¸ˆ í•©ê³„</span><span class="pension-row-value" style="color:var(--primary)" id="rpt-total">0ë§Œì›</span></div>
      <div class="pension-bar-track"><div class="pension-bar-fill total" id="rpt-total-bar" style="width:0%"></div></div>
    </div>
    <div class="pension-row" style="margin-bottom:0">
      <div class="pension-row-header"><span class="pension-row-name" style="font-weight:700;color:var(--danger)">âš ï¸ ë§¤ì›” ë¶€ì¡±ì•¡</span><span class="pension-row-value" style="color:var(--danger)" id="rpt-gap2">0ë§Œì›</span></div>
      <div class="pension-bar-track"><div class="pension-bar-fill gap" id="rpt-gap-bar" style="width:0%"></div></div>
    </div>
  </div>
</div>

<!-- 4. ì€í‡´ì„¤ê³„ ë¶„ì„ ê²°ê³¼ -->
<div class="section-card retire-card">
  <div class="section-header">
    <div class="section-icon" style="background:#D1FAE5">ğŸ–ï¸</div>
    <div><div class="section-title">ì€í‡´ì„¤ê³„ ë¶„ì„ ê²°ê³¼</div><div class="section-subtitle">ì›ê°€ê³„ì‚°ë°©ì‹ ê¸°ì¤€</div></div>
  </div>
  <div class="retire-row"><span>ê²½ì œí™œë™ ê¸°ê°„</span><span class="retire-val teal" id="rpt-eco-years">0ë…„</span></div>
  <div class="retire-row"><span>ì€í‡´ í›„ ê¸°ê°„</span><span class="retire-val teal" id="rpt-retire-years">0ë…„</span></div>
  <div class="retire-row"><span>ì›” ë¶€ì¡±ì•¡</span><span class="retire-val red" id="rpt-monthly-gap">0ë§Œì›</span></div>
  <div class="retire-row"><span>ì€í‡´ì¼ì‹œê¸ˆ í•„ìš”ì•¡</span><span class="retire-val red" id="rpt-lumpsum-need">0ì–µì›</span></div>
  <div class="retire-row"><span>í˜„ì¬ í‡´ì§ì—°ê¸ˆ ì¼ì‹œê¸ˆ</span><span class="retire-val teal" id="rpt-rp-lumpsum">0ì–µì›</span></div>
  <div class="retire-row retire-row-border"><span class="fw700">ìˆœ ì€í‡´ì¼ì‹œê¸ˆ</span><span class="retire-val red fw700" id="rpt-net-lumpsum">0ì–µì›</span></div>
  <div class="retire-highlight">
    <span>ğŸ’° ì›” ì €ì¶•ì—°ê¸ˆì•¡</span>
    <span class="retire-highlight-val" id="rpt-monthly-saving">0ë§Œì›</span>
  </div>
  <button class="formula-toggle" onclick="toggleFormula()">ğŸ“ ê³„ì‚° ë°©ë²• ë³´ê¸° â–¼</button>
  <div class="formula-box" id="formulaBox" style="display:none">
    <div class="formula-line">â‘  ì›” ë¶€ì¡±ì•¡ = í¬ë§ìƒí™œë¹„ - êµ­ë¯¼ì—°ê¸ˆ - ê°œì¸ì—°ê¸ˆ</div>
    <div class="formula-line">â‘¡ ì€í‡´ì¼ì‹œê¸ˆ = ì›”ë¶€ì¡±ì•¡ Ã— 12 Ã— ì€í‡´í›„ê¸°ê°„</div>
    <div class="formula-line">â‘¢ ìˆœ ì€í‡´ì¼ì‹œê¸ˆ = ì€í‡´ì¼ì‹œê¸ˆ - í‡´ì§ì—°ê¸ˆ ì ë¦½ê¸ˆ</div>
    <div class="formula-line">â‘£ ì›” ì €ì¶•ì—°ê¸ˆì•¡ = ìˆœì€í‡´ì¼ì‹œê¸ˆ Ã· ê²½ì œí™œë™ê¸°ê°„ Ã· 12</div>
  </div>
</div>

<!-- 5. ì†Œë“ëŒ€ì²´ìœ¨ ë¶„ì„ -->
<div class="section-card">
  <div class="section-header">
    <div class="section-icon gold">ğŸ“ˆ</div>
    <div><div class="section-title">ì†Œë“ëŒ€ì²´ìœ¨ ë¶„ì„</div><div class="section-subtitle">OECD ê¶Œê³  ê¸°ì¤€ 70%</div></div>
  </div>
  <div class="rate-meter">
    <div class="rate-circle" id="rpt-rate-circle">
      <div class="rate-value" id="rpt-rate">0%</div>
      <div class="rate-label">ì†Œë“ëŒ€ì²´ìœ¨</div>
    </div>
    <div class="rate-status" id="rpt-rate-status"></div>
    <div class="rate-desc" id="rpt-rate-desc"></div>
  </div>
</div>

<!-- 6. í•´ê²° ë°©ì•ˆ -->
<div class="section-card">
  <div class="section-header">
    <div class="section-icon purple">ğŸ’¡</div>
    <div><div class="section-title">í•´ê²° ë°©ì•ˆ ì‹œë®¬ë ˆì´ì…˜</div><div class="section-subtitle">ì§€ê¸ˆë¶€í„° ì¤€ë¹„í•˜ë©´ ì¶©ë¶„í•©ë‹ˆë‹¤</div></div>
  </div>
  <div id="rpt-solutions"></div>
  <div class="monthly-need" id="rpt-monthly-need">
    <div class="monthly-need-label">ì§€ê¸ˆë¶€í„° ë§¤ì›” ì¶”ê°€ ì ë¦½ í•„ìš”ì•¡</div>
    <div class="monthly-need-amount" id="rpt-need-amount">0ë§Œì›</div>
  </div>
</div>

<!-- ë©´ì±…ì‚¬í•­ -->
<div class="disclaimer">
  âš ï¸ ë³¸ ì„¤ê³„ëŠ” ì´í•´ë¥¼ ë•ê¸° ìœ„í•œ ì¼ë°˜ì ì¸ ì˜ˆì‹œì´ë¯€ë¡œ ì°¸ê³ ë§Œ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ ì›ê°€ê³„ì‚°ë°©ì‹ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
</div>

<!-- CTA: AIë¨¸ë‹ˆì•¼ -->
<div class="cta-card">
  <h3>ğŸ“± AIë¨¸ë‹ˆì•¼ë¡œ ê´€ë¦¬í•˜ê¸°</h3>
  <p>AIê°€ ë§¤ì¼ ë‚˜ì˜ ì¬ë¬´ ìƒíƒœë¥¼ ì²´í¬í•˜ê³ <br>ë§ì¶¤ ì½”ì¹­ì„ í•´ë“œë¦½ë‹ˆë‹¤</p>
  <button class="btn btn-purple" onclick="window.open('https://moneya-frontend.vercel.app','_blank')">AIë¨¸ë‹ˆì•¼ ì‹œì‘í•˜ê¸° â†’</button>
</div>

<!-- ê³µìœ  -->
<div class="share-bar">
  <button class="share-btn kakao" onclick="shareKakao()">ğŸ’¬ ì¹´í†¡</button>
  <button class="share-btn sms" onclick="shareSMS()">ğŸ’Œ ë¬¸ì</button>
  <button class="share-btn copy" onclick="copyLink()">ğŸ”— ë³µì‚¬</button>
</div>

<!-- ìœ ë£Œ ì„œë¹„ìŠ¤ -->
<div class="service-card">
  <h3>ğŸ¯ ìœ ë£Œ ì„œë¹„ìŠ¤ ì•ˆë‚´</h3>
  <div class="expert-badge">ğŸ‘¨â€ğŸ’¼ ì˜¤ìƒì—´ CFP Â· 20ë…„ ê²½ë ¥ Â· 2,000ê±´+ ìƒë‹´</div>
  <p>ë§ì¶¤í˜• ì—°ê¸ˆ í¬íŠ¸í´ë¦¬ì˜¤ ì„¤ê³„ì™€<br>ì „ë¬¸ê°€ ìƒë‹´ì„ ë°›ì•„ë³´ì„¸ìš”</p>
  <button class="btn btn-gold" style="margin-bottom:10px" onclick="window.open('https://owant.netlify.app','_blank')">ğŸ“ 1:1 ì „ë¬¸ê°€ ìƒë‹´ ì‹ ì²­</button>
  <button class="btn btn-gold" style="margin-bottom:10px" onclick="window.open('https://owant.netlify.app','_blank')">ğŸ“ ì¼ë°˜ì¸ ê°•ì˜ ì‹ ì²­</button>
  <button class="btn btn-gold" onclick="window.open('https://owant.netlify.app','_blank')">ğŸ“ ì „ë¬¸ê°€(FP) ê°•ì˜ ì‹ ì²­</button>
</div>

<div class="trust-bar">
  <div class="trust-item"><div class="num">500íšŒ</div>ê°•ì˜</div>
  <div class="trust-item"><div class="num">2,000+</div>ìƒë‹´</div>
  <div class="trust-item"><div class="num">CFP</div>êµ­ì œê³µì¸</div>
  <div class="trust-item"><div class="num">20ë…„</div>ê²½ë ¥</div>
</div>

<button class="btn" style="margin:0 16px 14px;width:calc(100% - 32px);background:#E2E8F0;color:#4A5568" onclick="window.location.href='https://owant.netlify.app'">ğŸ”„ ë‹¤ì‹œ ë¶„ì„í•˜ê¸°</button>

<div class="footer">
  ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ | ëŒ€í‘œ: ì˜¤ìƒì—´ (CFPÂ®)<br>
  ê¸ˆìœµì§‘ì§“ê¸°Â®ëŠ” ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œì˜ ë“±ë¡ìƒí‘œì…ë‹ˆë‹¤.<br>
  ë³¸ ë¶„ì„ì€ ì…ë ¥ ì •ë³´ ê¸°ë°˜ì˜ ì¶”ì •ì¹˜ì´ë©°, ì •í™•í•œ ì„¤ê³„ëŠ” ì „ë¬¸ê°€ ìƒë‹´ì„ í†µí•´ ì§„í–‰ë©ë‹ˆë‹¤.
</div>

<div class="toast" id="toast"></div>

<script>
// ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™”
Kakao.init('97b8ff67fce6e9b52985c6da425c617d');

function getParams() {
  const p = new URLSearchParams(window.location.search);
  return {
    name: p.get('name') || 'ê³ ê°',
    age: parseInt(p.get('age')) || 45,
    income: parseInt(p.get('income')) || 400,
    retireAge: parseInt(p.get('retire_age')) || 60,
    lifeExpect: parseInt(p.get('life_expect')) || 90,
    desired: parseInt(p.get('desired')) || 300,
    np: parseInt(p.get('np')) || 0,
    rp: parseInt(p.get('rp')) || 0,
    pp: parseInt(p.get('pp')) || 0,
    totalPension: parseInt(p.get('total_pension')) || 0,
    gap: parseInt(p.get('gap')) || 0,
    replacementRate: parseInt(p.get('rate')) || 0,
    spouse: p.get('spouse') || '',
    rpBalance: parseInt(p.get('rp_balance')) || 0,
    ppMonthly: parseInt(p.get('pp_monthly')) || 0
  };
}

function toggleFormula() {
  const box = document.getElementById('formulaBox');
  const btn = event.target;
  if (box.style.display === 'none') {
    box.style.display = 'block';
    btn.textContent = 'ğŸ“ ê³„ì‚° ë°©ë²• ë³´ê¸° â–²';
  } else {
    box.style.display = 'none';
    btn.textContent = 'ğŸ“ ê³„ì‚° ë°©ë²• ë³´ê¸° â–¼';
  }
}

function render() {
  const d = getParams();
  const yearsToRetire = Math.max(d.retireAge - d.age, 1);
  const retireYears = Math.max(d.lifeExpect - d.retireAge, 1);
  const totalGap = d.gap * retireYears * 12;

  // Header
  document.getElementById('rpt-name').textContent = d.name + 'ë‹˜ì˜';

  // ========== ì€í‡´ì„¤ê³„ ê³„ì‚° (ì›ê°€ê³„ì‚°ë°©ì‹) - í‘œì§€ì— ì‚¬ìš© ==========
  const ecoYears = yearsToRetire;
  const retYears = retireYears;
  const monthlyGap2 = d.desired - d.np - d.pp;
  const lumpsumNeed = monthlyGap2 * 12 * retYears;
  const rpLumpsum = d.rpBalance;
  const netLumpsum = lumpsumNeed - rpLumpsum;
  const monthlySaving = ecoYears > 0 ? Math.round(netLumpsum / ecoYears / 12) : 0;

  // 1. í‘œì§€ Gap Card - ìˆœ ì€í‡´ì¼ì‹œê¸ˆ ê¸°ì¤€
  const gapEl = document.getElementById('rpt-gap');
  if (netLumpsum > 0) {
    gapEl.textContent = (netLumpsum / 10000).toFixed(1) + 'ì–µì›';
    gapEl.className = 'gap-amount';
    document.getElementById('rpt-gap-total').textContent = 'ë§¤ì›” ì €ì¶• í•„ìš”ì•¡: ' + monthlySaving.toLocaleString() + 'ë§Œì›';
    document.getElementById('rpt-gap-total').className = 'gap-total';
  } else {
    gapEl.textContent = 'ë¶€ì¡±ì•¡ ì—†ìŒ âœ…';
    gapEl.className = 'gap-amount surplus';
    document.getElementById('rpt-gap-total').textContent = 'í˜„ì¬ ì¤€ë¹„ ìƒíƒœ ì–‘í˜¸!';
    document.getElementById('rpt-gap-total').className = 'gap-total surplus';
  }

  // Pension Bars
  const maxVal = Math.max(d.desired, d.totalPension, 1);
  document.getElementById('rpt-np').textContent = d.np.toLocaleString() + 'ë§Œì›';
  document.getElementById('rpt-rp').textContent = d.rp.toLocaleString() + 'ë§Œì›';
  document.getElementById('rpt-pp').textContent = d.pp.toLocaleString() + 'ë§Œì›';
  document.getElementById('rpt-total').textContent = d.totalPension.toLocaleString() + 'ë§Œì›';
  document.getElementById('rpt-gap2').textContent = d.gap.toLocaleString() + 'ë§Œì›';

  setTimeout(() => {
    document.getElementById('rpt-np-bar').style.width = (d.np / maxVal * 100) + '%';
    document.getElementById('rpt-rp-bar').style.width = (d.rp / maxVal * 100) + '%';
    document.getElementById('rpt-pp-bar').style.width = (d.pp / maxVal * 100) + '%';
    document.getElementById('rpt-total-bar').style.width = (d.totalPension / maxVal * 100) + '%';
    document.getElementById('rpt-gap-bar').style.width = (d.gap / maxVal * 100) + '%';
  }, 300);

  // Rate
  const rate = d.replacementRate;
  document.getElementById('rpt-rate').textContent = rate + '%';
  const statusEl = document.getElementById('rpt-rate-status');
  const descEl = document.getElementById('rpt-rate-desc');

  if (rate >= 70) {
    statusEl.innerHTML = '<span style="color:var(--success)">âœ… ì–‘í˜¸</span>';
    descEl.textContent = 'OECD ê¶Œê³  ì†Œë“ëŒ€ì²´ìœ¨ 70% ì´ìƒì„ ë‹¬ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë¬¼ê°€ ìƒìŠ¹ê³¼ ì˜ë£Œë¹„ë¥¼ ê³ ë ¤í•˜ë©´ ì¶”ê°€ ì¤€ë¹„ê°€ í•„ìš”í•©ë‹ˆë‹¤.';
  } else if (rate >= 50) {
    statusEl.innerHTML = '<span style="color:var(--warning)">âš ï¸ ë³´í†µ</span>';
    descEl.textContent = 'OECD ê¶Œê³  70%ì—ëŠ” ë¯¸ë‹¬ì´ì§€ë§Œ ë‚˜ì˜ì§€ ì•Šì€ ìˆ˜ì¤€ì…ë‹ˆë‹¤. ì¶”ê°€ ì¤€ë¹„ë¥¼ í†µí•´ ì•ˆì •ì ì¸ ë…¸í›„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
  } else {
    statusEl.innerHTML = '<span style="color:var(--danger)">ğŸš¨ ë¶€ì¡±</span>';
    descEl.textContent = 'OECD ê¶Œê³  ì†Œë“ëŒ€ì²´ìœ¨ 70%ì— í¬ê²Œ ëª» ë¯¸ì¹˜ëŠ” ìˆ˜ì¤€ì…ë‹ˆë‹¤. ì ê·¹ì ì¸ ë…¸í›„ ì¤€ë¹„ê°€ í•„ìš”í•©ë‹ˆë‹¤.';
  }

  // Summary Table
  const spouseMap = { single:'ë¯¸í˜¼/ë…ì‹ ', married:'ê¸°í˜¼' };
  const rows = [
    ['í˜„ì¬ ë‚˜ì´', d.age + 'ì„¸'],
    ['ì›” ì†Œë“', d.income.toLocaleString() + 'ë§Œì›'],
    ['í¬ë§ ì€í‡´ ë‚˜ì´', d.retireAge + 'ì„¸'],
    ['ì€í‡´ê¹Œì§€ ë‚¨ì€ ê¸°ê°„', yearsToRetire + 'ë…„'],
    ['ì€í‡´ í›„ í¬ë§ ìƒí™œë¹„', d.desired.toLocaleString() + 'ë§Œì›/ì›”'],
    ['ê¸°ëŒ€ìˆ˜ëª…', d.lifeExpect + 'ì„¸'],
    ['ì€í‡´ í›„ ìƒí™œ ê¸°ê°„', retireYears + 'ë…„'],
  ];
  if (d.spouse) rows.push(['ë°°ìš°ì', spouseMap[d.spouse] || d.spouse]);

  const table = document.getElementById('rpt-summary-table');
  rows.forEach((r, i) => {
    const tr = document.createElement('tr');
    tr.style.borderBottom = i < rows.length - 1 ? '1px solid #F1F5F9' : 'none';
    tr.innerHTML = '<td style="padding:9px 0;color:var(--gray);font-weight:500">' + r[0] + '</td><td style="padding:9px 0;text-align:right;font-weight:700;color:var(--navy)">' + r[1] + '</td>';
    table.appendChild(tr);
  });

  // Solutions
  const solDiv = document.getElementById('rpt-solutions');
  const solutions = [
    { icon:'ğŸ¦', title:'ì—°ê¸ˆë³´í—˜', desc:'ì„¸ì•¡ê³µì œ í˜œíƒê³¼ í•¨ê»˜ ì•ˆì •ì ì¸ ë…¸í›„ì†Œë“ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.' },
    { icon:'ğŸ’°', title:'ì—°ê¸ˆì €ì¶•/IRP', desc:'ì—° ìµœëŒ€ <strong>900ë§Œì› ì„¸ì•¡ê³µì œ</strong> í˜œíƒì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.' },
    { icon:'ğŸ“Š', title:'ìì‚°ë°°ë¶„ í¬íŠ¸í´ë¦¬ì˜¤', desc:'ì€í‡´ê¹Œì§€ <strong>' + yearsToRetire + 'ë…„</strong>, ì ì ˆí•œ ìœ„í—˜-ìˆ˜ìµ ë°°ë¶„ì´ í•„ìš”í•©ë‹ˆë‹¤.' },
  ];
  solutions.forEach(s => {
    solDiv.innerHTML += '<div class="solution-item"><div class="solution-icon">' + s.icon + '</div><div class="solution-text"><strong>' + s.title + '</strong><br>' + s.desc + '</div></div>';
  });

  // ========== 4. ì€í‡´ì„¤ê³„ ë¶„ì„ ê²°ê³¼ ë Œë”ë§ ==========

  document.getElementById('rpt-eco-years').textContent = ecoYears + 'ë…„';
  document.getElementById('rpt-retire-years').textContent = retYears + 'ë…„';
  document.getElementById('rpt-monthly-gap').textContent = monthlyGap2.toLocaleString() + 'ë§Œì›';
  document.getElementById('rpt-lumpsum-need').textContent = (lumpsumNeed / 10000).toFixed(1) + 'ì–µì›';
  document.getElementById('rpt-rp-lumpsum').textContent = (rpLumpsum / 10000).toFixed(1) + 'ì–µì›';
  document.getElementById('rpt-net-lumpsum').textContent = (netLumpsum / 10000).toFixed(1) + 'ì–µì›';
  document.getElementById('rpt-monthly-saving').textContent = monthlySaving > 0 ? monthlySaving.toLocaleString() + 'ë§Œì›' : 'ì¶”ê°€ ì ë¦½ ë¶ˆí•„ìš”';

  // Monthly need (í•´ê²°ë°©ì•ˆ ì„¹ì…˜)
  document.getElementById('rpt-need-amount').textContent = monthlySaving > 0 ? 'ë§¤ì›” ' + monthlySaving.toLocaleString() + 'ë§Œì›' : 'ì¶”ê°€ ì ë¦½ ë¶ˆí•„ìš”';

  // ì›” ì €ì¶•ì—°ê¸ˆì•¡ì´ 1ì›ì´ë¼ë„ ìˆìœ¼ë©´ íŒ ì¶”ê°€
  if (monthlySaving > 0) {
    const tipsHtml = '<div style="margin-top:14px;padding:14px;background:#F0FDF9;border:1px solid #A7F3D0;border-radius:10px">'
      + '<div style="font-size:13px;font-weight:700;color:#0D9488;margin-bottom:8px">ğŸ’¡ ë¶€ë‹´ì„ ì¤„ì´ëŠ” ë°©ë²•</div>'
      + '<div style="font-size:13px;color:#4A5568;line-height:1.8">'
      + '1ï¸âƒ£ ì€í‡´ì‹œê¸°ë¥¼ ì§€ê¸ˆë³´ë‹¤ ëª‡ ë…„ í›„ë¡œ ì—°ê¸°í•´ë³´ì„¸ìš”<br>'
      + '2ï¸âƒ£ ì€í‡´ í›„ í¬ë§ìƒí™œë¹„ë¥¼ ì¡°ê¸ˆ ë‚®ì¶”ì–´ ë³´ì„¸ìš”'
      + '</div></div>';
    document.getElementById('rpt-solutions').insertAdjacentHTML('beforeend', tipsHtml);
  }
}

render();

// Share Functions
function shareKakao() {
  const url = window.location.href;
  const d = getParams();
  Kakao.Share.sendDefault({
    objectType:'feed',
    content:{
      title:'ë‚˜ì˜ í†µí•©ì—°ê¸ˆë¶„ì„ ê²°ê³¼',
      description: d.name + 'ë‹˜ì˜ ì€í‡´ ì¤€ë¹„ í˜„í™©ì„ í™•ì¸í•´ë³´ì„¸ìš”!',
      imageUrl:'https://moneya-frontend.vercel.app/assets/house4-ywz7gWNQ.jpg',
      link:{ mobileWebUrl:url, webUrl:url }
    },
    buttons:[{ title:'ë‚˜ë„ ë¶„ì„ë°›ê¸°', link:{ mobileWebUrl:'https://owant.netlify.app', webUrl:'https://owant.netlify.app' } }]
  });
}
function shareSMS() {
  const url = window.location.href;
  const text = 'ë‚˜ì˜ í†µí•©ì—°ê¸ˆë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”! ' + url;
  const sep = /iPhone|iPad/i.test(navigator.userAgent) ? '&' : '?';
  window.location.href = 'sms:' + sep + 'body=' + encodeURIComponent(text);
}
function copyLink() {
  const url = window.location.href;
  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(url).then(() => showToast('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!')).catch(() => fallbackCopy(url));
  } else {
    fallbackCopy(url);
  }
}
function fallbackCopy(text) {
  const ta = document.createElement('textarea');
  ta.value = text;
  ta.style.cssText = 'position:fixed;left:-9999px';
  document.body.appendChild(ta);
  ta.select();
  try { document.execCommand('copy'); showToast('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!'); }
  catch(e) { showToast('ë§í¬ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”'); }
  document.body.removeChild(ta);
}
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}
</script>
</body>
</html>
