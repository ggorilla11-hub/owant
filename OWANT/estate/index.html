<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>ë¶€ë™ì‚°ë¶„ì„ | ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ</title>
<meta property="og:title" content="ë‚´ ë¶€ë™ì‚°, ë…¸í›„ë¥¼ ì§€ì¼œì¤„ ìˆ˜ ìˆì„ê¹Œ?">
<meta property="og:description" content="ë¶€ë™ì‚° í˜„í™©ê³¼ ì£¼íƒì—°ê¸ˆ ì‹œë®¬ë ˆì´ì…˜ â€” CFP ì˜¤ìƒì—´">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<style>
:root{--pri:#1e3a5f;--acc:#b45309;--teal:#0d9488;--gold:#d4a853;--bg:#f4f6f8;--card:#fff;--txt:#333;--sub:#888;--border:#e5e7eb;}
*{margin:0;padding:0;box-sizing:border-box;}body{font-family:'Noto Sans KR',sans-serif;background:var(--bg);-webkit-font-smoothing:antialiased;}
.wrap{max-width:480px;margin:0 auto;background:var(--bg);min-height:100vh;}
.hero{background:linear-gradient(135deg,#78350f 0%,#92400e 50%,#7c2d12 100%);padding:40px 20px 30px;text-align:center;position:relative;overflow:hidden;}
.hero::before{content:'';position:absolute;top:-30%;right:-20%;width:200px;height:200px;background:radial-gradient(circle,rgba(250,204,21,0.12),transparent 70%);border-radius:50%;}
.hero-badge{display:inline-block;background:rgba(255,255,255,0.15);border:1px solid rgba(255,255,255,0.2);padding:6px 16px;border-radius:20px;font-size:12px;color:rgba(255,255,255,0.9);font-weight:600;margin-bottom:12px;}
.hero h1{font-size:24px;font-weight:900;color:#fff;line-height:1.4;margin-bottom:8px;}.hero h1 em{font-style:normal;color:#fbbf24;}
.hero p{font-size:14px;color:rgba(255,255,255,0.8);line-height:1.6;}
.hero-stat{display:flex;justify-content:center;gap:20px;margin-top:16px;}.hero-stat div{text-align:center;}.hero-stat .num{font-size:20px;font-weight:900;color:#fbbf24;}.hero-stat .lbl{font-size:10px;color:rgba(255,255,255,0.7);margin-top:2px;}
.progress-bar{background:#fff;padding:12px 20px;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10;}.progress-inner{display:flex;align-items:center;gap:8px;}.progress-track{flex:1;height:6px;background:#e5e7eb;border-radius:3px;overflow:hidden;}.progress-fill{height:100%;background:linear-gradient(90deg,var(--acc),#d97706);border-radius:3px;transition:width .5s;}.progress-text{font-size:11px;font-weight:700;color:var(--acc);min-width:36px;text-align:right;}
.section{padding:16px 20px;display:none;}.section.active{display:block;}.section-title{font-size:16px;font-weight:800;color:var(--txt);margin-bottom:4px;display:flex;align-items:center;gap:6px;}.section-desc{font-size:12px;color:var(--sub);margin-bottom:16px;}
.input-card{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);border:1px solid var(--border);}.input-card h3{font-size:14px;font-weight:700;color:var(--txt);margin-bottom:12px;display:flex;align-items:center;gap:6px;}
.field{margin-bottom:12px;}.field:last-child{margin-bottom:0;}.field label{display:block;font-size:12px;font-weight:600;color:#555;margin-bottom:4px;}.field .hint{font-size:10px;color:#999;margin-top:2px;}.field-row{display:flex;gap:10px;}.field-row .field{flex:1;margin-bottom:0;}
.input-wrap{position:relative;}.input-wrap input{width:100%;padding:12px 40px 12px 14px;border:1.5px solid var(--border);border-radius:10px;font-size:15px;font-family:inherit;outline:none;transition:border .2s;}.input-wrap input:focus{border-color:var(--acc);}.input-wrap .suffix{position:absolute;right:12px;top:50%;transform:translateY(-50%);font-size:13px;color:var(--sub);}
.toggle-row{display:flex;gap:8px;}.toggle-btn{flex:1;padding:12px;border:1.5px solid var(--border);border-radius:10px;background:#fff;font-size:13px;font-family:inherit;font-weight:600;color:#555;cursor:pointer;text-align:center;transition:all .2s;}.toggle-btn.selected{border-color:var(--acc);background:#fffbeb;color:#92400e;font-weight:700;}
.result-card{background:linear-gradient(135deg,#fffbeb,#fef3c7);border:1px solid #fde68a;border-radius:14px;padding:16px;margin-bottom:12px;}.result-card.green{background:linear-gradient(135deg,#f0fdf4,#ecfdf5);border-color:#bbf7d0;}.result-card.blue{background:linear-gradient(135deg,#eff6ff,#dbeafe);border-color:#93c5fd;}
.result-title{font-size:12px;font-weight:700;color:var(--acc);margin-bottom:10px;display:flex;align-items:center;gap:5px;}.result-card.green .result-title{color:#16a34a;}.result-card.blue .result-title{color:#2563eb;}
.result-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed #fde68a;}.result-row:last-child{border-bottom:none;}.result-card.green .result-row{border-color:#bbf7d0;}.result-card.blue .result-row{border-color:#93c5fd;}
.rr-label{font-size:12px;color:#555;}.rr-value{font-size:14px;font-weight:700;color:var(--txt);}.rr-value.danger{color:#dc2626;}.rr-value.success{color:#16a34a;}.rr-value.highlight{color:var(--pri);font-size:16px;}.rr-value.amber{color:var(--acc);}
.insight{background:#fffbeb;border-radius:10px;padding:12px;margin-bottom:12px;display:flex;gap:8px;align-items:flex-start;}.insight-icon{font-size:16px;flex-shrink:0;margin-top:1px;}.insight-text{font-size:12px;color:#78350f;line-height:1.6;}.insight-text b{font-weight:700;}
.blur-wrap{position:relative;}.blur-content{filter:blur(6px);pointer-events:none;user-select:none;}.blur-overlay{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(255,255,255,.7);border-radius:14px;z-index:2;}.blur-overlay p{font-size:14px;font-weight:700;color:var(--pri);margin-bottom:8px;}.blur-overlay .lock-icon{font-size:32px;margin-bottom:8px;}
.db-form{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);border:1px solid var(--border);}.db-form h3{font-size:14px;font-weight:700;color:var(--txt);margin-bottom:4px;display:flex;align-items:center;gap:6px;}.db-form .sub{font-size:11px;color:var(--sub);margin-bottom:14px;}
.btn{width:100%;padding:14px;border:none;border-radius:12px;font-size:15px;font-weight:700;font-family:inherit;cursor:pointer;transition:all .2s;}.btn-primary{background:linear-gradient(135deg,var(--acc),#d97706);color:#fff;box-shadow:0 4px 12px rgba(180,83,9,.3);}.btn-primary:hover{transform:translateY(-1px);}.btn-gold{background:linear-gradient(135deg,#d4a853,#c9952e);color:#fff;}.btn-outline{background:#fff;color:var(--acc);border:1.5px solid var(--acc);}.btn-gray{background:#f3f4f6;color:#555;border:none;}.btn-teal{background:linear-gradient(135deg,#0d9488,#14b8a6);color:#fff;}
.knowledge{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);border:1px solid var(--border);}.knowledge h3{font-size:14px;font-weight:700;margin-bottom:12px;display:flex;align-items:center;gap:6px;}.knowledge-item{padding:10px 0;border-bottom:1px solid #f3f4f6;}.knowledge-item:last-child{border-bottom:none;}.knowledge-item .ki-q{font-size:13px;font-weight:700;color:var(--pri);margin-bottom:4px;}.knowledge-item .ki-a{font-size:12px;color:#555;line-height:1.7;}
.complete-section{text-align:center;padding:30px 20px;}.complete-icon{font-size:48px;margin-bottom:12px;}.complete-title{font-size:18px;font-weight:800;color:var(--pri);margin-bottom:6px;}.complete-desc{font-size:13px;color:var(--sub);margin-bottom:20px;line-height:1.6;}.cta-cards{display:flex;flex-direction:column;gap:10px;margin-bottom:16px;}
.disclaimer{font-size:10px;color:#aaa;text-align:center;padding:12px 20px 30px;line-height:1.6;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}.fade-in{animation:fadeIn .4s ease forwards;}
</style>
</head>
<body>
<div class="wrap">
<div class="hero">
  <div class="hero-badge">ğŸ  3ë¶„ ë¬´ë£Œ ë¶€ë™ì‚°ë¶„ì„</div>
  <h1>ë‚´ ë¶€ë™ì‚°,<br><em>ë…¸í›„ë¥¼ ì§€ì¼œì¤„</em> ìˆ˜ ìˆì„ê¹Œ?</h1>
  <p>ë¶€ë™ì‚° í˜„í™© ë¶„ì„ê³¼ ì£¼íƒì—°ê¸ˆ ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ<br>ì€í‡´ í›„ í˜„ê¸ˆíë¦„ì„ í™•ì¸í•˜ì„¸ìš”</p>
  <div class="hero-stat"><div><div class="num">20ë…„</div><div class="lbl">CFP ê²½ë ¥</div></div><div><div class="num">2,000+</div><div class="lbl">ìƒë‹´ ì‹¤ì </div></div><div><div class="num">3ë¶„</div><div class="lbl">ì†Œìš”ì‹œê°„</div></div></div>
</div>
<div class="progress-bar"><div class="progress-inner"><div class="progress-track"><div class="progress-fill" id="progFill" style="width:25%"></div></div><div class="progress-text" id="progText">1/4</div></div></div>

<!-- STEP 1 -->
<div class="section active" id="step1">
  <div class="section-title">ğŸ  ë¶€ë™ì‚° ì •ë³´ ì…ë ¥</div>
  <div class="section-desc">í˜„ì¬ ë¶€ë™ì‚° í˜„í™©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
  <div class="input-card">
    <h3>ğŸ‘¤ ê¸°ë³¸ ì •ë³´</h3>
    <div class="field-row">
      <div class="field"><label>í˜„ì¬ ë‚˜ì´</label><div class="input-wrap"><input type="number" id="age" placeholder="37"><span class="suffix">ì„¸</span></div></div>
      <div class="field"><label>ì›” ì†Œë“ (ì„¸í›„)</label><div class="input-wrap"><input type="number" id="income" placeholder="520"><span class="suffix">ë§Œì›</span></div></div>
    </div>
  </div>
  <div class="input-card">
    <h3>ğŸ  ì£¼íƒ ë³´ìœ  ì—¬ë¶€</h3>
    <div class="toggle-row">
      <button class="toggle-btn" onclick="setHouse(true,this)">ğŸ  ë³´ìœ </button>
      <button class="toggle-btn" onclick="setHouse(false,this)">âŒ ë¯¸ë³´ìœ </button>
    </div>
  </div>
  <div class="input-card" id="houseDetail" style="display:none;">
    <h3>ğŸ˜ï¸ ë¶€ë™ì‚° í˜„í™©</h3>
    <div class="field-row">
      <div class="field"><label>ê±°ì£¼ìš© ë¶€ë™ì‚° ì‹œê°€</label><div class="input-wrap"><input type="number" id="homeVal" placeholder="40000"><span class="suffix">ë§Œì›</span></div></div>
      <div class="field"><label>íˆ¬ììš© ë¶€ë™ì‚° ì‹œê°€</label><div class="input-wrap"><input type="number" id="investVal" placeholder="10000"><span class="suffix">ë§Œì›</span></div></div>
    </div>
    <div class="field"><label>ì£¼íƒë‹´ë³´ëŒ€ì¶œ ì”ì•¡</label><div class="input-wrap"><input type="number" id="mortBal" placeholder="25000"><span class="suffix">ë§Œì›</span></div></div>
  </div>
  <div class="input-card" id="noHouseDetail" style="display:none;">
    <h3>ğŸ¯ ë‚´ì§‘ë§ˆë ¨ ëª©í‘œ</h3>
    <div class="field-row">
      <div class="field"><label>ëª©í‘œ ì£¼íƒ ê°€ê²©</label><div class="input-wrap"><input type="number" id="targetPrice" placeholder="50000"><span class="suffix">ë§Œì›</span></div></div>
      <div class="field"><label>í˜„ì¬ ì¢…ì£ëˆ</label><div class="input-wrap"><input type="number" id="seedMoney" placeholder="10000"><span class="suffix">ë§Œì›</span></div></div>
    </div>
  </div>
  <button class="btn btn-primary" onclick="analyze()">ğŸ“Š ë¶€ë™ì‚° ë¶„ì„í•˜ê¸°</button>
</div>

<!-- STEP 2 -->
<div class="section" id="step2">
  <div class="section-title">ğŸ“Š ë¶€ë™ì‚° ë¶„ì„ ê²°ê³¼</div>
  <div class="section-desc">í˜„ì¬ ë¶€ë™ì‚° í˜„í™©ì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤</div>
  <div id="resultBasic"></div>
  <div id="insightBasic"></div>
  <div class="blur-wrap"><div class="blur-overlay"><div class="lock-icon">ğŸ”’</div><p>ì£¼íƒì—°ê¸ˆ/ë‚´ì§‘ë§ˆë ¨ ì „ëµ ë³´ê¸°</p><button class="btn btn-primary" style="width:auto;padding:10px 24px;font-size:13px;" onclick="showStep(3)">ë¬´ë£Œë¡œ í™•ì¸í•˜ê¸° â†’</button></div>
    <div class="blur-content"><div class="result-card blue"><div class="result-title">ğŸ–ï¸ ì£¼íƒì—°ê¸ˆ ì˜ˆìƒ</div><div class="result-row"><span class="rr-label">65ì„¸ ê°€ì… ì‹œ ì›”ìˆ˜ë ¹</span><span class="rr-value">ì•½ 100ë§Œì›</span></div></div></div>
  </div>
</div>

<!-- STEP 3 -->
<div class="section" id="step3">
  <div class="section-title">ğŸ“‹ ì‹¬í™” ë¶„ì„ ê²°ê³¼ ë°›ê¸°</div>
  <div class="section-desc">ì•„ë˜ ì •ë³´ë¥¼ ì…ë ¥í•˜ì‹œë©´ ìƒì„¸ ì „ëµì„ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤</div>
  <div class="db-form">
    <h3>ğŸ“© ë¶„ì„ ê²°ê³¼ ë°›ì„ ì •ë³´</h3><div class="sub">ì´ë©”ì¼ê³¼ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ìƒì„¸ ë¦¬í¬íŠ¸ë¥¼ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤</div>
    <div class="field"><label>ì´ë¦„</label><div class="input-wrap"><input type="text" id="userName" placeholder="í™ê¸¸ë™"></div></div>
    <div class="field"><label>ì„±ë³„</label><div style="display:flex;gap:8px;"><button class="btn btn-outline" id="gM" onclick="setGender('ë‚¨')" style="flex:1;padding:10px;font-size:13px;">ë‚¨ì„±</button><button class="btn btn-outline" id="gF" onclick="setGender('ì—¬')" style="flex:1;padding:10px;font-size:13px;">ì—¬ì„±</button></div></div>
    <div class="field"><label>ì „í™”ë²ˆí˜¸</label><div class="input-wrap"><input type="tel" id="userPhone" placeholder="010-1234-5678"></div></div>
    <div class="field"><label>ì´ë©”ì¼</label><div class="input-wrap"><input type="email" id="userEmail" placeholder="example@email.com"></div></div>
  </div>
  <button class="btn btn-primary" onclick="submitDB()">ğŸ”“ ìƒì„¸ ì „ëµ ë³´ê¸°</button>
</div>

<!-- STEP 4 -->
<div class="section" id="step4">
  <div class="section-title">ğŸ  ë¶€ë™ì‚° ì „ëµ ë¶„ì„</div>
  <div class="section-desc">CFP ì˜¤ìƒì—´ì˜ ë¶€ë™ì‚° ì „ëµ ì œì•ˆì…ë‹ˆë‹¤</div>
  <div id="resultStrategy"></div>
  <div id="insightAI"></div>
  <div class="knowledge">
    <h3>ğŸ“š ë¶€ë™ì‚° í•„ìˆ˜ ì§€ì‹</h3>
    <div class="knowledge-item"><div class="ki-q">Q. ì£¼íƒì—°ê¸ˆì´ë€?</div><div class="ki-a">ë§Œ 55ì„¸ ì´ìƒ, ê³µì‹œê°€ê²© 9ì–µì› ì´í•˜ ì£¼íƒ ì†Œìœ ìê°€ ê°€ì…í•  ìˆ˜ ìˆëŠ” ì—­ëª¨ê¸°ì§€ ìƒí’ˆì…ë‹ˆë‹¤. ì§‘ì— ì‚´ë©´ì„œ ë§¤ì›” ì—°ê¸ˆì„ ë°›ê³ , ì‚¬ë§ í›„ ì£¼íƒìœ¼ë¡œ ì •ì‚°í•©ë‹ˆë‹¤. ë¶€ë¶€ ëª¨ë‘ ì‚¬ë§ ì‹œê¹Œì§€ ë³´ì¥ë˜ë©°, ì§‘ê°’ì´ í•˜ë½í•´ë„ ì—°ê¸ˆì•¡ì€ ì¤„ì§€ ì•ŠìŠµë‹ˆë‹¤.</div></div>
    <div class="knowledge-item"><div class="ki-q">Q. LTVÂ·DTIÂ·DSR, ëŒ€ì¶œ ë°›ì„ ë•Œ ê¼­ ì•Œì•„ì•¼ í•  ê²ƒì€?</div><div class="ki-a">LTV(ë‹´ë³´ì¸ì •ë¹„ìœ¨)ëŠ” ì£¼íƒê°€ê²© ëŒ€ë¹„ ëŒ€ì¶œ í•œë„, DTI(ì´ë¶€ì±„ìƒí™˜ë¹„ìœ¨)ëŠ” ì†Œë“ ëŒ€ë¹„ ì£¼íƒëŒ€ì¶œ ì›ë¦¬ê¸ˆ, DSRì€ ì†Œë“ ëŒ€ë¹„ ëª¨ë“  ëŒ€ì¶œ ì›ë¦¬ê¸ˆ ë¹„ìœ¨ì…ë‹ˆë‹¤. ê·œì œì§€ì—­ì€ LTV 40~50%, DSR 40%ê°€ ì ìš©ë©ë‹ˆë‹¤.</div></div>
    <div class="knowledge-item"><div class="ki-q">Q. ë‚´ì§‘ë§ˆë ¨, ì–¼ë§ˆë¥¼ ëª¨ì•„ì•¼ í• ê¹Œ?</div><div class="ki-a">ì¼ë°˜ì ìœ¼ë¡œ ì£¼íƒê°€ê²©ì˜ 30~40%ë¥¼ ìê¸°ìë³¸ìœ¼ë¡œ ì¤€ë¹„í•´ì•¼ í•©ë‹ˆë‹¤. ì·¨ë“ì„¸(1~3%), ì¤‘ê°œìˆ˜ìˆ˜ë£Œ, ì´ì‚¬ë¹„ìš© ë“± ë¶€ëŒ€ë¹„ìš©ë„ ì£¼íƒê°€ê²©ì˜ 3~5%ë¥¼ ì¶”ê°€ë¡œ ì¤€ë¹„í•˜ì„¸ìš”. ì£¼íƒì²­ì•½ì €ì¶•ì€ ì†Œë“ê³µì œ í˜œíƒë„ ìˆìœ¼ë‹ˆ ë°˜ë“œì‹œ ê°€ì…í•˜ì„¸ìš”.</div></div>
    <div class="knowledge-item"><div class="ki-q">Q. 1ì£¼íƒì ì–‘ë„ì„¸ ë¹„ê³¼ì„¸ ìš”ê±´ì€?</div><div class="ki-a">1ì„¸ëŒ€ 1ì£¼íƒìœ¼ë¡œ 2ë…„ ì´ìƒ ë³´ìœ (ì¡°ì •ëŒ€ìƒì§€ì—­ì€ 2ë…„ ê±°ì£¼ í¬í•¨)í•˜ë©´ ì–‘ë„ì°¨ìµ 12ì–µì›ê¹Œì§€ ë¹„ê³¼ì„¸ì…ë‹ˆë‹¤. ì¼ì‹œì  2ì£¼íƒì€ ì¢…ì „ ì£¼íƒì„ 3ë…„ ë‚´ ì²˜ë¶„í•˜ë©´ ë¹„ê³¼ì„¸ ì ìš©ë©ë‹ˆë‹¤.</div></div>
  </div>
  <div class="complete-section">
    <div class="complete-icon">âœ…</div><div class="complete-title">ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</div><div class="complete-desc">ìƒì„¸ ë¦¬í¬íŠ¸ëŠ” ì…ë ¥í•˜ì‹  ì´ë©”ì¼ê³¼<br>ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ë°œì†¡ë©ë‹ˆë‹¤</div>
    <div class="cta-cards">
      <button class="btn btn-gold" onclick="window.open('https://moneya-frontend.vercel.app','_blank')">ğŸ¤– AIë¨¸ë‹ˆì•¼ ì‹œì‘í•˜ê¸°</button>
      <button class="btn btn-teal" onclick="window.open('https://owant.netlify.app/diagnosis/','_blank')">ğŸ“Š ë¬´ë£Œ ì¬ë¬´ì§„ë‹¨ í•´ë³´ê¸°</button>
      <button class="btn btn-outline" onclick="window.open('https://ohwant-hub.netlify.app','_blank')">ğŸ”— ì˜¤ìƒì—´ CFP ë” ì•Œì•„ë³´ê¸°</button>
      <button class="btn btn-gray" onclick="location.reload()">ğŸ”„ ë‹¤ì‹œ ë¶„ì„í•˜ê¸°</button>
    </div>
  </div>
  <div class="disclaimer">â€» ë³¸ ë¶„ì„ì€ ì°¸ê³ ìš©ì´ë©°, ì‹¤ì œ ë¶€ë™ì‚° ì˜ì‚¬ê²°ì •ì€ ì „ë¬¸ê°€ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤.<br>Â© ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ Â· CFP ì˜¤ìƒì—´</div>
</div>
</div>
<script>
let gender='',hasHouse=null,D={};
function setGender(g){gender=g;document.getElementById('gM').style.background=g==='ë‚¨'?'var(--acc)':'#fff';document.getElementById('gM').style.color=g==='ë‚¨'?'#fff':'var(--acc)';document.getElementById('gF').style.background=g==='ì—¬'?'var(--acc)':'#fff';document.getElementById('gF').style.color=g==='ì—¬'?'#fff':'var(--acc)';}
function setHouse(v,el){hasHouse=v;document.querySelectorAll('.toggle-btn').forEach(b=>b.classList.remove('selected'));el.classList.add('selected');document.getElementById('houseDetail').style.display=v?'block':'none';document.getElementById('noHouseDetail').style.display=v?'none':'block';}
function showStep(n){document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.getElementById('step'+n).classList.add('active','fade-in');document.getElementById('progFill').style.width=[25,50,75,100][n-1]+'%';document.getElementById('progText').textContent=n+'/4';window.scrollTo({top:0,behavior:'smooth'});}
function fmt(n){return n.toLocaleString();}

function analyze(){
  const age=parseFloat(document.getElementById('age').value)||0;
  const income=parseFloat(document.getElementById('income').value)||0;
  if(!age){alert('ë‚˜ì´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}
  if(hasHouse===null){alert('ì£¼íƒ ë³´ìœ  ì—¬ë¶€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”');return;}

  if(hasHouse){
    const hv=parseFloat(document.getElementById('homeVal').value)||0;
    const iv=parseFloat(document.getElementById('investVal').value)||0;
    const mort=parseFloat(document.getElementById('mortBal').value)||0;
    const totalEstate=hv+iv;
    const netEstate=totalEstate-mort;
    const ltv=hv>0?Math.round(mort/hv*100):0;
    // ì£¼íƒì—°ê¸ˆ ì˜ˆìƒ (65ì„¸ ê¸°ì¤€, 4ì–µ ì£¼íƒ ì•½ 100ë§Œì›)
    const pensionAge=65;
    const canApply=age>=55;
    const yearsToApply=Math.max(0,55-age);
    const estMonthly=Math.round(hv/40000*100);// ëŒ€ëµì  ê³„ì‚°

    D={age,income,hasHouse:true,hv,iv,totalEstate,mort,netEstate,ltv,pensionAge,canApply,yearsToApply,estMonthly};

    document.getElementById('resultBasic').innerHTML=`
      <div class="result-card"><div class="result-title">ğŸ  ë¶€ë™ì‚° í˜„í™©</div>
        <div class="result-row"><span class="rr-label">ê±°ì£¼ìš© ë¶€ë™ì‚°</span><span class="rr-value">${fmt(hv)}ë§Œì› (${(hv/10000).toFixed(1)}ì–µ)</span></div>
        <div class="result-row"><span class="rr-label">íˆ¬ììš© ë¶€ë™ì‚°</span><span class="rr-value">${fmt(iv)}ë§Œì›</span></div>
        <div class="result-row"><span class="rr-label">ì´ ë¶€ë™ì‚° ìì‚°</span><span class="rr-value highlight">${fmt(totalEstate)}ë§Œì› (${(totalEstate/10000).toFixed(1)}ì–µ)</span></div>
        <div class="result-row"><span class="rr-label">ì£¼íƒë‹´ë³´ëŒ€ì¶œ</span><span class="rr-value danger">${fmt(mort)}ë§Œì›</span></div>
        <div class="result-row"><span class="rr-label">ìˆœ ë¶€ë™ì‚° ìì‚°</span><span class="rr-value success">${fmt(netEstate)}ë§Œì› (${(netEstate/10000).toFixed(1)}ì–µ)</span></div>
        <div class="result-row"><span class="rr-label">LTV (ë‹´ë³´ì¸ì •ë¹„ìœ¨)</span><span class="rr-value ${ltv>60?'danger':ltv>40?'amber':'success'}">${ltv}%</span></div>
      </div>`;

    let msg=ltv>60?`LTV ${ltv}%ë¡œ ëŒ€ì¶œ ë¹„ì¤‘ì´ ë†’ìŠµë‹ˆë‹¤. ì¶”ê°€ ëŒ€ì¶œì´ ì–´ë ¤ìš¸ ìˆ˜ ìˆìœ¼ë©°, ê¸ˆë¦¬ ìƒìŠ¹ ì‹œ ë¶€ë‹´ì´ ì»¤ì§‘ë‹ˆë‹¤.`:ltv>40?`LTV ${ltv}%ë¡œ ì ì • ìˆ˜ì¤€ì´ì§€ë§Œ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.`:`LTV ${ltv}%ë¡œ ê±´ì „í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤.`;
    document.getElementById('insightBasic').innerHTML=`<div class="insight"><span class="insight-icon">ğŸ’¡</span><span class="insight-text"><b>ë¶€ë™ì‚° ì§„ë‹¨:</b> ${msg} ì´ ë¶€ë™ì‚° ìì‚° ${(totalEstate/10000).toFixed(1)}ì–µ ì¤‘ ìˆœìì‚°ì€ ${(netEstate/10000).toFixed(1)}ì–µì…ë‹ˆë‹¤.</span></div>`;
  } else {
    const tp=parseFloat(document.getElementById('targetPrice').value)||0;
    const sm=parseFloat(document.getElementById('seedMoney').value)||0;
    const needed=Math.round(tp*0.35);
    const gap=Math.max(0,needed-sm);
    const monthSave=income>0?Math.round(income*0.3):0;
    const yearsToGoal=monthSave>0?Math.round(gap/(monthSave*12)*10)/10:0;

    D={age,income,hasHouse:false,tp,sm,needed,gap,monthSave,yearsToGoal};

    document.getElementById('resultBasic').innerHTML=`
      <div class="result-card"><div class="result-title">ğŸ¯ ë‚´ì§‘ë§ˆë ¨ ë¶„ì„</div>
        <div class="result-row"><span class="rr-label">ëª©í‘œ ì£¼íƒ ê°€ê²©</span><span class="rr-value">${fmt(tp)}ë§Œì› (${(tp/10000).toFixed(1)}ì–µ)</span></div>
        <div class="result-row"><span class="rr-label">í•„ìš” ìê¸°ìë³¸ (35%)</span><span class="rr-value">${fmt(needed)}ë§Œì›</span></div>
        <div class="result-row"><span class="rr-label">í˜„ì¬ ì¢…ì£ëˆ</span><span class="rr-value">${fmt(sm)}ë§Œì›</span></div>
        <div class="result-row"><span class="rr-label">ì¶”ê°€ í•„ìš” ê¸ˆì•¡</span><span class="rr-value ${gap>0?'danger':'success'}">${gap>0?fmt(gap)+'ë§Œì›':'ë‹¬ì„±!'}</span></div>
        ${gap>0?`<div class="result-row"><span class="rr-label">ì›” 30% ì €ì¶• ì‹œ ë‹¬ì„± ê¸°ê°„</span><span class="rr-value highlight">ì•½ ${yearsToGoal}ë…„</span></div>`:''}
      </div>`;
    document.getElementById('insightBasic').innerHTML=`<div class="insight"><span class="insight-icon">ğŸ’¡</span><span class="insight-text"><b>ë‚´ì§‘ë§ˆë ¨ ì§„ë‹¨:</b> ${gap>0?`ì¢…ì£ëˆ ${fmt(gap)}ë§Œì›ì´ ë” í•„ìš”í•©ë‹ˆë‹¤. ì›” ${fmt(monthSave)}ë§Œì› ì €ì¶• ì‹œ ì•½ ${yearsToGoal}ë…„ì´ ê±¸ë¦½ë‹ˆë‹¤.`:'ìê¸°ìë³¸ì´ ì¶©ë¶„í•©ë‹ˆë‹¤! ëŒ€ì¶œ ì¡°ê±´ì„ ë¹„êµí•˜ê³  ë§¤ìˆ˜ íƒ€ì´ë°ì„ ê²€í† í•˜ì„¸ìš”.'}</span></div>`;
  }
  showStep(2);
}

function submitDB(){
  const name=document.getElementById('userName').value.trim();const phone=document.getElementById('userPhone').value.trim();const email=document.getElementById('userEmail').value.trim();
  if(!name){alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}if(!phone){alert('ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}if(!email){alert('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}
  const payload={ìœ ì…ê²½ë¡œ:'ë¶€ë™ì‚°ë¶„ì„',ì´ë¦„:name,ì„±ë³„:gender,ì „í™”ë²ˆí˜¸:phone,ì´ë©”ì¼:email,ë‚˜ì´:D.age+'ì„¸',ì£¼íƒë³´ìœ :D.hasHouse?'ë³´ìœ ':'ë¯¸ë³´ìœ ',timestamp:new Date().toISOString()};
  if(D.hasHouse){payload.ê±°ì£¼ìš©ë¶€ë™ì‚°=D.hv+'ë§Œì›';payload.íˆ¬ììš©ë¶€ë™ì‚°=D.iv+'ë§Œì›';payload.ë‹´ë³´ëŒ€ì¶œ=D.mort+'ë§Œì›';}else{payload.ëª©í‘œì£¼íƒê°€ê²©=D.tp+'ë§Œì›';payload.ì¢…ì£ëˆ=D.sm+'ë§Œì›';}
  fetch('https://hook.eu1.make.com/gqxc1xxpz1x61pxfk996ollf00r0oiu9',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)}).catch(()=>{});

  if(D.hasHouse){
    const canApply9=D.hv<=90000;
    document.getElementById('resultStrategy').innerHTML=`
      <div class="result-card blue"><div class="result-title">ğŸ–ï¸ ì£¼íƒì—°ê¸ˆ ì‹œë®¬ë ˆì´ì…˜</div>
        <div class="result-row"><span class="rr-label">ê°€ì… ì¡°ê±´</span><span class="rr-value">ë§Œ 55ì„¸ ì´ìƒ, ê³µì‹œê°€ 9ì–µ ì´í•˜</span></div>
        <div class="result-row"><span class="rr-label">í˜„ì¬ ë‚˜ì´</span><span class="rr-value">${D.age}ì„¸ ${D.age>=55?'(ê°€ì… ê°€ëŠ¥)':'('+D.yearsToApply+'ë…„ í›„ ê°€ì… ê°€ëŠ¥)'}</span></div>
        <div class="result-row"><span class="rr-label">ì£¼íƒê°€ê²© ì¡°ê±´</span><span class="rr-value ${canApply9?'success':'danger'}">${(D.hv/10000).toFixed(1)}ì–µ ${canApply9?'âœ… ì¶©ì¡±':'âŒ ì´ˆê³¼'}</span></div>
        <div class="result-row"><span class="rr-label">65ì„¸ ê°€ì… ì‹œ ì˜ˆìƒ ì›”ìˆ˜ë ¹</span><span class="rr-value highlight">ì•½ ${D.estMonthly}ë§Œì›</span></div>
        <div class="result-row"><span class="rr-label">70ì„¸ ê°€ì… ì‹œ ì˜ˆìƒ ì›”ìˆ˜ë ¹</span><span class="rr-value">ì•½ ${Math.round(D.estMonthly*1.3)}ë§Œì›</span></div>
      </div>
      <div class="result-card green"><div class="result-title">ğŸ“‹ ë¶€ë™ì‚° ì „ëµ ì²´í¬ë¦¬ìŠ¤íŠ¸</div>
        <div class="result-row"><span class="rr-label">âœ… ì£¼íƒë‹´ë³´ëŒ€ì¶œ ê¸ˆë¦¬ ì¸í•˜ ìš”êµ¬</span><span class="rr-value">ê²€í† </span></div>
        <div class="result-row"><span class="rr-label">âœ… ëŒ€í™˜ëŒ€ì¶œ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸</span><span class="rr-value">ê²€í† </span></div>
        <div class="result-row"><span class="rr-label">âœ… 1ì£¼íƒ ì¥ê¸°ë³´ìœ  íŠ¹ë³„ê³µì œ í™•ì¸</span><span class="rr-value">ê²€í† </span></div>
        <div class="result-row"><span class="rr-label">âœ… ì£¼íƒì—°ê¸ˆ ê°€ì… ì‹œê¸° ê³„íš</span><span class="rr-value">ê²€í† </span></div>
      </div>`;
    document.getElementById('insightAI').innerHTML=`<div class="insight"><span class="insight-icon">ğŸ’¡</span><span class="insight-text"><b>CFP ì˜¤ìƒì—´ ì¶”ì²œ:</b> ${D.ltv>50?'ëŒ€ì¶œ ë¹„ì¤‘ì´ ë†’ìœ¼ë¯€ë¡œ ê¸ˆë¦¬ ì¸í•˜ ìš”êµ¬ê¶Œì„ ë°˜ë“œì‹œ í–‰ì‚¬í•˜ì„¸ìš”. ì—° 0.3~0.5%p ì¸í•˜ ê°€ëŠ¥í•©ë‹ˆë‹¤. ':''}ì£¼íƒì—°ê¸ˆì€ 65ì„¸ì— ê°€ì…í•˜ë©´ ì›” ì•½ ${D.estMonthly}ë§Œì›ì„ ë°›ì„ ìˆ˜ ìˆì–´ êµ­ë¯¼ì—°ê¸ˆê³¼ í•©ì‚°í•˜ë©´ ë…¸í›„ ê¸°ë³¸ ìƒí™œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë¶€ë™ì‚°ì€ ë³´ìœ  ìì²´ê°€ ìì‚°ì´ë¯€ë¡œ ë¬´ë¦¬í•œ íˆ¬ìë³´ë‹¤ í˜„ì¬ ì§‘ì„ ì˜ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.</span></div>`;
  } else {
    document.getElementById('resultStrategy').innerHTML=`
      <div class="result-card blue"><div class="result-title">ğŸ¯ ë‚´ì§‘ë§ˆë ¨ ë¡œë“œë§µ</div>
        <div class="result-row"><span class="rr-label">Step 1: ì¢…ì£ëˆ ëª¨ìœ¼ê¸°</span><span class="rr-value">${fmt(D.needed)}ë§Œì› ëª©í‘œ</span></div>
        <div class="result-row"><span class="rr-label">Step 2: ì£¼íƒì²­ì•½ ê°€ì…/ìœ ì§€</span><span class="rr-value">ì†Œë“ê³µì œ+ë‹¹ì²¨ ê¸°íšŒ</span></div>
        <div class="result-row"><span class="rr-label">Step 3: ëŒ€ì¶œ ì¡°ê±´ ì‚¬ì „ í™•ì¸</span><span class="rr-value">LTV/DSR ê³„ì‚°</span></div>
        <div class="result-row"><span class="rr-label">Step 4: ë§¤ìˆ˜ ì‹¤í–‰</span><span class="rr-value">ì•½ ${D.yearsToGoal}ë…„ í›„ ëª©í‘œ</span></div>
      </div>
      <div class="result-card green"><div class="result-title">ğŸ’° ëŒ€ì¶œ ê°€ëŠ¥ ê¸ˆì•¡ ì˜ˆìƒ</div>
        <div class="result-row"><span class="rr-label">LTV 50% ê¸°ì¤€ ëŒ€ì¶œ</span><span class="rr-value">${fmt(Math.round(D.tp*0.5))}ë§Œì›</span></div>
        <div class="result-row"><span class="rr-label">LTV 70% ê¸°ì¤€ ëŒ€ì¶œ</span><span class="rr-value">${fmt(Math.round(D.tp*0.7))}ë§Œì›</span></div>
        <div class="result-row"><span class="rr-label">í•„ìš” ìê¸°ìë³¸ (30%)</span><span class="rr-value highlight">${fmt(Math.round(D.tp*0.3))}ë§Œì›</span></div>
      </div>`;
    document.getElementById('insightAI').innerHTML=`<div class="insight"><span class="insight-icon">ğŸ’¡</span><span class="insight-text"><b>CFP ì˜¤ìƒì—´ ì¶”ì²œ:</b> ì¢…ì£ëˆì„ ë¹ ë¥´ê²Œ ëª¨ìœ¼ë ¤ë©´ ì €ì¶•ë¥  30% ì´ìƒ ìœ ì§€ê°€ í•„ìˆ˜ì…ë‹ˆë‹¤. ì£¼íƒì²­ì•½ì €ì¶•(ì›” 10ë§Œì›)ì€ ì†Œë“ê³µì œë„ ë°›ìœ¼ë©´ì„œ ë‹¹ì²¨ ê¸°íšŒë„ ì–»ìœ¼ë‹ˆ ë°˜ë“œì‹œ ê°€ì…í•˜ì„¸ìš”. ë¶€ëŒ€ë¹„ìš©(ì·¨ë“ì„¸+ì¤‘ê°œìˆ˜ìˆ˜ë£Œ+ì´ì‚¬ë¹„) ${fmt(Math.round(D.tp*0.04))}ë§Œì›ë„ ë³„ë„ë¡œ ì¤€ë¹„í•˜ì„¸ìš”.</span></div>`;
  }
  showStep(4);
}
</script>
</body>
</html>
