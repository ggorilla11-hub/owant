<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>ê¸ˆìœµì§‘ì§“ê¸° ì„¤ê³„ | ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ</title>
<meta property="og:title" content="ë‚˜ë§Œì˜ ê¸ˆìœµì§‘ì„ ì§€ì–´ë³´ì„¸ìš”!">
<meta property="og:description" content="7ê°œ ì¬ë¬´ì„¤ê³„ë¥¼ í•œëˆˆì— â€” CFP ì˜¤ìƒì—´ì˜ ê¸ˆìœµì§‘ì§“ê¸°Â®">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<style>
:root{--pri:#1e3a5f;--acc:#0d9488;--gold:#d4a853;--bg:#f4f6f8;--card:#fff;--txt:#333;--sub:#888;--border:#e5e7eb;}
*{margin:0;padding:0;box-sizing:border-box;}body{font-family:'Noto Sans KR',sans-serif;background:var(--bg);-webkit-font-smoothing:antialiased;}
.wrap{max-width:480px;margin:0 auto;background:var(--bg);min-height:100vh;}
.hero{background:linear-gradient(135deg,#134e4a 0%,#0f766e 50%,#115e59 100%);padding:40px 20px 30px;text-align:center;position:relative;overflow:hidden;}
.hero::before{content:'';position:absolute;top:-30%;right:-20%;width:200px;height:200px;background:radial-gradient(circle,rgba(250,204,21,.12),transparent 70%);border-radius:50%;}
.hero-badge{display:inline-block;background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.2);padding:6px 16px;border-radius:20px;font-size:12px;color:rgba(255,255,255,.9);font-weight:600;margin-bottom:12px;}
.hero h1{font-size:24px;font-weight:900;color:#fff;line-height:1.4;margin-bottom:8px;}.hero h1 em{font-style:normal;color:#fbbf24;}
.hero p{font-size:14px;color:rgba(255,255,255,.8);line-height:1.6;}
.hero-stat{display:flex;justify-content:center;gap:20px;margin-top:16px;}.hero-stat div{text-align:center;}.hero-stat .num{font-size:20px;font-weight:900;color:#fbbf24;}.hero-stat .lbl{font-size:10px;color:rgba(255,255,255,.7);margin-top:2px;}
.progress-bar{background:#fff;padding:12px 20px;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10;}.progress-inner{display:flex;align-items:center;gap:8px;}.progress-track{flex:1;height:6px;background:#e5e7eb;border-radius:3px;overflow:hidden;}.progress-fill{height:100%;background:linear-gradient(90deg,var(--acc),#14b8a6);border-radius:3px;transition:width .5s;}.progress-text{font-size:11px;font-weight:700;color:var(--acc);min-width:36px;text-align:right;}
.section{padding:16px 20px;display:none;}.section.active{display:block;}.section-title{font-size:16px;font-weight:800;color:var(--txt);margin-bottom:4px;display:flex;align-items:center;gap:6px;}.section-desc{font-size:12px;color:var(--sub);margin-bottom:16px;}
.input-card{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);border:1px solid var(--border);}.input-card h3{font-size:14px;font-weight:700;color:var(--txt);margin-bottom:12px;display:flex;align-items:center;gap:6px;}
.field{margin-bottom:12px;}.field:last-child{margin-bottom:0;}.field label{display:block;font-size:12px;font-weight:600;color:#555;margin-bottom:4px;}.field .hint{font-size:10px;color:#999;margin-top:2px;}.field-row{display:flex;gap:10px;}.field-row .field{flex:1;margin-bottom:0;}
.input-wrap{position:relative;}.input-wrap input{width:100%;padding:12px 40px 12px 14px;border:1.5px solid var(--border);border-radius:10px;font-size:15px;font-family:inherit;outline:none;transition:border .2s;}.input-wrap input:focus{border-color:var(--acc);}.input-wrap .suffix{position:absolute;right:12px;top:50%;transform:translateY(-50%);font-size:13px;color:var(--sub);}
/* ê¸ˆìœµì§‘ ì‹œê°í™” */
.house-visual{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);border:1px solid var(--border);}
.house-svg{width:100%;max-width:360px;margin:0 auto;display:block;}
/* 7ê°œ ì˜ì—­ ì¹´ë“œ */
.area-card{background:var(--card);border-radius:14px;padding:14px;margin-bottom:8px;border:1px solid var(--border);box-shadow:0 1px 4px rgba(0,0,0,.03);}
.area-header{display:flex;align-items:center;gap:8px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid #f3f4f6;}
.area-icon{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px;}
.area-name{font-size:13px;font-weight:700;flex:1;}.area-badge{font-size:10px;font-weight:700;padding:3px 8px;border-radius:6px;}
.area-row{display:flex;justify-content:space-between;align-items:center;padding:5px 0;font-size:12px;}.area-row:not(:last-child){border-bottom:1px dashed #f3f4f6;}
.area-row .label{color:#555;}.area-row .val{font-weight:700;}.area-row .val.r{color:#dc2626;}.area-row .val.g{color:#16a34a;}.area-row .val.b{color:#2563eb;}.area-row .val.t{color:var(--acc);}
.result-card{background:linear-gradient(135deg,#f0fdfa,#ccfbf1);border:1px solid #99f6e4;border-radius:14px;padding:16px;margin-bottom:12px;}
.result-title{font-size:12px;font-weight:700;color:var(--acc);margin-bottom:10px;display:flex;align-items:center;gap:5px;}
.result-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed #99f6e4;}.result-row:last-child{border-bottom:none;}
.rr-label{font-size:12px;color:#555;}.rr-value{font-size:14px;font-weight:700;color:var(--txt);}.rr-value.danger{color:#dc2626;}.rr-value.success{color:#16a34a;}.rr-value.highlight{color:var(--pri);font-size:16px;}
.insight{background:#f0fdfa;border-radius:10px;padding:12px;margin-bottom:12px;display:flex;gap:8px;align-items:flex-start;}.insight-icon{font-size:16px;flex-shrink:0;margin-top:1px;}.insight-text{font-size:12px;color:#134e4a;line-height:1.6;}.insight-text b{font-weight:700;}
.blur-wrap{position:relative;}.blur-content{filter:blur(6px);pointer-events:none;user-select:none;}.blur-overlay{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(255,255,255,.7);border-radius:14px;z-index:2;}.blur-overlay p{font-size:14px;font-weight:700;color:var(--pri);margin-bottom:8px;}.blur-overlay .lock-icon{font-size:32px;margin-bottom:8px;}
.db-form{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);border:1px solid var(--border);}.db-form h3{font-size:14px;font-weight:700;color:var(--txt);margin-bottom:4px;display:flex;align-items:center;gap:6px;}.db-form .sub{font-size:11px;color:var(--sub);margin-bottom:14px;}
.btn{width:100%;padding:14px;border:none;border-radius:12px;font-size:15px;font-weight:700;font-family:inherit;cursor:pointer;transition:all .2s;}.btn-primary{background:linear-gradient(135deg,var(--acc),#14b8a6);color:#fff;box-shadow:0 4px 12px rgba(13,148,136,.3);}.btn-primary:hover{transform:translateY(-1px);}.btn-gold{background:linear-gradient(135deg,#d4a853,#c9952e);color:#fff;}.btn-outline{background:#fff;color:var(--acc);border:1.5px solid var(--acc);}.btn-gray{background:#f3f4f6;color:#555;border:none;}
.knowledge{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);border:1px solid var(--border);}.knowledge h3{font-size:14px;font-weight:700;margin-bottom:12px;display:flex;align-items:center;gap:6px;}.knowledge-item{padding:10px 0;border-bottom:1px solid #f3f4f6;}.knowledge-item:last-child{border-bottom:none;}.knowledge-item .ki-q{font-size:13px;font-weight:700;color:var(--pri);margin-bottom:4px;}.knowledge-item .ki-a{font-size:12px;color:#555;line-height:1.7;}
.complete-section{text-align:center;padding:30px 20px;}.complete-icon{font-size:48px;margin-bottom:12px;}.complete-title{font-size:18px;font-weight:800;color:var(--pri);margin-bottom:6px;}.complete-desc{font-size:13px;color:var(--sub);margin-bottom:20px;line-height:1.6;}.cta-cards{display:flex;flex-direction:column;gap:10px;margin-bottom:16px;}
.disclaimer{font-size:10px;color:#aaa;text-align:center;padding:12px 20px 30px;line-height:1.6;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}.fade-in{animation:fadeIn .4s ease forwards;}
</style>
</head>
<body>
<div class="wrap">
<div class="hero">
  <div class="hero-badge">ğŸ›ï¸ 5ë¶„ ê¸ˆìœµì§‘ì§“ê¸°Â® ì„¤ê³„</div>
  <h1>ë‚˜ë§Œì˜ <em>ê¸ˆìœµì§‘</em>ì„<br>ì§€ì–´ë³´ì„¸ìš”!</h1>
  <p>7ê°œ ì¬ë¬´ì„¤ê³„ë¥¼ í•œëˆˆì— í™•ì¸í•˜ê³ <br>íƒ„íƒ„í•œ ê¸ˆìœµ ì¸ìƒì„ ì„¤ê³„í•˜ì„¸ìš”</p>
  <div class="hero-stat"><div><div class="num">20ë…„</div><div class="lbl">CFP ê²½ë ¥</div></div><div><div class="num">2,000+</div><div class="lbl">ìƒë‹´ ì‹¤ì </div></div><div><div class="num">5ë¶„</div><div class="lbl">ì†Œìš”ì‹œê°„</div></div></div>
</div>
<div class="progress-bar"><div class="progress-inner"><div class="progress-track"><div class="progress-fill" id="progFill" style="width:25%"></div></div><div class="progress-text" id="progText">1/4</div></div></div>

<!-- STEP 1 -->
<div class="section active" id="step1">
  <div class="section-title">ğŸ›ï¸ ê¸°ë³¸ ì •ë³´ ì…ë ¥</div>
  <div class="section-desc">ê¸ˆìœµì§‘ì§“ê¸°ë¥¼ ìœ„í•œ í•µì‹¬ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
  <div class="input-card">
    <h3>ğŸ‘¤ ì¸ì ì‚¬í•­</h3>
    <div class="field-row">
      <div class="field"><label>í˜„ì¬ ë‚˜ì´</label><div class="input-wrap"><input type="number" id="age" placeholder="37"><span class="suffix">ì„¸</span></div></div>
      <div class="field"><label>ì€í‡´ ì˜ˆì • ë‚˜ì´</label><div class="input-wrap"><input type="number" id="retireAge" placeholder="65"><span class="suffix">ì„¸</span></div></div>
    </div>
    <div class="field-row">
      <div class="field"><label>ê¸°ëŒ€ ìˆ˜ëª…</label><div class="input-wrap"><input type="number" id="lifeAge" placeholder="90"><span class="suffix">ì„¸</span></div></div>
      <div class="field"><label>ë…¸í›„ ì›”ìƒí™œë¹„</label><div class="input-wrap"><input type="number" id="monthExpense" placeholder="300"><span class="suffix">ë§Œì›</span></div></div>
    </div>
  </div>
  <div class="input-card">
    <h3>ğŸ’° ì†Œë“Â·ìì‚°Â·ë¶€ì±„</h3>
    <div class="field-row">
      <div class="field"><label>ì—°ë´‰ (ì„¸ì „)</label><div class="input-wrap"><input type="number" id="salary" placeholder="6240"><span class="suffix">ë§Œì›</span></div></div>
      <div class="field"><label>ì›” ì†Œë“ (ì„¸í›„)</label><div class="input-wrap"><input type="number" id="income" placeholder="520"><span class="suffix">ë§Œì›</span></div></div>
    </div>
    <div class="field-row">
      <div class="field"><label>ì´ ìì‚°</label><div class="input-wrap"><input type="number" id="assets" placeholder="65000"><span class="suffix">ë§Œì›</span></div></div>
      <div class="field"><label>ì´ ë¶€ì±„</label><div class="input-wrap"><input type="number" id="debt" placeholder="40000"><span class="suffix">ë§Œì›</span></div></div>
    </div>
    <div class="field-row">
      <div class="field"><label>ì›” ì €ì¶•ì•¡</label><div class="input-wrap"><input type="number" id="monthSave" placeholder="130"><span class="suffix">ë§Œì›</span></div></div>
      <div class="field"><label>êµ­ë¯¼ì—°ê¸ˆ ì˜ˆìƒ(ì›”)</label><div class="input-wrap"><input type="number" id="natPension" placeholder="80"><span class="suffix">ë§Œì›</span></div></div>
    </div>
  </div>
  <button class="btn btn-primary" onclick="analyze()">ğŸ›ï¸ ê¸ˆìœµì§‘ ì„¤ê³„í•˜ê¸°</button>
</div>

<!-- STEP 2: 7ê°œ ì˜ì—­ 1ì°¨ ê²°ê³¼ -->
<div class="section" id="step2">
  <div class="section-title">ğŸ›ï¸ ê¸ˆìœµì§‘ì§“ê¸° 1ì°¨ ì„¤ê³„</div>
  <div class="section-desc">7ê°œ ì¬ë¬´ì„¤ê³„ ì˜ì—­ì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤</div>
  <div id="resultAreas"></div>
  <div class="blur-wrap"><div class="blur-overlay"><div class="lock-icon">ğŸ”’</div><p>ê¸ˆìœµì§‘ ì™„ì„±ë³¸ + ì¢…í•© ë¦¬í¬íŠ¸ ë³´ê¸°</p><button class="btn btn-primary" style="width:auto;padding:10px 24px;font-size:13px;" onclick="showStep(3)">ë¬´ë£Œë¡œ í™•ì¸í•˜ê¸° â†’</button></div>
    <div class="blur-content"><div class="result-card"><div class="result-title">ğŸ›ï¸ ê¸ˆìœµì§‘ ì¢…í•© ë“±ê¸‰</div><div class="result-row"><span class="rr-label">í˜„ì¬ ê¸ˆìœµì§‘</span><span class="rr-value">í•œì˜¥ (3ë‹¨ê³„)</span></div></div></div>
  </div>
</div>

<!-- STEP 3: DB -->
<div class="section" id="step3">
  <div class="section-title">ğŸ“‹ ê¸ˆìœµì§‘ ì™„ì„±ë³¸ ë°›ê¸°</div>
  <div class="section-desc">ì•„ë˜ ì •ë³´ë¥¼ ì…ë ¥í•˜ì‹œë©´ ì¢…í•© ì„¤ê³„ ê²°ê³¼ë¥¼ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤</div>
  <div class="db-form">
    <h3>ğŸ“© ë¶„ì„ ê²°ê³¼ ë°›ì„ ì •ë³´</h3><div class="sub">ì´ë©”ì¼ê³¼ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ê¸ˆìœµì§‘ ë¦¬í¬íŠ¸ë¥¼ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤</div>
    <div class="field"><label>ì´ë¦„</label><div class="input-wrap"><input type="text" id="userName" placeholder="í™ê¸¸ë™"></div></div>
    <div class="field"><label>ì„±ë³„</label><div style="display:flex;gap:8px;"><button class="btn btn-outline" id="gM" onclick="setGender('ë‚¨')" style="flex:1;padding:10px;font-size:13px;">ë‚¨ì„±</button><button class="btn btn-outline" id="gF" onclick="setGender('ì—¬')" style="flex:1;padding:10px;font-size:13px;">ì—¬ì„±</button></div></div>
    <div class="field"><label>ì „í™”ë²ˆí˜¸</label><div class="input-wrap"><input type="tel" id="userPhone" placeholder="010-1234-5678"></div></div>
    <div class="field"><label>ì´ë©”ì¼</label><div class="input-wrap"><input type="email" id="userEmail" placeholder="example@email.com"></div></div>
  </div>
  <button class="btn btn-primary" onclick="submitDB()">ğŸ”“ ê¸ˆìœµì§‘ ì™„ì„±ë³¸ ë³´ê¸°</button>
</div>

<!-- STEP 4: ê¸ˆìœµì§‘ ì™„ì„± -->
<div class="section" id="step4">
  <div class="section-title">ğŸ›ï¸ ë‚˜ì˜ ê¸ˆìœµì§‘ ì™„ì„±!</div>
  <div class="section-desc">CFP ì˜¤ìƒì—´ì˜ ê¸ˆìœµì§‘ì§“ê¸°Â® ì¢…í•© ì„¤ê³„ì…ë‹ˆë‹¤</div>
  <div id="houseVisual"></div>
  <div id="resultFinal"></div>
  <div id="insightAI"></div>
  <div class="knowledge">
    <h3>ğŸ“š ê¸ˆìœµì§‘ì§“ê¸°Â® í•µì‹¬ ì›ë¦¬</h3>
    <div class="knowledge-item"><div class="ki-q">Q. ê¸ˆìœµì§‘ì§“ê¸°Â®ë€?</div><div class="ki-a">CFP ì˜¤ìƒì—´ì´ ê°œë°œí•œ ì¬ë¬´ì„¤ê³„ ë°©ë²•ë¡ ì…ë‹ˆë‹¤. ì‹¤ì œ ì§‘ì„ ì§€ì„ ë•Œ ê¸°ì´ˆâ†’ê¸°ë‘¥â†’ì§€ë¶• ìˆœì„œê°€ ìˆë“¯ì´, ê¸ˆìœµë„ ìˆœì„œê°€ ìˆìŠµë‹ˆë‹¤. ê¸°ì´ˆê³µì‚¬(ë³´í—˜+ë¹„ìƒì˜ˆë¹„) â†’ ê¸°ë‘¥ê³µì‚¬(ë¶€ì±„ìƒí™˜+ì €ì¶•+ì€í‡´) â†’ ì§€ë¶•ê³µì‚¬(íˆ¬ì+ì„¸ê¸ˆ+ë¶€ë™ì‚°) ìˆœì„œë¥¼ ì§€ì¼œì•¼ ë¬´ë„ˆì§€ì§€ ì•ŠëŠ” ê¸ˆìœµì§‘ì„ ì§€ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div></div>
    <div class="knowledge-item"><div class="ki-q">Q. ë¶€ìì§€ìˆ˜ê°€ ë†’ìœ¼ë©´ ê¸ˆìœµì§‘ë„ ì¢‹ì€ê°€?</div><div class="ki-a">ë¶€ìì§€ìˆ˜ëŠ” ê¸ˆìœµì§‘ì˜ 'í¬ê¸°'ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. í•˜ì§€ë§Œ í¬ê¸°ë§Œ í¬ê³  ê¸°ì´ˆê°€ ë¶€ì‹¤í•˜ë©´ ë¬´ë„ˆì§‘ë‹ˆë‹¤. ë³´í—˜(ê¸°ì´ˆ)ì´ ì—†ëŠ”ë° íˆ¬ì(ì§€ë¶•)ë§Œ í•˜ëŠ” ê²ƒì€ ê¸°ì´ˆ ì—†ëŠ” ì§‘ì— í™”ë ¤í•œ ì§€ë¶•ì„ ì–¹ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ê¸ˆìœµì§‘ì§“ê¸°Â®ëŠ” 7ê°œ ì˜ì—­ì˜ 'ê· í˜•'ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤.</div></div>
    <div class="knowledge-item"><div class="ki-q">Q. 7ê°œ ì˜ì—­ ì¤‘ ê°€ì¥ ë¨¼ì € í•´ì•¼ í•  ê²ƒì€?</div><div class="ki-a">â‘  ë¹„ìƒì˜ˆë¹„ìê¸ˆ(ì›”ì†Œë“Ã—3~6ê°œì›”) í™•ë³´ â‘¡ ë³´í—˜ ë³´ì¥ ì ê²€ â‘¢ ê³ ê¸ˆë¦¬ ë¶€ì±„ ìƒí™˜ â‘£ ì€í‡´ ì¤€ë¹„ ì‹œì‘ â‘¤ ëª©ì ë³„ ì €ì¶• â‘¥ ì ˆì„¸ ì „ëµ â‘¦ íˆ¬ìÂ·ë¶€ë™ì‚°. ì´ ìˆœì„œë¥¼ ì§€í‚¤ë©´ ì–´ë–¤ ìœ„ê¸°ê°€ ì™€ë„ í”ë“¤ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.</div></div>
  </div>
  <div class="complete-section">
    <div class="complete-icon">ğŸ›ï¸</div><div class="complete-title">ê¸ˆìœµì§‘ ì„¤ê³„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</div><div class="complete-desc">ìƒì„¸ ë¦¬í¬íŠ¸ëŠ” ì…ë ¥í•˜ì‹  ì´ë©”ì¼ê³¼<br>ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ë°œì†¡ë©ë‹ˆë‹¤</div>
    <div class="cta-cards">
      <button class="btn btn-gold" onclick="window.open('https://moneya-frontend.vercel.app','_blank')">ğŸ¤– AIë¨¸ë‹ˆì•¼ ì‹œì‘í•˜ê¸°</button>
      <button class="btn btn-primary" onclick="window.open('https://owant.netlify.app/diagnosis/','_blank')">ğŸ“Š ë¬´ë£Œ ì¬ë¬´ì§„ë‹¨ í•´ë³´ê¸°</button>
      <button class="btn btn-outline" onclick="window.open('https://ohwant-hub.netlify.app','_blank')">ğŸ”— ì˜¤ìƒì—´ CFP ë” ì•Œì•„ë³´ê¸°</button>
      <button class="btn btn-gray" onclick="location.reload()">ğŸ”„ ë‹¤ì‹œ ì„¤ê³„í•˜ê¸°</button>
    </div>
  </div>
  <div class="disclaimer">â€» ê¸ˆìœµì§‘ì§“ê¸°Â®ëŠ” ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œì˜ ë“±ë¡ ë°©ë²•ë¡ ì…ë‹ˆë‹¤. ë³¸ ë¶„ì„ì€ ì°¸ê³ ìš©ì´ë©° ì „ë¬¸ê°€ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤.<br>Â© ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ Â· CFP ì˜¤ìƒì—´</div>
</div>
</div>
<script>
let gender='',D={};
function setGender(g){gender=g;document.getElementById('gM').style.background=g==='ë‚¨'?'var(--acc)':'#fff';document.getElementById('gM').style.color=g==='ë‚¨'?'#fff':'var(--acc)';document.getElementById('gF').style.background=g==='ì—¬'?'var(--acc)':'#fff';document.getElementById('gF').style.color=g==='ì—¬'?'#fff':'var(--acc)';}
function showStep(n){document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.getElementById('step'+n).classList.add('active','fade-in');document.getElementById('progFill').style.width=[25,50,75,100][n-1]+'%';document.getElementById('progText').textContent=n+'/4';window.scrollTo({top:0,behavior:'smooth'});}
function fmt(n){return n>=10000?(n/10000).toFixed(1)+'ì–µ':n.toLocaleString()+'ë§Œì›';}

function analyze(){
  const age=parseFloat(document.getElementById('age').value)||0;
  const retireAge=parseFloat(document.getElementById('retireAge').value)||65;
  const lifeAge=parseFloat(document.getElementById('lifeAge').value)||90;
  const monthExp=parseFloat(document.getElementById('monthExpense').value)||0;
  const salary=parseFloat(document.getElementById('salary').value)||0;
  const income=parseFloat(document.getElementById('income').value)||0;
  const assets=parseFloat(document.getElementById('assets').value)||0;
  const debt=parseFloat(document.getElementById('debt').value)||0;
  const monthSave=parseFloat(document.getElementById('monthSave').value)||0;
  const natPension=parseFloat(document.getElementById('natPension').value)||0;

  if(!age||!income){alert('ê¸°ë³¸ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}

  // 1. ì€í‡´ì„¤ê³„
  const yrsToRetire=retireAge-age;
  const retireYrs=lifeAge-retireAge;
  const retireNeed=monthExp*12*retireYrs;
  const retirePrepared=natPension*12*retireYrs;
  const retireGap=retireNeed-retirePrepared;

  // 2. ë¶€ì±„ì„¤ê³„
  const dsr=debt>0&&income>0?Math.round((debt*0.05/12)/(income)*100):0;

  // 3. ì €ì¶•ì„¤ê³„
  const saveRate=income>0?Math.round(monthSave/income*100):0;

  // 4. íˆ¬ìì„¤ê³„ (ë¶€ìì§€ìˆ˜)
  const netAsset=assets-debt;
  const annualIncome=income*12;
  const richIndex=annualIncome>0&&age>0?Math.round((netAsset*10)/(age*annualIncome)*100):0;

  // 5. ì„¸ê¸ˆì„¤ê³„
  const estTax=salary>0?Math.round(salary*0.06):0; // ì‹¤íš¨ì„¸ìœ¨ ì•½ 6% ì¶”ì •

  // 6. ë¶€ë™ì‚°ì„¤ê³„ (ìì‚°ì˜ ì•½ 60% ë¶€ë™ì‚° ê°€ì •)
  const estEstate=Math.round(assets*0.6);

  // 7. ë³´í—˜ì„¤ê³„
  const deathNeed=salary*3+debt;
  const cancerNeed=salary*2;
  const brainNeed=salary;

  // ë¶€ìì§€ìˆ˜ ë“±ê¸‰
  let level,house,emoji;
  if(richIndex<=0){level=1;house='í…íŠ¸';emoji='â›º';}
  else if(richIndex<=50){level=2;house='ì´ˆê°€ì§‘';emoji='ğŸ›–';}
  else if(richIndex<=100){level=3;house='í•œì˜¥';emoji='ğŸ ';}
  else if(richIndex<=200){level=4;house='ê³ ê¸‰ì–‘ì˜¥';emoji='ğŸ¡';}
  else{level=5;house='ê¶ì „';emoji='ğŸ°';}

  D={age,retireAge,lifeAge,monthExp,salary,income,assets,debt,monthSave,natPension,yrsToRetire,retireYrs,retireNeed,retirePrepared,retireGap,dsr,saveRate,netAsset,richIndex,level,house,emoji,estTax,estEstate,deathNeed,cancerNeed,brainNeed};

  // 7ê°œ ì˜ì—­ ì¹´ë“œ ë Œë”ë§
  const areas=[
    {icon:'ğŸ–ï¸',bg:'#dbeafe',name:'ì€í‡´ì„¤ê³„',badge:retireGap>0?'ë¶€ì¡±':'ì¶©ë¶„',badgeColor:retireGap>0?'#fef2f2;color:#dc2626':'#f0fdf4;color:#16a34a',rows:[
      {l:'ì€í‡´ê¹Œì§€',v:yrsToRetire+'ë…„',c:'t'},{l:'ë…¸í›„ í•„ìš”ìê¸ˆ',v:fmt(retireNeed),c:''},{l:'ì—°ê¸ˆ ì¤€ë¹„',v:fmt(retirePrepared),c:'g'},{l:'ë¶€ì¡±ìê¸ˆ',v:retireGap>0?fmt(retireGap):'ì—†ìŒ',c:retireGap>0?'r':'g'}]},
    {icon:'ğŸ’³',bg:'#fee2e2',name:'ë¶€ì±„ì„¤ê³„',badge:dsr>40?'ìœ„í—˜':dsr>30?'ì£¼ì˜':'ì–‘í˜¸',badgeColor:dsr>40?'#fef2f2;color:#dc2626':dsr>30?'#fffbeb;color:#a16207':'#f0fdf4;color:#16a34a',rows:[
      {l:'ì´ ë¶€ì±„',v:fmt(debt),c:'r'},{l:'DSR ì¶”ì •',v:dsr+'%',c:dsr>40?'r':''}]},
    {icon:'ğŸ’°',bg:'#fef9c3',name:'ì €ì¶•ì„¤ê³„',badge:saveRate>=30?'ìš°ìˆ˜':'ê°œì„ í•„ìš”',badgeColor:saveRate>=30?'#f0fdf4;color:#16a34a':'#fffbeb;color:#a16207',rows:[
      {l:'ì›” ì €ì¶•ì•¡',v:monthSave+'ë§Œì›',c:''},{l:'ì €ì¶•ë¥ ',v:saveRate+'%',c:saveRate>=30?'g':'r'}]},
    {icon:'ğŸ“ˆ',bg:'#f0fdf4',name:'íˆ¬ìì„¤ê³„',badge:emoji+' '+house,badgeColor:'#f0fdfa;color:#0d9488',rows:[
      {l:'ìˆœìì‚°',v:fmt(netAsset),c:netAsset>=0?'g':'r'},{l:'ë¶€ìì§€ìˆ˜',v:richIndex+'%',c:'b'}]},
    {icon:'ğŸ’¸',bg:'#eef2ff',name:'ì„¸ê¸ˆì„¤ê³„',badge:'í™•ì¸í•„ìš”',badgeColor:'#eef2ff;color:#4338ca',rows:[
      {l:'ì—°ë´‰',v:fmt(salary),c:''},{l:'ì¶”ì • ê²°ì •ì„¸ì•¡',v:fmt(estTax),c:''}]},
    {icon:'ğŸ ',bg:'#fff7ed',name:'ë¶€ë™ì‚°ì„¤ê³„',badge:'í™•ì¸í•„ìš”',badgeColor:'#fff7ed;color:#b45309',rows:[
      {l:'ì¶”ì • ë¶€ë™ì‚° ìì‚°',v:fmt(estEstate),c:''}]},
    {icon:'ğŸ›¡ï¸',bg:'#f3e8ff',name:'ë³´í—˜ì„¤ê³„',badge:'í™•ì¸í•„ìš”',badgeColor:'#f3e8ff;color:#7e22ce',rows:[
      {l:'ì‚¬ë§ í•„ìš”ë³´ì¥',v:fmt(deathNeed),c:''},{l:'ì•” í•„ìš”ë³´ì¥',v:fmt(cancerNeed),c:''},{l:'ë‡Œ/ì‹¬ í•„ìš”ë³´ì¥',v:'ê° '+fmt(brainNeed),c:''}]},
  ];

  let html='';
  areas.forEach(a=>{
    let rowsHTML=a.rows.map(r=>`<div class="area-row"><span class="label">${r.l}</span><span class="val ${r.c}">${r.v}</span></div>`).join('');
    html+=`<div class="area-card"><div class="area-header"><div class="area-icon" style="background:${a.bg}">${a.icon}</div><span class="area-name">${a.name}</span><span class="area-badge" style="background:${a.badgeColor}">${a.badge}</span></div>${rowsHTML}</div>`;
  });
  document.getElementById('resultAreas').innerHTML=html;
  showStep(2);
}

function submitDB(){
  const name=document.getElementById('userName').value.trim();const phone=document.getElementById('userPhone').value.trim();const email=document.getElementById('userEmail').value.trim();
  if(!name||!phone||!email){alert('ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}
  fetch('https://hook.eu1.make.com/gqxc1xxpz1x61pxfk996ollf00r0oiu9',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ìœ ì…ê²½ë¡œ:'ê¸ˆìœµì§‘ì§“ê¸°ì„¤ê³„',ì´ë¦„:name,ì„±ë³„:gender,ì „í™”ë²ˆí˜¸:phone,ì´ë©”ì¼:email,ë‚˜ì´:D.age+'ì„¸',ì€í‡´ë‚˜ì´:D.retireAge+'ì„¸',ì—°ë´‰:D.salary+'ë§Œì›',ì´ìì‚°:D.assets+'ë§Œì›',ì´ë¶€ì±„:D.debt+'ë§Œì›',ë¶€ìì§€ìˆ˜:D.richIndex+'%',ê¸ˆìœµì§‘ë“±ê¸‰:D.house,timestamp:new Date().toISOString()})}).catch(()=>{});

  // ê¸ˆìœµì§‘ SVG
  const colors=['#ef4444','#f97316','#eab308','#22c55e','#7c3aed'];
  const c=colors[D.level-1];
  document.getElementById('houseVisual').innerHTML=`
    <div class="house-visual" style="text-align:center;">
      <div style="font-size:64px;margin-bottom:8px;">${D.emoji}</div>
      <div style="font-size:22px;font-weight:900;color:${c};">${D.level}ë‹¨ê³„ Â· ${D.house}</div>
      <div style="font-size:14px;color:var(--sub);margin:4px 0 16px;">ë¶€ìì§€ìˆ˜ ${D.richIndex}%</div>
      <div style="display:flex;gap:2px;height:20px;border-radius:6px;overflow:hidden;margin:0 auto;max-width:280px;">
        ${colors.map((cl,i)=>`<div style="flex:1;background:${cl};opacity:${i<D.level?1:0.2};"></div>`).join('')}
      </div>
      <div style="display:flex;justify-content:space-between;font-size:9px;color:var(--sub);margin-top:4px;max-width:280px;margin-left:auto;margin-right:auto;">
        <span>â›ºí…íŠ¸</span><span>ğŸ›–ì´ˆê°€ì§‘</span><span>ğŸ í•œì˜¥</span><span>ğŸ¡ì–‘ì˜¥</span><span>ğŸ°ê¶ì „</span>
      </div>
    </div>`;

  // ì¢…í•© ë¦¬í¬íŠ¸
  let scores=[];
  scores.push({name:'ì€í‡´',score:D.retireGap<=0?100:Math.max(0,Math.round(D.retirePrepared/D.retireNeed*100))});
  scores.push({name:'ë¶€ì±„',score:D.dsr<=30?100:D.dsr<=40?70:40});
  scores.push({name:'ì €ì¶•',score:Math.min(100,Math.round(D.saveRate/30*100))});
  scores.push({name:'íˆ¬ì',score:Math.min(100,D.richIndex)});
  scores.push({name:'ì„¸ê¸ˆ',score:50}); // ê¸°ë³¸
  scores.push({name:'ë¶€ë™ì‚°',score:50});
  scores.push({name:'ë³´í—˜',score:50});
  const avgScore=Math.round(scores.reduce((s,x)=>s+x.score,0)/scores.length);

  let finalHTML=`<div class="result-card"><div class="result-title">ğŸ“Š ê¸ˆìœµì§‘ì§“ê¸°Â® ì¢…í•© ë¦¬í¬íŠ¸</div>
    <div class="result-row"><span class="rr-label">ê¸ˆìœµì§‘ ë“±ê¸‰</span><span class="rr-value highlight">${D.emoji} ${D.level}ë‹¨ê³„ ${D.house}</span></div>
    <div class="result-row"><span class="rr-label">ì¢…í•© ì ìˆ˜</span><span class="rr-value" style="font-size:18px;color:var(--acc);">${avgScore}ì  / 100ì </span></div>`;
  scores.forEach(s=>{
    const bar=`<div style="display:inline-block;width:60px;height:8px;background:#e5e7eb;border-radius:4px;vertical-align:middle;margin-left:6px;"><div style="width:${s.score}%;height:100%;background:${s.score>=70?'#22c55e':s.score>=40?'#eab308':'#ef4444'};border-radius:4px;"></div></div>`;
    finalHTML+=`<div class="result-row"><span class="rr-label">${s.name}</span><span class="rr-value" style="font-size:12px;">${s.score}ì  ${bar}</span></div>`;
  });
  finalHTML+=`</div>`;
  document.getElementById('resultFinal').innerHTML=finalHTML;

  // AI ì¸ì‚¬ì´íŠ¸
  const weakest=scores.reduce((a,b)=>a.score<b.score?a:b);
  document.getElementById('insightAI').innerHTML=`<div class="insight"><span class="insight-icon">ğŸ’¡</span><span class="insight-text"><b>CFP ì˜¤ìƒì—´ ì¢…í•© ì œì•ˆ:</b> í˜„ì¬ ê¸ˆìœµì§‘ì€ <b>${D.house}(${D.level}ë‹¨ê³„)</b>ì…ë‹ˆë‹¤. ê°€ì¥ ë³´ì™„ì´ í•„ìš”í•œ ì˜ì—­ì€ <b>${weakest.name}</b>(${weakest.score}ì )ì…ë‹ˆë‹¤. ${D.retireGap>0?'ì€í‡´ìê¸ˆ '+fmt(D.retireGap)+' ë¶€ì¡±ìœ¼ë¡œ ì›” '+(Math.round(D.retireGap/D.yrsToRetire/12))+'ë§Œì› ì¶”ê°€ ì €ì¶•ì´ ì‹œê¸‰í•©ë‹ˆë‹¤. ':''} ${D.dsr>40?'DSR '+D.dsr+'%ë¡œ ë¶€ì±„ ê´€ë¦¬ê°€ ìµœìš°ì„ ì…ë‹ˆë‹¤. ':''}ê¸ˆìœµì§‘ì§“ê¸°Â®ì˜ ìˆœì„œ(ê¸°ì´ˆâ†’ê¸°ë‘¥â†’ì§€ë¶•)ë¥¼ ë”°ë¼ í•œ ë‹¨ê³„ì”© ê°œì„ í•˜ë©´ 5ë…„ ë‚´ ë‹¤ìŒ ë“±ê¸‰ ë‹¬ì„±ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</span></div>`;

  showStep(4);
}
</script>
</body>
</html>
