<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>ë³´í—˜ë¶„ì„ | ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ</title>
<meta property="og:title" content="ë‚´ ë³´í—˜, ì œëŒ€ë¡œ ì¤€ë¹„ë˜ì–´ ìˆì„ê¹Œ?">
<meta property="og:description" content="8ëŒ€ ë³´ì¥ ë¶„ì„ìœ¼ë¡œ ë¶€ì¡±í•œ ë³´ì¥ì„ í™•ì¸í•˜ì„¸ìš” â€” CFP ì˜¤ìƒì—´">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<style>
:root{--pri:#1e3a5f;--acc:#7e22ce;--teal:#0d9488;--gold:#d4a853;--bg:#f4f6f8;--card:#fff;--txt:#333;--sub:#888;--border:#e5e7eb;}
*{margin:0;padding:0;box-sizing:border-box;}body{font-family:'Noto Sans KR',sans-serif;background:var(--bg);-webkit-font-smoothing:antialiased;}
.wrap{max-width:480px;margin:0 auto;background:var(--bg);min-height:100vh;}
.hero{background:linear-gradient(135deg,#581c87 0%,#7e22ce 50%,#6b21a8 100%);padding:40px 20px 30px;text-align:center;position:relative;overflow:hidden;}
.hero::before{content:'';position:absolute;top:-30%;right:-20%;width:200px;height:200px;background:radial-gradient(circle,rgba(250,204,21,.12),transparent 70%);border-radius:50%;}
.hero-badge{display:inline-block;background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.2);padding:6px 16px;border-radius:20px;font-size:12px;color:rgba(255,255,255,.9);font-weight:600;margin-bottom:12px;}
.hero h1{font-size:24px;font-weight:900;color:#fff;line-height:1.4;margin-bottom:8px;}.hero h1 em{font-style:normal;color:#fbbf24;}
.hero p{font-size:14px;color:rgba(255,255,255,.8);line-height:1.6;}
.hero-stat{display:flex;justify-content:center;gap:20px;margin-top:16px;}.hero-stat div{text-align:center;}.hero-stat .num{font-size:20px;font-weight:900;color:#fbbf24;}.hero-stat .lbl{font-size:10px;color:rgba(255,255,255,.7);margin-top:2px;}
.progress-bar{background:#fff;padding:12px 20px;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10;}.progress-inner{display:flex;align-items:center;gap:8px;}.progress-track{flex:1;height:6px;background:#e5e7eb;border-radius:3px;overflow:hidden;}.progress-fill{height:100%;background:linear-gradient(90deg,var(--acc),#a855f7);border-radius:3px;transition:width .5s;}.progress-text{font-size:11px;font-weight:700;color:var(--acc);min-width:36px;text-align:right;}
.section{padding:16px 20px;display:none;}.section.active{display:block;}.section-title{font-size:16px;font-weight:800;color:var(--txt);margin-bottom:4px;display:flex;align-items:center;gap:6px;}.section-desc{font-size:12px;color:var(--sub);margin-bottom:16px;}
.input-card{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);border:1px solid var(--border);}.input-card h3{font-size:14px;font-weight:700;color:var(--txt);margin-bottom:12px;display:flex;align-items:center;gap:6px;}
.field{margin-bottom:12px;}.field:last-child{margin-bottom:0;}.field label{display:block;font-size:12px;font-weight:600;color:#555;margin-bottom:4px;}.field .hint{font-size:10px;color:#999;margin-top:2px;}.field-row{display:flex;gap:10px;}.field-row .field{flex:1;margin-bottom:0;}
.input-wrap{position:relative;}.input-wrap input{width:100%;padding:12px 40px 12px 14px;border:1.5px solid var(--border);border-radius:10px;font-size:15px;font-family:inherit;outline:none;transition:border .2s;}.input-wrap input:focus{border-color:var(--acc);}.input-wrap .suffix{position:absolute;right:12px;top:50%;transform:translateY(-50%);font-size:13px;color:var(--sub);}
.ins-table{width:100%;border-collapse:collapse;font-size:12px;margin:12px 0;}.ins-table th{background:#f3e8ff;padding:8px 6px;border:1px solid #e9d5ff;font-weight:700;color:#6b21a8;text-align:center;}.ins-table td{padding:8px 6px;border:1px solid #e9d5ff;text-align:center;background:#fff;}.ins-table .lack{color:#dc2626;font-weight:700;}.ins-table .ok{color:#16a34a;font-weight:700;}
.result-card{background:linear-gradient(135deg,#faf5ff,#f3e8ff);border:1px solid #d8b4fe;border-radius:14px;padding:16px;margin-bottom:12px;}.result-card.red{background:linear-gradient(135deg,#fef2f2,#fff1f2);border-color:#fecaca;}.result-card.green{background:linear-gradient(135deg,#f0fdf4,#ecfdf5);border-color:#bbf7d0;}
.result-title{font-size:12px;font-weight:700;color:var(--acc);margin-bottom:10px;display:flex;align-items:center;gap:5px;}.result-card.red .result-title{color:#dc2626;}.result-card.green .result-title{color:#16a34a;}
.result-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed #d8b4fe;}.result-row:last-child{border-bottom:none;}.result-card.red .result-row{border-color:#fecaca;}.result-card.green .result-row{border-color:#bbf7d0;}
.rr-label{font-size:12px;color:#555;}.rr-value{font-size:14px;font-weight:700;color:var(--txt);}.rr-value.danger{color:#dc2626;}.rr-value.success{color:#16a34a;}.rr-value.highlight{color:var(--pri);font-size:16px;}
.insight{background:#faf5ff;border-radius:10px;padding:12px;margin-bottom:12px;display:flex;gap:8px;align-items:flex-start;}.insight-icon{font-size:16px;flex-shrink:0;margin-top:1px;}.insight-text{font-size:12px;color:#581c87;line-height:1.6;}.insight-text b{font-weight:700;}
.blur-wrap{position:relative;}.blur-content{filter:blur(6px);pointer-events:none;user-select:none;}.blur-overlay{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(255,255,255,.7);border-radius:14px;z-index:2;}.blur-overlay p{font-size:14px;font-weight:700;color:var(--pri);margin-bottom:8px;}.blur-overlay .lock-icon{font-size:32px;margin-bottom:8px;}
.db-form{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);border:1px solid var(--border);}.db-form h3{font-size:14px;font-weight:700;color:var(--txt);margin-bottom:4px;display:flex;align-items:center;gap:6px;}.db-form .sub{font-size:11px;color:var(--sub);margin-bottom:14px;}
.btn{width:100%;padding:14px;border:none;border-radius:12px;font-size:15px;font-weight:700;font-family:inherit;cursor:pointer;transition:all .2s;}.btn-primary{background:linear-gradient(135deg,var(--acc),#a855f7);color:#fff;box-shadow:0 4px 12px rgba(126,34,206,.3);}.btn-primary:hover{transform:translateY(-1px);}.btn-gold{background:linear-gradient(135deg,#d4a853,#c9952e);color:#fff;}.btn-outline{background:#fff;color:var(--acc);border:1.5px solid var(--acc);}.btn-gray{background:#f3f4f6;color:#555;border:none;}.btn-teal{background:linear-gradient(135deg,#0d9488,#14b8a6);color:#fff;}
.knowledge{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);border:1px solid var(--border);}.knowledge h3{font-size:14px;font-weight:700;margin-bottom:12px;display:flex;align-items:center;gap:6px;}.knowledge-item{padding:10px 0;border-bottom:1px solid #f3f4f6;}.knowledge-item:last-child{border-bottom:none;}.knowledge-item .ki-q{font-size:13px;font-weight:700;color:var(--pri);margin-bottom:4px;}.knowledge-item .ki-a{font-size:12px;color:#555;line-height:1.7;}
.complete-section{text-align:center;padding:30px 20px;}.complete-icon{font-size:48px;margin-bottom:12px;}.complete-title{font-size:18px;font-weight:800;color:var(--pri);margin-bottom:6px;}.complete-desc{font-size:13px;color:var(--sub);margin-bottom:20px;line-height:1.6;}.cta-cards{display:flex;flex-direction:column;gap:10px;margin-bottom:16px;}
.disclaimer{font-size:10px;color:#aaa;text-align:center;padding:12px 20px 30px;line-height:1.6;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}.fade-in{animation:fadeIn .4s ease forwards;}
</style>
</head>
<body>
<div class="wrap">
<div class="hero">
  <div class="hero-badge">ğŸ›¡ï¸ 3ë¶„ ë¬´ë£Œ ë³´í—˜ë¶„ì„</div>
  <h1>ë‚´ ë³´í—˜,<br><em>ì œëŒ€ë¡œ ì¤€ë¹„</em>ë˜ì–´ ìˆì„ê¹Œ?</h1>
  <p>8ëŒ€ ë³´ì¥ ë¶„ì„ìœ¼ë¡œ<br>ë¶€ì¡±í•œ ë³´ì¥ì„ ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”</p>
  <div class="hero-stat"><div><div class="num">20ë…„</div><div class="lbl">CFP ê²½ë ¥</div></div><div><div class="num">2,000+</div><div class="lbl">ìƒë‹´ ì‹¤ì </div></div><div><div class="num">3ë¶„</div><div class="lbl">ì†Œìš”ì‹œê°„</div></div></div>
</div>
<div class="progress-bar"><div class="progress-inner"><div class="progress-track"><div class="progress-fill" id="progFill" style="width:25%"></div></div><div class="progress-text" id="progText">1/4</div></div></div>

<!-- STEP 1 -->
<div class="section active" id="step1">
  <div class="section-title">ğŸ›¡ï¸ ë³´í—˜ ë¶„ì„ ì •ë³´ ì…ë ¥</div>
  <div class="section-desc">ì—°ë´‰ê³¼ ë¶€ì±„ ì •ë³´ë¡œ í•„ìš” ë³´ì¥ì„ ê³„ì‚°í•©ë‹ˆë‹¤</div>
  <div class="input-card">
    <h3>ğŸ’° ê¸°ë³¸ ì •ë³´</h3>
    <div class="field-row">
      <div class="field"><label>ì—°ë´‰ (ì„¸ì „)</label><div class="input-wrap"><input type="number" id="salary" placeholder="6240"><span class="suffix">ë§Œì›</span></div></div>
      <div class="field"><label>ì´ ë¶€ì±„</label><div class="input-wrap"><input type="number" id="debt" placeholder="40000"><span class="suffix">ë§Œì›</span></div></div>
    </div>
  </div>
  <div class="input-card">
    <h3>ğŸ›¡ï¸ í˜„ì¬ ë³´í—˜ ê°€ì… í˜„í™©</h3>
    <div class="field-row">
      <div class="field"><label>ì‚¬ë§ë³´ì¥</label><div class="input-wrap"><input type="number" id="haveDeath" placeholder="20000"><span class="suffix">ë§Œì›</span></div></div>
      <div class="field"><label>ì¥í•´ë³´ì¥</label><div class="input-wrap"><input type="number" id="haveDisab" placeholder="10000"><span class="suffix">ë§Œì›</span></div></div>
    </div>
    <div class="field-row">
      <div class="field"><label>ì•”ì§„ë‹¨ê¸ˆ</label><div class="input-wrap"><input type="number" id="haveCancer" placeholder="5000"><span class="suffix">ë§Œì›</span></div></div>
      <div class="field"><label>ë‡Œì§ˆí™˜ ì§„ë‹¨ê¸ˆ</label><div class="input-wrap"><input type="number" id="haveBrain" placeholder="3000"><span class="suffix">ë§Œì›</span></div></div>
    </div>
    <div class="field-row">
      <div class="field"><label>ì‹¬ì§ˆí™˜ ì§„ë‹¨ê¸ˆ</label><div class="input-wrap"><input type="number" id="haveHeart" placeholder="3000"><span class="suffix">ë§Œì›</span></div></div>
      <div class="field"><label>ì‹¤ë¹„ë³´í—˜ í•œë„</label><div class="input-wrap"><input type="number" id="haveReal" placeholder="5000"><span class="suffix">ë§Œì›</span></div></div>
    </div>
    <div class="field-row">
      <div class="field"><label>ì…ì›ë³´í—˜</label>
        <div style="display:flex;gap:6px;"><button class="btn btn-outline" style="flex:1;padding:8px;font-size:12px;" onclick="setToggle('hosp',true,this)">ê°€ì…</button><button class="btn btn-outline" style="flex:1;padding:8px;font-size:12px;" onclick="setToggle('hosp',false,this)">ë¯¸ê°€ì…</button></div>
      </div>
      <div class="field"><label>ì¹˜ë§¤ë³´í—˜</label>
        <div style="display:flex;gap:6px;"><button class="btn btn-outline" style="flex:1;padding:8px;font-size:12px;" onclick="setToggle('demen',true,this)">ê°€ì…</button><button class="btn btn-outline" style="flex:1;padding:8px;font-size:12px;" onclick="setToggle('demen',false,this)">ë¯¸ê°€ì…</button></div>
      </div>
    </div>
  </div>
  <button class="btn btn-primary" onclick="analyze()">ğŸ“Š ë³´í—˜ ë¶„ì„í•˜ê¸°</button>
</div>

<!-- STEP 2 -->
<div class="section" id="step2">
  <div class="section-title">ğŸ“Š 8ëŒ€ ë³´ì¥ ë¶„ì„ ê²°ê³¼</div>
  <div class="section-desc">í•„ìš”ë³´ì¥ ëŒ€ë¹„ í˜„ì¬ ì¤€ë¹„ í˜„í™©ì…ë‹ˆë‹¤</div>
  <div id="resultTable"></div>
  <div id="resultSummary"></div>
  <div id="insightBasic"></div>
  <div class="blur-wrap"><div class="blur-overlay"><div class="lock-icon">ğŸ”’</div><p>ë³´ì¥ ê°œì„  ì „ëµ ë³´ê¸°</p><button class="btn btn-primary" style="width:auto;padding:10px 24px;font-size:13px;" onclick="showStep(3)">ë¬´ë£Œë¡œ í™•ì¸í•˜ê¸° â†’</button></div>
    <div class="blur-content"><div class="result-card green"><div class="result-title">ğŸ¯ ë³´ì¥ ê°œì„  ìš°ì„ ìˆœìœ„</div><div class="result-row"><span class="rr-label">1ìˆœìœ„</span><span class="rr-value">ì¥í•´ (4.9ì–µ ë¶€ì¡±)</span></div></div></div>
  </div>
</div>

<!-- STEP 3 -->
<div class="section" id="step3">
  <div class="section-title">ğŸ“‹ ì‹¬í™” ë¶„ì„ ê²°ê³¼ ë°›ê¸°</div>
  <div class="section-desc">ì•„ë˜ ì •ë³´ë¥¼ ì…ë ¥í•˜ì‹œë©´ ë³´ì¥ ê°œì„  ì „ëµì„ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤</div>
  <div class="db-form">
    <h3>ğŸ“© ë¶„ì„ ê²°ê³¼ ë°›ì„ ì •ë³´</h3><div class="sub">ì´ë©”ì¼ê³¼ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ìƒì„¸ ë¦¬í¬íŠ¸ë¥¼ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤</div>
    <div class="field"><label>ì´ë¦„</label><div class="input-wrap"><input type="text" id="userName" placeholder="í™ê¸¸ë™"></div></div>
    <div class="field"><label>ì„±ë³„</label><div style="display:flex;gap:8px;"><button class="btn btn-outline" id="gM" onclick="setGender('ë‚¨')" style="flex:1;padding:10px;font-size:13px;">ë‚¨ì„±</button><button class="btn btn-outline" id="gF" onclick="setGender('ì—¬')" style="flex:1;padding:10px;font-size:13px;">ì—¬ì„±</button></div></div>
    <div class="field"><label>ì „í™”ë²ˆí˜¸</label><div class="input-wrap"><input type="tel" id="userPhone" placeholder="010-1234-5678"></div></div>
    <div class="field"><label>ì´ë©”ì¼</label><div class="input-wrap"><input type="email" id="userEmail" placeholder="example@email.com"></div></div>
  </div>
  <button class="btn btn-primary" onclick="submitDB()">ğŸ”“ ë³´ì¥ ê°œì„  ì „ëµ ë³´ê¸°</button>
</div>

<!-- STEP 4 -->
<div class="section" id="step4">
  <div class="section-title">ğŸ¯ ë³´ì¥ ê°œì„  ì „ëµ</div>
  <div class="section-desc">CFP ì˜¤ìƒì—´ì˜ ë³´í—˜ ì „ëµ ì œì•ˆì…ë‹ˆë‹¤</div>
  <div id="resultPriority"></div>
  <div id="insightAI"></div>
  <div class="knowledge">
    <h3>ğŸ“š ë³´í—˜ í•„ìˆ˜ ì§€ì‹</h3>
    <div class="knowledge-item"><div class="ki-q">Q. ë³´í—˜ í•„ìš”ìê¸ˆì€ ì–´ë–»ê²Œ ê³„ì‚°í•˜ë‚˜?</div><div class="ki-a">ì‚¬ë§/ì¥í•´ í•„ìš”ìê¸ˆ = ì—°ë´‰Ã—3 + ì´ë¶€ì±„ì…ë‹ˆë‹¤. ê°€ì¡±ì˜ 3ë…„ì¹˜ ìƒí™œë¹„ì™€ ë¶€ì±„ë¥¼ ì»¤ë²„í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì•”ì§„ë‹¨ê¸ˆì€ ì—°ë´‰Ã—2, ë‡Œ/ì‹¬ ì§„ë‹¨ê¸ˆì€ ì—°ë´‰Ã—1ì´ ê¸°ì¤€ì…ë‹ˆë‹¤. ì‹¤ë¹„ëŠ” 5ì²œë§Œì›ì´ ìµœì†Œ ê¶Œì¥ í•œë„ì…ë‹ˆë‹¤.</div></div>
    <div class="knowledge-item"><div class="ki-q">Q. ì‹¤ì†ë³´í—˜ì€ ì™œ í•„ìˆ˜ì¸ê°€?</div><div class="ki-a">ì‹¤ì†ë³´í—˜ì€ ì‹¤ì œ ì¹˜ë£Œë¹„ë¥¼ ë³´ì¥í•˜ëŠ” 'ë³´í—˜ì˜ ê½ƒ'ì…ë‹ˆë‹¤. 4ì„¸ëŒ€ ì‹¤ì†ë³´í—˜ì€ ê¸‰ì—¬ 90%, ë¹„ê¸‰ì—¬ 80%ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤. ì‹¤ë¹„ ì—†ì´ í° ë³‘ì— ê±¸ë¦¬ë©´ ìˆ˜ì²œë§Œì› ìë¹„ ë¶€ë‹´ì´ ìƒê¸¸ ìˆ˜ ìˆìœ¼ë‹ˆ, ë°˜ë“œì‹œ ìœ ì§€í•˜ì„¸ìš”.</div></div>
    <div class="knowledge-item"><div class="ki-q">Q. ì¹˜ë§¤ë³´í—˜ì€ ê¼­ ê°€ì…í•´ì•¼ í•˜ë‚˜?</div><div class="ki-a">65ì„¸ ì´ìƒ 10ëª… ì¤‘ 1ëª…ì´ ì¹˜ë§¤ì— ê±¸ë¦½ë‹ˆë‹¤. ì¹˜ë§¤ ê°„ë³‘ë¹„ëŠ” ì›” 200~400ë§Œì›ìœ¼ë¡œ ê°€ì¡±ì˜ ì¬ì •ì„ ì™„ì „íˆ ë¬´ë„ˆëœ¨ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì Šì„ ë•Œ ê°€ì…í•˜ë©´ ë³´í—˜ë£Œê°€ ì €ë ´í•˜ë¯€ë¡œ ì§€ê¸ˆ ê°€ì…í•˜ëŠ” ê²ƒì´ í˜„ëª…í•©ë‹ˆë‹¤.</div></div>
    <div class="knowledge-item"><div class="ki-q">Q. ë³´í—˜ë£ŒëŠ” ì†Œë“ì˜ ëª‡ %ê°€ ì ì •í•œê°€?</div><div class="ki-a">ì›” ì†Œë“ì˜ 7~10%ê°€ ì ì • ë³´í—˜ë£Œì…ë‹ˆë‹¤. ì´ë¥¼ ì´ˆê³¼í•˜ë©´ ì €ì¶•Â·íˆ¬ìì— ë¶€ì •ì  ì˜í–¥ì„ ì£¼ê³ , ë¯¸ë‹¬í•˜ë©´ ë³´ì¥ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. ë³´ì¥ì„± ë³´í—˜ ìœ„ì£¼ë¡œ ê°€ì…í•˜ê³ , ì €ì¶•ì„± ë³´í—˜ì€ ì„¸ì œí˜œíƒì´ ìˆëŠ” ê²½ìš°ì—ë§Œ ê³ ë ¤í•˜ì„¸ìš”.</div></div>
  </div>
  <div class="complete-section">
    <div class="complete-icon">âœ…</div><div class="complete-title">ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</div><div class="complete-desc">ìƒì„¸ ë¦¬í¬íŠ¸ëŠ” ì…ë ¥í•˜ì‹  ì´ë©”ì¼ê³¼<br>ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ë°œì†¡ë©ë‹ˆë‹¤</div>
    <div class="cta-cards">
      <button class="btn btn-gold" onclick="window.open('https://moneya-frontend.vercel.app','_blank')">ğŸ¤– AIë¨¸ë‹ˆì•¼ ì‹œì‘í•˜ê¸°</button>
      <button class="btn btn-teal" onclick="window.open('https://owant.netlify.app/diagnosis/','_blank')">ğŸ“Š ë¬´ë£Œ ì¬ë¬´ì§„ë‹¨ í•´ë³´ê¸°</button>
      <button class="btn btn-outline" onclick="window.open('https://ohwant-hub.netlify.app','_blank')">ğŸ”— ì˜¤ìƒì—´ CFP ë” ì•Œì•„ë³´ê¸°</button>
      <button class="btn btn-gray" onclick="location.reload()">ğŸ”„ ë‹¤ì‹œ ë¶„ì„í•˜ê¸°</button>
    </div>
  </div>
  <div class="disclaimer">â€» ë³¸ ë¶„ì„ì€ ì°¸ê³ ìš©ì´ë©°, ì •í™•í•œ ë³´í—˜ ë¶„ì„ì€ ì „ë¬¸ ì„¤ê³„ì‚¬ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤.<br>Â© ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ Â· CFP ì˜¤ìƒì—´</div>
</div>
</div>
<script>
let gender='',toggles={hosp:null,demen:null},D={},items=[];
function setGender(g){gender=g;document.getElementById('gM').style.background=g==='ë‚¨'?'var(--acc)':'#fff';document.getElementById('gM').style.color=g==='ë‚¨'?'#fff':'var(--acc)';document.getElementById('gF').style.background=g==='ì—¬'?'var(--acc)':'#fff';document.getElementById('gF').style.color=g==='ì—¬'?'#fff':'var(--acc)';}
function setToggle(k,v,el){toggles[k]=v;el.parentElement.querySelectorAll('button').forEach(b=>{b.style.background='#fff';b.style.color='var(--acc)';});el.style.background='var(--acc)';el.style.color='#fff';}
function showStep(n){document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.getElementById('step'+n).classList.add('active','fade-in');document.getElementById('progFill').style.width=[25,50,75,100][n-1]+'%';document.getElementById('progText').textContent=n+'/4';window.scrollTo({top:0,behavior:'smooth'});}
function fmt(n){return n>=10000?(n/10000).toFixed(1)+'ì–µ':n.toLocaleString()+'ë§Œ';}

function analyze(){
  const sal=parseFloat(document.getElementById('salary').value)||0;
  const debt=parseFloat(document.getElementById('debt').value)||0;
  if(!sal){alert('ì—°ë´‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}

  const hD=parseFloat(document.getElementById('haveDeath').value)||0;
  const hDi=parseFloat(document.getElementById('haveDisab').value)||0;
  const hC=parseFloat(document.getElementById('haveCancer').value)||0;
  const hB=parseFloat(document.getElementById('haveBrain').value)||0;
  const hH=parseFloat(document.getElementById('haveHeart').value)||0;
  const hR=parseFloat(document.getElementById('haveReal').value)||0;

  // í•„ìš”ìê¸ˆ ê³„ì‚° (ì•± ë¡œì§ ê¸°ë°˜)
  const deathNeed=sal*3+debt; // ì—°ë´‰Ã—3+ë¶€ì±„
  const disabNeed=sal*3+debt;
  const cancerNeed=sal*2; // ì—°ë´‰Ã—2
  const brainNeed=sal; // ì—°ë´‰Ã—1
  const heartNeed=sal;
  const realNeed=5000; // 5ì²œë§Œì›

  items=[
    {name:'ì‚¬ë§',emoji:'âš°ï¸',need:deathNeed,have:hD,lack:Math.max(0,deathNeed-hD)},
    {name:'ì¥í•´',emoji:'ğŸ¦½',need:disabNeed,have:hDi,lack:Math.max(0,disabNeed-hDi)},
    {name:'ì•”ì§„ë‹¨',emoji:'ğŸ¥',need:cancerNeed,have:hC,lack:Math.max(0,cancerNeed-hC)},
    {name:'ë‡Œì§ˆí™˜',emoji:'ğŸ§ ',need:brainNeed,have:hB,lack:Math.max(0,brainNeed-hB)},
    {name:'ì‹¬ì§ˆí™˜',emoji:'â¤ï¸',need:heartNeed,have:hH,lack:Math.max(0,heartNeed-hH)},
    {name:'ì‹¤ë¹„',emoji:'ğŸ’Š',need:realNeed,have:hR,lack:Math.max(0,realNeed-hR)},
    {name:'ì…ì›',emoji:'ğŸ¨',need:'ê°€ì…',have:toggles.hosp===true?'O':'X',lack:toggles.hosp===true?'-':'ë¯¸ê°€ì…',isToggle:true,ok:toggles.hosp===true},
    {name:'ì¹˜ë§¤',emoji:'ğŸ§“',need:'ê°€ì…',have:toggles.demen===true?'O':'X',lack:toggles.demen===true?'-':'ë¯¸ê°€ì…',isToggle:true,ok:toggles.demen===true},
  ];

  D={sal,debt,items};
  const lackCount=items.filter(i=>i.isToggle?!i.ok:i.lack>0).length;
  const mostUrgent=items.filter(i=>!i.isToggle&&i.lack>0).sort((a,b)=>b.lack-a.lack)[0];

  let tableRows=items.map(i=>`<tr><td>${i.emoji} ${i.name}</td><td>${i.isToggle?i.need:fmt(i.need)+'ì›'}</td><td style="color:#16a34a">${i.isToggle?i.have:fmt(i.have)+'ì›'}</td><td class="${(i.isToggle?!i.ok:i.lack>0)?'lack':'ok'}">${i.isToggle?i.lack:(i.lack>0?fmt(i.lack)+'ì›':'âœ…')}</td></tr>`).join('');

  document.getElementById('resultTable').innerHTML=`<div class="input-card" style="padding:12px;"><table class="ins-table"><thead><tr><th>ë‹´ë³´</th><th>í•„ìš”</th><th>ì¤€ë¹„</th><th>ë¶€ì¡±</th></tr></thead><tbody>${tableRows}</tbody></table>
    <div style="margin-top:8px;padding:8px;background:#f3e8ff;border-radius:8px;font-size:10px;color:#6b21a8;"><b>ğŸ“‹ í•„ìš”ìê¸ˆ ê¸°ì¤€:</b> ì‚¬ë§/ì¥í•´ = ì—°ë´‰Ã—3+ë¶€ì±„, ì•” = ì—°ë´‰Ã—2, ë‡Œ/ì‹¬ = ì—°ë´‰Ã—1, ì‹¤ë¹„ = 5ì²œë§Œì›</div></div>`;

  document.getElementById('resultSummary').innerHTML=`<div class="result-card ${lackCount>3?'red':''}"><div class="result-title">ğŸ“Š ë³´í—˜ ë¶„ì„ ìš”ì•½</div>
    <div class="result-row"><span class="rr-label">ì´ ë¶€ì¡± ë³´ì¥</span><span class="rr-value ${lackCount>0?'danger':'success'}">${lackCount}ê°œ í•­ëª©</span></div>
    ${mostUrgent?`<div class="result-row"><span class="rr-label">ê°€ì¥ ì‹œê¸‰í•œ ë³´ì¥</span><span class="rr-value danger">${mostUrgent.name} (${fmt(mostUrgent.lack)}ì› ë¶€ì¡±)</span></div>`:''}
    <div class="result-row"><span class="rr-label">ì¹˜ë§¤ íŠ¹ì•½</span><span class="rr-value ${toggles.demen?'success':'danger'}">${toggles.demen?'ê°€ì… ì™„ë£Œ':'ë¯¸ê°€ì… (ì¶”ê°€ ê¶Œì¥)'}</span></div>
  </div>`;

  document.getElementById('insightBasic').innerHTML=`<div class="insight"><span class="insight-icon">${lackCount<=2?'âœ…':'âš ï¸'}</span><span class="insight-text"><b>ë³´ì¥ ì§„ë‹¨:</b> ${lackCount}ê°œ í•­ëª©ì—ì„œ ë³´ì¥ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. ${mostUrgent?mostUrgent.name+' ë³´ì¥ì´ '+fmt(mostUrgent.lack)+'ì› ë¶€ì¡±í•˜ì—¬ ê°€ì¥ ì‹œê¸‰í•©ë‹ˆë‹¤.':''}</span></div>`;

  showStep(2);
}

function submitDB(){
  const name=document.getElementById('userName').value.trim();const phone=document.getElementById('userPhone').value.trim();const email=document.getElementById('userEmail').value.trim();
  if(!name||!phone||!email){alert('ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}
  const payload={ìœ ì…ê²½ë¡œ:'ë³´í—˜ë¶„ì„',ì´ë¦„:name,ì„±ë³„:gender,ì „í™”ë²ˆí˜¸:phone,ì´ë©”ì¼:email,ì—°ë´‰:D.sal+'ë§Œì›',ì´ë¶€ì±„:D.debt+'ë§Œì›',timestamp:new Date().toISOString()};
  items.forEach(i=>{payload[i.name+'_í•„ìš”']=i.isToggle?i.need:i.need+'ë§Œì›';payload[i.name+'_ì¤€ë¹„']=i.isToggle?i.have:i.have+'ë§Œì›';});
  fetch('https://hook.eu1.make.com/gqxc1xxpz1x61pxfk996ollf00r0oiu9',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)}).catch(()=>{});

  // ìš°ì„ ìˆœìœ„ ì •ë ¬
  const priorities=items.filter(i=>!i.isToggle&&i.lack>0).sort((a,b)=>b.lack-a.lack);
  const toggleLacks=items.filter(i=>i.isToggle&&!i.ok);
  let priHTML=priorities.map((p,i)=>`<div class="result-row"><span class="rr-label">${i+1}ìˆœìœ„: ${p.emoji} ${p.name}</span><span class="rr-value danger">${fmt(p.lack)}ì› ë¶€ì¡±</span></div>`).join('');
  priHTML+=toggleLacks.map((t,i)=>`<div class="result-row"><span class="rr-label">${priorities.length+i+1}ìˆœìœ„: ${t.emoji} ${t.name}</span><span class="rr-value danger">ë¯¸ê°€ì…</span></div>`).join('');

  document.getElementById('resultPriority').innerHTML=`
    <div class="result-card red"><div class="result-title">ğŸ¯ ë³´ì¥ ê°œì„  ìš°ì„ ìˆœìœ„</div>${priHTML||'<div class="result-row"><span class="rr-label">ëª¨ë“  ë³´ì¥ ì¶©ì¡±!</span><span class="rr-value success">âœ…</span></div>'}</div>
    <div class="result-card green"><div class="result-title">ğŸ’° ì ì • ë³´í—˜ë£Œ ê°€ì´ë“œ</div>
      <div class="result-row"><span class="rr-label">ì›” ì†Œë“ (ì„¸í›„ ì¶”ì •)</span><span class="rr-value">${Math.round(D.sal/12*0.8).toLocaleString()}ë§Œì›</span></div>
      <div class="result-row"><span class="rr-label">ì ì • ë³´í—˜ë£Œ (7~10%)</span><span class="rr-value highlight">ì›” ${Math.round(D.sal/12*0.8*0.07).toLocaleString()}~${Math.round(D.sal/12*0.8*0.1).toLocaleString()}ë§Œì›</span></div>
    </div>`;

  let ai=priorities.length>0?`ê°€ì¥ ì‹œê¸‰í•œ ${priorities[0].name} ë³´ì¥(${fmt(priorities[0].lack)}ì› ë¶€ì¡±)ë¶€í„° ë³´ì™„í•˜ì„¸ìš”. `:'ëª¨ë“  ê¸ˆì•¡ ë³´ì¥ì´ ì¶©ì¡±ë˜ì–´ ìˆìŠµë‹ˆë‹¤! ';
  if(!toggles.demen) ai+='ì¹˜ë§¤ë³´í—˜ì€ ì Šì„ ë•Œ ê°€ì…í• ìˆ˜ë¡ ë³´í—˜ë£Œê°€ ì €ë ´í•©ë‹ˆë‹¤. ì§€ê¸ˆ ê°€ì…ì„ ê¶Œì¥í•©ë‹ˆë‹¤. ';
  ai+='ë³´ì¥ì„± ë³´í—˜ ìœ„ì£¼ë¡œ ê°€ì…í•˜ê³ , ë³´í—˜ë£Œê°€ ì†Œë“ì˜ 10%ë¥¼ ì´ˆê³¼í•˜ì§€ ì•Šë„ë¡ ê´€ë¦¬í•˜ì„¸ìš”.';

  document.getElementById('insightAI').innerHTML=`<div class="insight"><span class="insight-icon">ğŸ’¡</span><span class="insight-text"><b>CFP ì˜¤ìƒì—´ ì¶”ì²œ:</b> ${ai}</span></div>`;
  showStep(4);
}
</script>
</body>
</html>
