<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>ì„¸ê¸ˆë¶„ì„ | ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ</title>
<meta property="og:title" content="ë‚´ ì—°ë§ì •ì‚°, ì œëŒ€ë¡œ ëŒë ¤ë°›ê³  ìˆì„ê¹Œ?">
<meta property="og:description" content="ì„¸ì•¡ê³µì œ ìµœì í™”ë¡œ ìµœëŒ€ 135ë§Œì› ì ˆì„¸í•˜ì„¸ìš” â€” CFP ì˜¤ìƒì—´">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<style>
:root{--pri:#1e3a5f;--acc:#4f46e5;--teal:#0d9488;--gold:#d4a853;--bg:#f4f6f8;--card:#fff;--txt:#333;--sub:#888;--border:#e5e7eb;}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Noto Sans KR',sans-serif;background:var(--bg);-webkit-font-smoothing:antialiased;}
.wrap{max-width:480px;margin:0 auto;background:var(--bg);min-height:100vh;}
.hero{background:linear-gradient(135deg,#312e81 0%,#4338ca 50%,#3730a3 100%);padding:40px 20px 30px;text-align:center;position:relative;overflow:hidden;}
.hero::before{content:'';position:absolute;top:-30%;right:-20%;width:200px;height:200px;background:radial-gradient(circle,rgba(250,204,21,0.12),transparent 70%);border-radius:50%;}
.hero-badge{display:inline-block;background:rgba(255,255,255,0.15);border:1px solid rgba(255,255,255,0.2);padding:6px 16px;border-radius:20px;font-size:12px;color:rgba(255,255,255,0.9);font-weight:600;margin-bottom:12px;}
.hero h1{font-size:24px;font-weight:900;color:#fff;line-height:1.4;margin-bottom:8px;}
.hero h1 em{font-style:normal;color:#fbbf24;}
.hero p{font-size:14px;color:rgba(255,255,255,0.8);line-height:1.6;}
.hero-stat{display:flex;justify-content:center;gap:20px;margin-top:16px;}
.hero-stat div{text-align:center;}
.hero-stat .num{font-size:20px;font-weight:900;color:#fbbf24;}
.hero-stat .lbl{font-size:10px;color:rgba(255,255,255,0.7);margin-top:2px;}
.progress-bar{background:#fff;padding:12px 20px;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10;}
.progress-inner{display:flex;align-items:center;gap:8px;}
.progress-track{flex:1;height:6px;background:#e5e7eb;border-radius:3px;overflow:hidden;}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--acc),#6366f1);border-radius:3px;transition:width 0.5s ease;}
.progress-text{font-size:11px;font-weight:700;color:var(--acc);min-width:36px;text-align:right;}
.section{padding:16px 20px;display:none;}.section.active{display:block;}
.section-title{font-size:16px;font-weight:800;color:var(--txt);margin-bottom:4px;display:flex;align-items:center;gap:6px;}
.section-desc{font-size:12px;color:var(--sub);margin-bottom:16px;}
.input-card{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,0.04);border:1px solid var(--border);}
.input-card h3{font-size:14px;font-weight:700;color:var(--txt);margin-bottom:12px;display:flex;align-items:center;gap:6px;}
.field{margin-bottom:12px;}.field:last-child{margin-bottom:0;}
.field label{display:block;font-size:12px;font-weight:600;color:#555;margin-bottom:4px;}
.field .hint{font-size:10px;color:#999;margin-top:2px;}
.field-row{display:flex;gap:10px;}.field-row .field{flex:1;margin-bottom:0;}
.input-wrap{position:relative;}
.input-wrap input{width:100%;padding:12px 40px 12px 14px;border:1.5px solid var(--border);border-radius:10px;font-size:15px;font-family:inherit;outline:none;transition:border 0.2s;}
.input-wrap input:focus{border-color:var(--acc);}
.input-wrap .suffix{position:absolute;right:12px;top:50%;transform:translateY(-50%);font-size:13px;color:var(--sub);}
.result-card{background:linear-gradient(135deg,#eef2ff,#e0e7ff);border:1px solid #c7d2fe;border-radius:14px;padding:16px;margin-bottom:12px;}
.result-card.green{background:linear-gradient(135deg,#f0fdf4,#ecfdf5);border-color:#bbf7d0;}
.result-card.red{background:linear-gradient(135deg,#fef2f2,#fff1f2);border-color:#fecaca;}
.result-card.gold{background:linear-gradient(135deg,#fefce8,#fef9c3);border-color:#fde68a;}
.result-title{font-size:12px;font-weight:700;color:var(--acc);margin-bottom:10px;display:flex;align-items:center;gap:5px;}
.result-card.green .result-title{color:#16a34a;}
.result-card.red .result-title{color:#dc2626;}
.result-card.gold .result-title{color:#a16207;}
.result-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed #c7d2fe;}
.result-row:last-child{border-bottom:none;}
.result-card.green .result-row{border-color:#bbf7d0;}
.result-card.red .result-row{border-color:#fecaca;}
.result-card.gold .result-row{border-color:#fde68a;}
.rr-label{font-size:12px;color:#555;}.rr-value{font-size:14px;font-weight:700;color:var(--txt);}
.rr-value.danger{color:#dc2626;}.rr-value.success{color:#16a34a;}.rr-value.highlight{color:var(--pri);font-size:16px;}.rr-value.blue{color:var(--acc);}
.insight{background:#eef2ff;border-radius:10px;padding:12px;margin-bottom:12px;display:flex;gap:8px;align-items:flex-start;}
.insight.green{background:#f0fdf4;}
.insight-icon{font-size:16px;flex-shrink:0;margin-top:1px;}
.insight-text{font-size:12px;color:#312e81;line-height:1.6;}.insight.green .insight-text{color:#166534;}
.insight-text b{font-weight:700;}
.blur-wrap{position:relative;}
.blur-content{filter:blur(6px);pointer-events:none;user-select:none;}
.blur-overlay{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(255,255,255,0.7);border-radius:14px;z-index:2;}
.blur-overlay p{font-size:14px;font-weight:700;color:var(--pri);margin-bottom:8px;}
.blur-overlay .lock-icon{font-size:32px;margin-bottom:8px;}
.db-form{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,0.04);border:1px solid var(--border);}
.db-form h3{font-size:14px;font-weight:700;color:var(--txt);margin-bottom:4px;display:flex;align-items:center;gap:6px;}
.db-form .sub{font-size:11px;color:var(--sub);margin-bottom:14px;}
.btn{width:100%;padding:14px;border:none;border-radius:12px;font-size:15px;font-weight:700;font-family:inherit;cursor:pointer;transition:all 0.2s;}
.btn-primary{background:linear-gradient(135deg,var(--acc),#6366f1);color:#fff;box-shadow:0 4px 12px rgba(79,70,229,0.3);}
.btn-primary:hover{transform:translateY(-1px);}
.btn-gold{background:linear-gradient(135deg,#d4a853,#c9952e);color:#fff;box-shadow:0 4px 12px rgba(212,168,83,0.3);}
.btn-outline{background:#fff;color:var(--acc);border:1.5px solid var(--acc);}
.btn-gray{background:#f3f4f6;color:#555;border:none;}
.btn-teal{background:linear-gradient(135deg,#0d9488,#14b8a6);color:#fff;}
.knowledge{background:var(--card);border-radius:16px;padding:20px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,0.04);border:1px solid var(--border);}
.knowledge h3{font-size:14px;font-weight:700;margin-bottom:12px;display:flex;align-items:center;gap:6px;}
.knowledge-item{padding:10px 0;border-bottom:1px solid #f3f4f6;}.knowledge-item:last-child{border-bottom:none;}
.knowledge-item .ki-q{font-size:13px;font-weight:700;color:var(--pri);margin-bottom:4px;}
.knowledge-item .ki-a{font-size:12px;color:#555;line-height:1.7;}
.complete-section{text-align:center;padding:30px 20px;}
.complete-icon{font-size:48px;margin-bottom:12px;}
.complete-title{font-size:18px;font-weight:800;color:var(--pri);margin-bottom:6px;}
.complete-desc{font-size:13px;color:var(--sub);margin-bottom:20px;line-height:1.6;}
.cta-cards{display:flex;flex-direction:column;gap:10px;margin-bottom:16px;}
.disclaimer{font-size:10px;color:#aaa;text-align:center;padding:12px 20px 30px;line-height:1.6;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
.fade-in{animation:fadeIn 0.4s ease forwards;}
</style>
</head>
<body>
<div class="wrap">

<div class="hero">
  <div class="hero-badge">ğŸ’¸ 3ë¶„ ë¬´ë£Œ ì„¸ê¸ˆë¶„ì„</div>
  <h1>ë‚´ ì—°ë§ì •ì‚°,<br><em>ì œëŒ€ë¡œ ëŒë ¤ë°›ê³ </em> ìˆì„ê¹Œ?</h1>
  <p>ì„¸ì•¡ê³µì œ ìµœì í™” í•œ ë²ˆìœ¼ë¡œ<br>ë§¤ë…„ ìµœëŒ€ 135ë§Œì› ì ˆì„¸ ê°€ëŠ¥</p>
  <div class="hero-stat">
    <div><div class="num">20ë…„</div><div class="lbl">CFP ê²½ë ¥</div></div>
    <div><div class="num">2,000+</div><div class="lbl">ìƒë‹´ ì‹¤ì </div></div>
    <div><div class="num">3ë¶„</div><div class="lbl">ì†Œìš”ì‹œê°„</div></div>
  </div>
</div>

<div class="progress-bar">
  <div class="progress-inner">
    <div class="progress-track"><div class="progress-fill" id="progFill" style="width:25%"></div></div>
    <div class="progress-text" id="progText">1/4</div>
  </div>
</div>

<!-- STEP 1 -->
<div class="section active" id="step1">
  <div class="section-title">ğŸ’¸ ì„¸ê¸ˆ ì •ë³´ ì…ë ¥</div>
  <div class="section-desc">ì›ì²œì§•ìˆ˜ì˜ìˆ˜ì¦ ê¸°ì¤€ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
  <div class="input-card">
    <h3>ğŸ“„ ê¸°ë³¸ ì„¸ê¸ˆ ì •ë³´</h3>
    <div class="field">
      <label>ì´ê¸‰ì—¬ (ì—°ë´‰)</label>
      <div class="input-wrap"><input type="number" id="salary" placeholder="6240"><span class="suffix">ë§Œì›</span></div>
      <div class="hint">ì„¸ì „ ì—°ë´‰ ê¸°ì¤€</div>
    </div>
    <div class="field-row">
      <div class="field">
        <label>ê²°ì •ì„¸ì•¡</label>
        <div class="input-wrap"><input type="number" id="taxDue" placeholder="380"><span class="suffix">ë§Œì›</span></div>
        <div class="hint">ì‹¤ì œ ë‚´ì•¼ í•  ì„¸ê¸ˆ</div>
      </div>
      <div class="field">
        <label>ê¸°ë‚©ë¶€ì„¸ì•¡</label>
        <div class="input-wrap"><input type="number" id="taxPaid" placeholder="450"><span class="suffix">ë§Œì›</span></div>
        <div class="hint">ì´ë¯¸ ë‚¸ ì„¸ê¸ˆ</div>
      </div>
    </div>
  </div>
  <div class="input-card">
    <h3>ğŸ¦ ì—°ê¸ˆì €ì¶• í˜„í™©</h3>
    <div class="field-row">
      <div class="field">
        <label>ì—°ê¸ˆì €ì¶• ì—°ë‚©ì…ì•¡</label>
        <div class="input-wrap"><input type="number" id="pension" placeholder="180"><span class="suffix">ë§Œì›</span></div>
      </div>
      <div class="field">
        <label>IRP ì—°ë‚©ì…ì•¡</label>
        <div class="input-wrap"><input type="number" id="irp" placeholder="0"><span class="suffix">ë§Œì›</span></div>
      </div>
    </div>
  </div>
  <button class="btn btn-primary" onclick="analyze()">ğŸ“Š ì„¸ê¸ˆ ë¶„ì„í•˜ê¸°</button>
</div>

<!-- STEP 2 -->
<div class="section" id="step2">
  <div class="section-title">ğŸ“Š ì„¸ê¸ˆ ë¶„ì„ ê²°ê³¼</div>
  <div class="section-desc">í˜„ì¬ ì„¸ê¸ˆ í˜„í™©ì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤</div>
  <div id="resultBasic"></div>
  <div id="insightBasic"></div>
  <div class="blur-wrap">
    <div class="blur-overlay">
      <div class="lock-icon">ğŸ”’</div>
      <p>ì ˆì„¸ ì „ëµ ìƒì„¸ ë¶„ì„ ë³´ê¸°</p>
      <button class="btn btn-primary" style="width:auto;padding:10px 24px;font-size:13px;" onclick="showStep(3)">ë¬´ë£Œë¡œ í™•ì¸í•˜ê¸° â†’</button>
    </div>
    <div class="blur-content">
      <div class="result-card gold">
        <div class="result-title">ğŸ’¡ ì—°ê¸ˆì €ì¶• ì„¸ì•¡ê³µì œ ìµœì í™”</div>
        <div class="result-row"><span class="rr-label">ì¶”ê°€ ë‚©ì… ì‹œ ì ˆì„¸</span><span class="rr-value">ìµœëŒ€ 108ë§Œì›</span></div>
        <div class="result-row"><span class="rr-label">10ë…„ê°„ ì ˆì„¸ íš¨ê³¼</span><span class="rr-value">1,080ë§Œì›</span></div>
      </div>
    </div>
  </div>
</div>

<!-- STEP 3 -->
<div class="section" id="step3">
  <div class="section-title">ğŸ“‹ ì‹¬í™” ë¶„ì„ ê²°ê³¼ ë°›ê¸°</div>
  <div class="section-desc">ì•„ë˜ ì •ë³´ë¥¼ ì…ë ¥í•˜ì‹œë©´ ì ˆì„¸ ì „ëµì„ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤</div>
  <div class="db-form">
    <h3>ğŸ“© ë¶„ì„ ê²°ê³¼ ë°›ì„ ì •ë³´</h3>
    <div class="sub">ì´ë©”ì¼ê³¼ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ìƒì„¸ ë¦¬í¬íŠ¸ë¥¼ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤</div>
    <div class="field"><label>ì´ë¦„</label><div class="input-wrap"><input type="text" id="userName" placeholder="í™ê¸¸ë™"></div></div>
    <div class="field"><label>ì„±ë³„</label>
      <div style="display:flex;gap:8px;">
        <button class="btn btn-outline" id="gM" onclick="setGender('ë‚¨')" style="flex:1;padding:10px;font-size:13px;">ë‚¨ì„±</button>
        <button class="btn btn-outline" id="gF" onclick="setGender('ì—¬')" style="flex:1;padding:10px;font-size:13px;">ì—¬ì„±</button>
      </div>
    </div>
    <div class="field"><label>ì „í™”ë²ˆí˜¸</label><div class="input-wrap"><input type="tel" id="userPhone" placeholder="010-1234-5678"></div></div>
    <div class="field"><label>ì´ë©”ì¼</label><div class="input-wrap"><input type="email" id="userEmail" placeholder="example@email.com"></div></div>
  </div>
  <button class="btn btn-primary" onclick="submitDB()">ğŸ”“ ì ˆì„¸ ì „ëµ ë³´ê¸°</button>
</div>

<!-- STEP 4 -->
<div class="section" id="step4">
  <div class="section-title">ğŸ’¡ ì ˆì„¸ ì „ëµ ë¶„ì„</div>
  <div class="section-desc">CFP ì˜¤ìƒì—´ì˜ ì„¸ê¸ˆ ìµœì í™” ì œì•ˆì…ë‹ˆë‹¤</div>
  <div id="resultPension"></div>
  <div id="resultStrategy"></div>
  <div id="insightAI"></div>

  <div class="knowledge">
    <h3>ğŸ“š ì ˆì„¸ í•„ìˆ˜ ì§€ì‹</h3>
    <div class="knowledge-item">
      <div class="ki-q">Q. ì—°ê¸ˆì €ì¶•ê³¼ IRP, ë¬´ì—‡ì´ ë‹¤ë¥¸ê°€?</div>
      <div class="ki-a">ì—°ê¸ˆì €ì¶•ì€ ì—° 600ë§Œì›, IRPëŠ” ì—° 900ë§Œì›(ì—°ê¸ˆì €ì¶• í¬í•¨)ê¹Œì§€ ì„¸ì•¡ê³µì œê°€ ë©ë‹ˆë‹¤. ì´ê¸‰ì—¬ 5,500ë§Œì› ì´í•˜ëŠ” ë‚©ì…ì•¡ì˜ 16.5%, ì´ˆê³¼í•˜ë©´ 13.2%ë¥¼ ì„¸ì•¡ê³µì œ ë°›ìŠµë‹ˆë‹¤. IRPëŠ” í‡´ì§ê¸ˆ ìˆ˜ë ¹ ì‹œì—ë„ í•„ìš”í•˜ë¯€ë¡œ ë‘˜ ë‹¤ ê°€ì…í•˜ëŠ” ê²ƒì´ ìœ ë¦¬í•©ë‹ˆë‹¤.</div>
    </div>
    <div class="knowledge-item">
      <div class="ki-q">Q. ISA ê³„ì¢ŒëŠ” ì™œ ë§Œë“¤ì–´ì•¼ í•˜ë‚˜?</div>
      <div class="ki-a">ISA(ê°œì¸ì¢…í•©ìì‚°ê´€ë¦¬ê³„ì¢Œ)ëŠ” ë¹„ê³¼ì„¸+ë¶„ë¦¬ê³¼ì„¸ í˜œíƒì„ ì œê³µí•©ë‹ˆë‹¤. ì¼ë°˜í˜•ì€ 200ë§Œì›, ì„œë¯¼í˜•ì€ 400ë§Œì›ê¹Œì§€ ë¹„ê³¼ì„¸ì´ê³ , ì´ˆê³¼ë¶„ì€ 9.9% ë¶„ë¦¬ê³¼ì„¸ì…ë‹ˆë‹¤. 3ë…„ ë§Œê¸° í›„ ì—°ê¸ˆê³„ì¢Œë¡œ ì´ì „í•˜ë©´ ì¶”ê°€ ì„¸ì•¡ê³µì œ(10%, ìµœëŒ€ 300ë§Œì›)ë„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
    </div>
    <div class="knowledge-item">
      <div class="ki-q">Q. ê²°ì •ì„¸ì•¡ê³¼ ê¸°ë‚©ë¶€ì„¸ì•¡ì˜ ê´€ê³„ëŠ”?</div>
      <div class="ki-a">ê¸°ë‚©ë¶€ì„¸ì•¡(ì´ë¯¸ ë‚¸ ì„¸ê¸ˆ)ì—ì„œ ê²°ì •ì„¸ì•¡(ì‹¤ì œ ë‚´ì•¼ í•  ì„¸ê¸ˆ)ì„ ë¹¼ë©´ í™˜ê¸‰/ì¶”ê°€ë‚©ë¶€ ê¸ˆì•¡ì´ ë‚˜ì˜µë‹ˆë‹¤. ê¸°ë‚©ë¶€ > ê²°ì •ì´ë©´ í™˜ê¸‰, ê¸°ë‚©ë¶€ < ê²°ì •ì´ë©´ ì¶”ê°€ ë‚©ë¶€ì…ë‹ˆë‹¤. ê³µì œ í•­ëª©ì„ ìµœëŒ€í•œ í™œìš©í•˜ë©´ ê²°ì •ì„¸ì•¡ì„ ë‚®ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
    </div>
    <div class="knowledge-item">
      <div class="ki-q">Q. 13ì›”ì˜ ì›”ê¸‰ì„ ë” ë°›ìœ¼ë ¤ë©´?</div>
      <div class="ki-a">ì—°ê¸ˆì €ì¶•/IRP ì„¸ì•¡ê³µì œ, ì˜ë£Œë¹„Â·êµìœ¡ë¹„ ê³µì œ, ê¸°ë¶€ê¸ˆ ê³µì œ, ì£¼íƒìê¸ˆ ê³µì œë¥¼ ê¼¼ê¼¼íˆ ì±™ê¸°ì„¸ìš”. íŠ¹íˆ ì—°ê¸ˆì €ì¶•+IRPì— 900ë§Œì›ì„ ê½‰ ì±„ìš°ë©´ ìµœëŒ€ 148.5ë§Œì›(5,500ë§Œì› ì´í•˜) ë˜ëŠ” 118.8ë§Œì›(5,500ë§Œì› ì´ˆê³¼) ì ˆì„¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
    </div>
  </div>

  <div class="complete-section">
    <div class="complete-icon">âœ…</div>
    <div class="complete-title">ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</div>
    <div class="complete-desc">ìƒì„¸ ë¦¬í¬íŠ¸ëŠ” ì…ë ¥í•˜ì‹  ì´ë©”ì¼ê³¼<br>ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ë°œì†¡ë©ë‹ˆë‹¤</div>
    <div class="cta-cards">
      <button class="btn btn-gold" onclick="window.open('https://moneya-frontend.vercel.app','_blank')">ğŸ¤– AIë¨¸ë‹ˆì•¼ ì‹œì‘í•˜ê¸°</button>
      <button class="btn btn-teal" onclick="window.open('https://owant.netlify.app/diagnosis/','_blank')">ğŸ“Š ë¬´ë£Œ ì¬ë¬´ì§„ë‹¨ í•´ë³´ê¸°</button>
      <button class="btn btn-outline" onclick="window.open('https://ohwant-hub.netlify.app','_blank')">ğŸ”— ì˜¤ìƒì—´ CFP ë” ì•Œì•„ë³´ê¸°</button>
      <button class="btn btn-gray" onclick="location.reload()">ğŸ”„ ë‹¤ì‹œ ë¶„ì„í•˜ê¸°</button>
    </div>
  </div>
  <div class="disclaimer">â€» ë³¸ ë¶„ì„ì€ ì°¸ê³ ìš©ì´ë©°, ì •í™•í•œ ì„¸ê¸ˆ ê³„ì‚°ì€ ì„¸ë¬´ì‚¬ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤.<br>Â© ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ Â· CFP ì˜¤ìƒì—´</div>
</div>

</div>
<script>
let gender='',D={};
function setGender(g){gender=g;document.getElementById('gM').style.background=g==='ë‚¨'?'var(--acc)':'#fff';document.getElementById('gM').style.color=g==='ë‚¨'?'#fff':'var(--acc)';document.getElementById('gF').style.background=g==='ì—¬'?'var(--acc)':'#fff';document.getElementById('gF').style.color=g==='ì—¬'?'#fff':'var(--acc)';}
function showStep(n){document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.getElementById('step'+n).classList.add('active','fade-in');document.getElementById('progFill').style.width=[25,50,75,100][n-1]+'%';document.getElementById('progText').textContent=n+'/4';window.scrollTo({top:0,behavior:'smooth'});}
function fmt(n){return n.toLocaleString();}

function analyze(){
  const salary=parseFloat(document.getElementById('salary').value)||0;
  const taxDue=parseFloat(document.getElementById('taxDue').value)||0;
  const taxPaid=parseFloat(document.getElementById('taxPaid').value)||0;
  const pension=parseFloat(document.getElementById('pension').value)||0;
  const irp=parseFloat(document.getElementById('irp').value)||0;
  if(!salary){alert('ì´ê¸‰ì—¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}

  const refund=taxPaid-taxDue;
  const isRefund=refund>=0;
  const effectiveRate=salary>0?Math.round(taxDue/salary*1000)/10:0;
  
  // ì„¸ì•¡ê³µì œìœ¨
  const deductRate=salary<=5500?0.165:0.132;
  const deductRatePct=salary<=5500?'16.5%':'13.2%';
  const currentPensionTotal=pension+irp;
  const maxPension=900;
  const additionalPension=Math.max(0,maxPension-currentPensionTotal);
  const currentDeduct=Math.round(currentPensionTotal*deductRate);
  const maxDeduct=Math.round(maxPension*deductRate);
  const additionalDeduct=maxDeduct-currentDeduct;

  D={salary,taxDue,taxPaid,refund,isRefund,effectiveRate,deductRate,deductRatePct,pension,irp,currentPensionTotal,maxPension,additionalPension,currentDeduct,maxDeduct,additionalDeduct};

  document.getElementById('resultBasic').innerHTML=`
    <div class="result-card ${isRefund?'green':'red'}">
      <div class="result-title">${isRefund?'ğŸ‰ í™˜ê¸‰':'âš ï¸ ì¶”ê°€ë‚©ë¶€'} ë¶„ì„ ê²°ê³¼</div>
      <div class="result-row"><span class="rr-label">ì´ê¸‰ì—¬ (ì—°ë´‰)</span><span class="rr-value">${fmt(salary)}ë§Œì›</span></div>
      <div class="result-row"><span class="rr-label">ê²°ì •ì„¸ì•¡</span><span class="rr-value">${fmt(taxDue)}ë§Œì›</span></div>
      <div class="result-row"><span class="rr-label">ê¸°ë‚©ë¶€ì„¸ì•¡</span><span class="rr-value">${fmt(taxPaid)}ë§Œì›</span></div>
      <div class="result-row"><span class="rr-label">${isRefund?'í™˜ê¸‰ê¸ˆ':'ì¶”ê°€ë‚©ë¶€'}</span><span class="rr-value ${isRefund?'success':'danger'}" style="font-size:18px;">${isRefund?'+':''}${fmt(Math.abs(refund))}ë§Œì›</span></div>
      <div class="result-row"><span class="rr-label">ì‹¤íš¨ì„¸ìœ¨</span><span class="rr-value blue">${effectiveRate}%</span></div>
    </div>
    <div class="result-card">
      <div class="result-title">ğŸ¦ í˜„ì¬ ì—°ê¸ˆì €ì¶•/IRP í˜„í™©</div>
      <div class="result-row"><span class="rr-label">ì—°ê¸ˆì €ì¶• ë‚©ì…</span><span class="rr-value">${fmt(pension)}ë§Œì›/ë…„</span></div>
      <div class="result-row"><span class="rr-label">IRP ë‚©ì…</span><span class="rr-value">${fmt(irp)}ë§Œì›/ë…„</span></div>
      <div class="result-row"><span class="rr-label">í•©ê³„ ë‚©ì…</span><span class="rr-value">${fmt(currentPensionTotal)}ë§Œì›/ë…„</span></div>
      <div class="result-row"><span class="rr-label">ìµœëŒ€ í•œë„</span><span class="rr-value">${fmt(maxPension)}ë§Œì›/ë…„</span></div>
      <div class="result-row"><span class="rr-label">ì„¸ì•¡ê³µì œìœ¨ (ì´ê¸‰ì—¬ ${salary<=5500?'5,500ë§Œì›â†“':'5,500ë§Œì›â†‘'})</span><span class="rr-value blue">${deductRatePct}</span></div>
      <div class="result-row"><span class="rr-label">í˜„ì¬ ì„¸ì•¡ê³µì œ</span><span class="rr-value">${fmt(currentDeduct)}ë§Œì›</span></div>
    </div>
  `;

  let msg=isRefund?`${fmt(refund)}ë§Œì› í™˜ê¸‰ì„ ë°›ìœ¼ì…¨ë„¤ìš”! í•˜ì§€ë§Œ ì—°ê¸ˆì €ì¶•/IRPë¥¼ ë” í™œìš©í•˜ë©´ ì¶”ê°€ ${fmt(additionalDeduct)}ë§Œì› ì ˆì„¸ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.`:`${fmt(Math.abs(refund))}ë§Œì› ì¶”ê°€ ë‚©ë¶€ ìƒí™©ì…ë‹ˆë‹¤. ì—°ê¸ˆì €ì¶•/IRP ì„¸ì•¡ê³µì œë¥¼ ìµœëŒ€í•œ í™œìš©í•˜ë©´ ë‚´ë…„ì—ëŠ” í™˜ê¸‰ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
  document.getElementById('insightBasic').innerHTML=`<div class="insight"><span class="insight-icon">ğŸ’¡</span><span class="insight-text"><b>ì„¸ê¸ˆ ì§„ë‹¨:</b> ${msg}</span></div>`;

  showStep(2);
}

function submitDB(){
  const name=document.getElementById('userName').value.trim();
  const phone=document.getElementById('userPhone').value.trim();
  const email=document.getElementById('userEmail').value.trim();
  if(!name){alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}
  if(!phone){alert('ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}
  if(!email){alert('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');return;}

  fetch('https://hook.eu1.make.com/gqxc1xxpz1x61pxfk996ollf00r0oiu9',{
    method:'POST',headers:{'Content-Type':'application/json'},
    body:JSON.stringify({ìœ ì…ê²½ë¡œ:'ì„¸ê¸ˆë¶„ì„',ì´ë¦„:name,ì„±ë³„:gender,ì „í™”ë²ˆí˜¸:phone,ì´ë©”ì¼:email,ì´ê¸‰ì—¬:D.salary+'ë§Œì›',ê²°ì •ì„¸ì•¡:D.taxDue+'ë§Œì›',ê¸°ë‚©ë¶€ì„¸ì•¡:D.taxPaid+'ë§Œì›',í™˜ê¸‰ì¶”ë‚©:D.refund+'ë§Œì›',ì—°ê¸ˆì €ì¶•:D.pension+'ë§Œì›',IRP:D.irp+'ë§Œì›',timestamp:new Date().toISOString()})
  }).catch(()=>{});

  // ì—°ê¸ˆì €ì¶• ìµœì í™”
  const optPension=Math.min(600,D.maxPension-D.irp);
  const optIRP=D.maxPension-optPension;
  const optDeduct=Math.round(D.maxPension*D.deductRate);
  const savedIn10=D.additionalDeduct*10;

  document.getElementById('resultPension').innerHTML=`
    <div class="result-card gold">
      <div class="result-title">ğŸ’¡ ì—°ê¸ˆì €ì¶•/IRP ì„¸ì•¡ê³µì œ ìµœì í™”</div>
      <div class="result-row"><span class="rr-label">í˜„ì¬ ë‚©ì…</span><span class="rr-value">${fmt(D.currentPensionTotal)}ë§Œì› â†’ ì„¸ì•¡ê³µì œ ${fmt(D.currentDeduct)}ë§Œì›</span></div>
      <div class="result-row"><span class="rr-label">ì¶”ì²œ: ì—°ê¸ˆì €ì¶•</span><span class="rr-value blue">${fmt(optPension)}ë§Œì›/ë…„ (ì›” ${fmt(Math.round(optPension/12))}ë§Œì›)</span></div>
      <div class="result-row"><span class="rr-label">ì¶”ì²œ: IRP</span><span class="rr-value blue">${fmt(optIRP)}ë§Œì›/ë…„ (ì›” ${fmt(Math.round(optIRP/12))}ë§Œì›)</span></div>
      <div class="result-row"><span class="rr-label">ìµœì í™” ì‹œ ì„¸ì•¡ê³µì œ</span><span class="rr-value success">${fmt(optDeduct)}ë§Œì›</span></div>
      <div class="result-row"><span class="rr-label">ì¶”ê°€ ì ˆì„¸ íš¨ê³¼</span><span class="rr-value highlight">+${fmt(D.additionalDeduct)}ë§Œì›/ë…„</span></div>
      <div class="result-row"><span class="rr-label">10ë…„ê°„ ì ˆì„¸ íš¨ê³¼</span><span class="rr-value highlight">${fmt(savedIn10)}ë§Œì›</span></div>
    </div>
  `;

  // ì¶”ê°€ ì ˆì„¸ ì „ëµ
  document.getElementById('resultStrategy').innerHTML=`
    <div class="result-card green">
      <div class="result-title">ğŸ¯ ì¶”ê°€ ì ˆì„¸ ì²´í¬ë¦¬ìŠ¤íŠ¸</div>
      <div class="result-row"><span class="rr-label">âœ… ì—°ê¸ˆì €ì¶•/IRP 900ë§Œì› ì±„ìš°ê¸°</span><span class="rr-value">${D.currentPensionTotal>=900?'ì™„ë£Œ':'ë¯¸ë‹¬'}</span></div>
      <div class="result-row"><span class="rr-label">âœ… ISA ê³„ì¢Œ ê°€ì… (ë¹„ê³¼ì„¸ í˜œíƒ)</span><span class="rr-value">í™•ì¸ í•„ìš”</span></div>
      <div class="result-row"><span class="rr-label">âœ… ì£¼íƒì²­ì•½ ì†Œë“ê³µì œ (ì—° 240ë§Œì›)</span><span class="rr-value">í™•ì¸ í•„ìš”</span></div>
      <div class="result-row"><span class="rr-label">âœ… ì‹ ìš©ì¹´ë“œ ì†Œë“ê³µì œ ìµœì í™”</span><span class="rr-value">í™•ì¸ í•„ìš”</span></div>
      <div class="result-row"><span class="rr-label">âœ… ì˜ë£Œë¹„/êµìœ¡ë¹„ ê³µì œ ì±™ê¸°ê¸°</span><span class="rr-value">í™•ì¸ í•„ìš”</span></div>
    </div>
  `;

  let ai=D.additionalPension>0?`ì—°ê¸ˆì €ì¶•/IRPì— ì—° ${fmt(D.additionalPension)}ë§Œì›ë§Œ ì¶”ê°€ ë‚©ì…í•˜ë©´ ë§¤ë…„ ${fmt(D.additionalDeduct)}ë§Œì› ì ˆì„¸ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì›” ${fmt(Math.round(D.additionalPension/12))}ë§Œì›ì”© ìë™ì´ì²´ë¥¼ ì„¤ì •í•˜ì„¸ìš”. 10ë…„ì´ë©´ ${fmt(savedIn10)}ë§Œì›, 20ë…„ì´ë©´ ë…¸í›„ìê¸ˆ+ì ˆì„¸ ì´ì¤‘ íš¨ê³¼ë¥¼ ëˆ„ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`:`ì—°ê¸ˆì €ì¶•/IRPë¥¼ ì´ë¯¸ ìµœëŒ€ í•œë„ë¡œ í™œìš©í•˜ê³  ê³„ì‹­ë‹ˆë‹¤! ISA ê³„ì¢Œë¥¼ ì¶”ê°€ë¡œ í™œìš©í•˜ê³ , ë¹„ê³¼ì„¸ í•´ì™¸ì£¼ì‹ ì–‘ë„ì†Œë“(250ë§Œì› ì´í•˜) ë“±ì„ ì±™ê¸°ì‹œë©´ ë” ì ˆì„¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
  document.getElementById('insightAI').innerHTML=`<div class="insight green"><span class="insight-icon">ğŸ’¡</span><span class="insight-text"><b>CFP ì˜¤ìƒì—´ ì¶”ì²œ:</b> ${ai}</span></div>`;

  showStep(4);
}
</script>
</body>
</html>
