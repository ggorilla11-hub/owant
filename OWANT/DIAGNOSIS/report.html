<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ê¸ˆìœµì§‘ì§“ê¸°Â® ì¬ë¬´ë¶„ì„ ë¦¬í¬íŠ¸</title>
<meta property="og:title" content="ë‚˜ì˜ ê¸ˆìœµì§‘ì§“ê¸°Â® ê²°ê³¼">
<meta property="og:description" content="AIë¨¸ë‹ˆì•¼ì™€ í•¨ê»˜ ë¶€ìì§€ìˆ˜ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js" crossorigin="anonymous"></script>
<style>
:root {
  --primary: #6C3CE1;
  --primary-light: #8B5CF6;
  --gold: #D4A853;
  --navy: #0F2B4C;
  --dark: #1A1A2E;
  --success: #27AE60;
  --warning: #F39C12;
  --danger: #E74C3C;
  --gray: #8896A7;
  --light: #F5F7FA;
  --white: #FFFFFF;
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family: 'Noto Sans KR', sans-serif;
  background: var(--light);
  color: var(--dark);
  max-width: 480px;
  margin: 0 auto;
  -webkit-font-smoothing: antialiased;
}

/* Header */
.report-header {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
  color: #fff;
  padding: 36px 22px 28px;
  text-align: center;
  position: relative;
}
.report-confetti { font-size: 28px; margin-bottom: 8px; }
.report-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: rgba(108,60,225,0.25);
  border: 1px solid rgba(108,60,225,0.4);
  color: #A78BFA;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 500;
  margin-bottom: 12px;
}
.report-title {
  font-size: 22px;
  font-weight: 900;
  margin-bottom: 4px;
}
.report-subtitle {
  font-size: 13px;
  opacity: 0.75;
}

/* House Card */
.house-card {
  background: var(--white);
  border-radius: 16px;
  margin: -16px 16px 14px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.08);
  overflow: hidden;
  position: relative;
}
.house-image-wrap {
  position: relative;
  width: 100%;
  height: 200px;
  overflow: hidden;
}
.house-image-wrap img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.house-level-badge {
  position: absolute;
  top: 10px;
  right: 10px;
  background: rgba(0,0,0,0.55);
  color: #fff;
  padding: 4px 11px;
  border-radius: 16px;
  font-size: 11px;
  font-weight: 600;
  backdrop-filter: blur(4px);
}
.house-info { padding: 18px 20px 22px; }
.house-name { font-size: 24px; font-weight: 900; color: var(--navy); margin-bottom: 5px; }
.house-score-btn {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  background: linear-gradient(135deg, var(--gold), #E8B95A);
  color: var(--navy);
  padding: 5px 13px;
  border-radius: 16px;
  font-size: 13px;
  font-weight: 700;
  margin-bottom: 10px;
}
.house-desc {
  font-size: 13px;
  line-height: 1.7;
  color: #4A5568;
}

/* Section Card */
.section-card {
  background: var(--white);
  border-radius: 16px;
  margin: 0 16px 14px;
  padding: 20px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.05);
}
.section-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 16px;
}
.section-icon {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  flex-shrink: 0;
}
.section-icon.gold { background: #FFF3CD; }
.section-icon.blue { background: #DBEAFE; }
.section-icon.green { background: #D1FAE5; }
.section-title { font-size: 15px; font-weight: 700; color: var(--navy); }
.section-subtitle { font-size: 11px; color: var(--gray); margin-top: 1px; }

/* Wealth Formula */
.wealth-formula {
  background: #F8FAFC;
  border: 1px solid #E2E8F0;
  border-radius: 10px;
  padding: 14px;
  margin-bottom: 16px;
  text-align: center;
}
.wealth-formula-title { font-size: 12px; font-weight: 600; color: var(--primary); margin-bottom: 6px; }
.wealth-formula-text { font-size: 13px; font-weight: 700; color: var(--navy); }

/* Wealth Grades */
.wealth-grade {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 10px;
  margin-bottom: 6px;
  transition: all 0.2s;
}
.wealth-grade.active {
  background: var(--primary);
  color: #fff;
}
.wealth-grade-icon { font-size: 20px; flex-shrink: 0; }
.wealth-grade-info { flex: 1; }
.wealth-grade-name { font-size: 13px; font-weight: 700; }
.wealth-grade-range { font-size: 11px; opacity: 0.7; }
.wealth-grade-badge {
  font-size: 11px;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 10px;
}
.wealth-grade.active .wealth-grade-badge {
  background: rgba(255,255,255,0.2);
}

/* Debt Bar */
.debt-bar-wrap { margin: 14px 0; }
.debt-bar-label {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  margin-bottom: 6px;
}
.debt-bar-track {
  height: 12px;
  background: #EDF2F7;
  border-radius: 6px;
  overflow: hidden;
  position: relative;
}
.debt-bar-fill {
  height: 100%;
  border-radius: 6px;
  transition: width 1.2s ease;
}
.debt-status {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 14px;
  border-radius: 10px;
  margin-top: 14px;
}
.debt-status.safe { background: #D1FAE5; }
.debt-status.warning { background: #FEF3C7; }
.debt-status.danger { background: #FEE2E2; }
.debt-status-icon { font-size: 22px; flex-shrink: 0; }
.debt-status-title { font-size: 14px; font-weight: 700; color: var(--navy); }
.debt-status-desc { font-size: 12px; line-height: 1.6; color: #4A5568; margin-top: 3px; }

/* Budget Table */
.budget-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}
.budget-table th {
  background: var(--navy);
  color: #fff;
  padding: 9px 10px;
  text-align: left;
  font-weight: 600;
  font-size: 12px;
}
.budget-table th:last-child, .budget-table td:last-child { text-align: right; }
.budget-table th:nth-child(2), .budget-table td:nth-child(2) { text-align: right; }
.budget-table td {
  padding: 9px 10px;
  border-bottom: 1px solid #EDF2F7;
}
.budget-table tr:nth-child(even) { background: #F8FAFC; }
.budget-table .total-row { font-weight: 700; background: #F0F4FF; }

/* CTA */
.cta-app {
  background: linear-gradient(135deg, #6C3CE1, #4C1D95);
  border-radius: 16px;
  margin: 0 16px 14px;
  padding: 26px 20px;
  text-align: center;
  color: #fff;
}
.cta-app h3 { font-size: 17px; font-weight: 900; margin-bottom: 8px; }
.cta-app p { font-size: 13px; opacity: 0.85; line-height: 1.6; margin-bottom: 18px; }
.cta-app .btn-app {
  display: block;
  width: 100%;
  padding: 14px;
  background: var(--white);
  color: var(--primary);
  border: none;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
}

/* Share */
.share-bar {
  display: flex;
  gap: 10px;
  margin: 0 16px 14px;
}
.share-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  padding: 11px;
  border: none;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 600;
  font-family: inherit;
  cursor: pointer;
}
.share-btn.kakao { background: #FEE500; color: #3C1E1E; }
.share-btn.sms { background: var(--success); color: #fff; }
.share-btn.copy { background: #E2E8F0; color: var(--navy); }

/* Toast */
.toast {
  position: fixed;
  bottom: -50px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--navy);
  color: #fff;
  padding: 10px 20px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 500;
  transition: bottom 0.3s ease;
  z-index: 999;
}
.toast.show { bottom: 30px; }

.footer {
  text-align: center;
  padding: 24px 16px 36px;
  font-size: 11px;
  color: var(--gray);
  line-height: 1.8;
}
</style>
</head>
<body>

<div id="report-wrapper"></div>

<div id="toast" class="toast"></div>

<script>
// ê¸ˆìœµì£¼íƒ ë°ì´í„°
const houseData = [
  { level:1, name:'í…íŠ¸', minScore:0, maxScore:0, image:'https://moneya-frontend.vercel.app/assets/house1-Cg76rqP7.jpg', desc:'ì•„ì§ ê¸ˆìœµì£¼íƒì˜ ê¸°ì´ˆê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”! ì§€ê¸ˆë¶€í„° ì‹œì‘í•˜ë©´ ì¶©ë¶„íˆ ì—…ê·¸ë ˆì´ë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹„ìƒì˜ˆë¹„ìê¸ˆ ë§ˆë ¨ê³¼ ë¶€ì±„ ì •ë¦¬ë¶€í„° ì‹œì‘í•´ë³´ì„¸ìš”. ğŸŒ±' },
  { level:2, name:'ì´ˆê°€ì§‘', minScore:1, maxScore:50, image:'https://moneya-frontend.vercel.app/assets/house2-B1GiF-3L.jpg', desc:'ê¸°ë³¸ì ì¸ ê¸ˆìœµ ê¸°ë°˜ì´ ê°–ì¶°ì§€ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ë¶€ì±„ë¥¼ ì¤„ì´ê³  ë¹„ìƒì˜ˆë¹„ìê¸ˆì„ ë§ˆë ¨í•˜ëŠ” ê²ƒì´ ìš°ì„ ì…ë‹ˆë‹¤. ê¾¸ì¤€í•œ ì €ì¶• ìŠµê´€ì´ ì¤‘ìš”í•´ìš”! ğŸŒ±' },
  { level:3, name:'í•œì˜¥', minScore:51, maxScore:100, image:'https://moneya-frontend.vercel.app/assets/house3-CiiNxUBf.jpg', desc:'ì•ˆì •ì ì¸ ì¬ë¬´ ê¸°ë°˜ì„ ê°–ì¶”ì…¨ìŠµë‹ˆë‹¤! ì €ì¶•ë¥ ì„ ì¡°ê¸ˆ ë” ë†’ì´ê³  íˆ¬ìë¥¼ ì‹œì‘í•˜ë©´ ì–‘ì˜¥ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•  ìˆ˜ ìˆì–´ìš”. ğŸ ' },
  { level:4, name:'ì–‘ì˜¥', minScore:101, maxScore:200, image:'https://moneya-frontend.vercel.app/assets/house4-ywz7gWNQ.jpg', desc:'í›Œë¥­í•œ ì¬ë¬´ ìƒíƒœì…ë‹ˆë‹¤! ì²´ê³„ì ì¸ íˆ¬ìì™€ ì ˆì„¸ ì „ëµìœ¼ë¡œ ê¶ì „ì„ í–¥í•´ ë‚˜ì•„ê°€ì„¸ìš”. íŒŒì´ì–´ì¡±ë„ ê¿ˆì´ ì•„ë‹™ë‹ˆë‹¤! ğŸŒŸ' },
  { level:5, name:'ê¶ì „', minScore:201, maxScore:99999, image:'https://moneya-frontend.vercel.app/assets/house5-CLgrT-Xl.jpg', desc:'ì§„ì •í•œ ë¶€ìì…ë‹ˆë‹¤! í† ë§ˆìŠ¤ ìŠ¤íƒ ë¦¬ êµìˆ˜ ê¸°ì¤€ ìƒìœ„ ë¶€ìì— í•´ë‹¹í•©ë‹ˆë‹¤. ì´ ìˆ˜ì¤€ì„ ìœ ì§€í•˜ë©´ì„œ ë‹¤ìŒ ì„¸ëŒ€ë¥¼ ìœ„í•œ ìì‚° ì´ì „ë„ ê³ ë ¤í•´ë³´ì„¸ìš”. ğŸ°' }
];

const budgetRatios = {
  1: { living:25, saving:50, pension:10, insurance:5, loan:10 },
  2: { living:30, saving:40, pension:10, insurance:10, loan:10 },
  3: { living:40, saving:30, pension:10, insurance:10, loan:10 },
  4: { living:50, saving:20, pension:10, insurance:10, loan:10 },
  5: { living:60, saving:10, pension:10, insurance:10, loan:10 }
};

const budgetLabels = { living:'ğŸ  ìƒí™œë¹„', saving:'ğŸ’° ì €ì¶•/íˆ¬ì', pension:'ğŸ›ï¸ ë…¸í›„ì—°ê¸ˆ', insurance:'ğŸ›¡ï¸ ë³´ì¥ì„±ë³´í—˜', loan:'ğŸ¦ ëŒ€ì¶œì›ë¦¬ê¸ˆ' };

function formatMoney(n) {
  if (n >= 10000) { const u = Math.floor(n/10000); const r = n%10000; return r > 0 ? u+'ì–µ '+r.toLocaleString()+'ë§Œì›' : u+'ì–µì›'; }
  return n.toLocaleString() + 'ë§Œì›';
}
function formatMoneyShort(n) {
  if (Math.abs(n) >= 10000) return (n/10000).toFixed(1) + 'ì–µì›';
  return n.toLocaleString() + 'ë§Œì›';
}

function getParams() {
  const p = new URLSearchParams(window.location.search);
  return {
    nickname: decodeURIComponent(p.get('nickname') || 'ê³ ê°'),
    age: parseInt(p.get('age')) || 40,
    income: parseInt(p.get('income')) || 500,
    assets: parseInt(p.get('assets')) || 50000,
    debt: parseInt(p.get('debt')) || 20000,
    wealthIndex: parseInt(p.get('wealth_index')) || 0,
    houseType: decodeURIComponent(p.get('house_type') || ''),
    familyCount: parseInt(p.get('family_count')) || 3
  };
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

// ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™”
Kakao.init('97b8ff67fce6e9b52985c6da425c617d');

function shareKakao() {
  const url = window.location.href;
  const data = getParams();
  Kakao.Share.sendDefault({
    objectType: 'feed',
    content: {
      title: 'ë‚˜ì˜ ê¸ˆìœµì§‘ì§“ê¸°Â® ê²°ê³¼',
      description: data.nickname + 'ë‹˜ì˜ ë¶€ìì§€ìˆ˜: ' + (data.wealthIndex || '') + 'ì ',
      imageUrl: document.getElementById('rpt-house-img') ? document.getElementById('rpt-house-img').src : 'https://moneya-frontend.vercel.app/assets/house3-CiiNxUBf.jpg',
      link: { mobileWebUrl: url, webUrl: url }
    },
    buttons: [{ title: 'ë‚˜ë„ ì§„ë‹¨ë°›ê¸°', link: { mobileWebUrl: 'https://owant.netlify.app/diagnosis', webUrl: 'https://owant.netlify.app/diagnosis' } }]
  });
}
function shareSMS() {
  const url = window.location.href;
  const text = 'ë‚˜ì˜ ê¸ˆìœµì§‘ì§“ê¸°Â® ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”! ' + url;
  // iOSëŠ” &body=, AndroidëŠ” ?body=
  const sep = /iPhone|iPad/i.test(navigator.userAgent) ? '&' : '?';
  window.location.href = 'sms:' + sep + 'body=' + encodeURIComponent(text);
}
function copyLink() {
  const url = window.location.href;
  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(url).then(() => showToast('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!')).catch(() => fallbackCopy(url));
  } else {
    fallbackCopy(url);
  }
}
function fallbackCopy(text) {
  const ta = document.createElement('textarea');
  ta.value = text;
  ta.style.cssText = 'position:fixed;left:-9999px';
  document.body.appendChild(ta);
  ta.select();
  try { document.execCommand('copy'); showToast('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!'); }
  catch(e) { showToast('ë§í¬ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”'); }
  document.body.removeChild(ta);
}

function renderReport() {
  const d = getParams();
  const netAsset = d.assets - d.debt;
  let wi = d.wealthIndex;
  if (!wi && d.income > 0 && d.age > 0) {
    wi = Math.round((netAsset * 10) / (d.age * d.income * 12) * 100);
  }
  wi = Math.max(0, wi);
  const dr = d.assets > 0 ? Math.round((d.debt / d.assets) * 1000) / 10 : 0;

  let house = houseData[0];
  if (d.houseType) { house = houseData.find(h => h.name === d.houseType) || houseData[0]; }
  else { for (let h of houseData) { if (wi >= h.minScore && wi <= h.maxScore) { house = h; break; } } }

  const fc = Math.min(Math.max(d.familyCount, 1), 5);
  const budget = budgetRatios[fc];

  // ë¶€ì±„ë¹„ìœ¨ íŒì •
  let dClass='safe', dIcon='ğŸ‰', dTitle='í›Œë¥­í•©ë‹ˆë‹¤!', dDesc='ë¬´ë¶€ì±„ ìƒíƒœì…ë‹ˆë‹¤. ì¬ì •ì  ììœ ì˜ ê¸°ì´ˆë¥¼ ì™„ì„±í•˜ì…¨ìŠµë‹ˆë‹¤!', dColor='var(--success)';
  if (dr > 0 && dr <= 20) { dIcon='âœ…'; dTitle='ê±´ì „í•œ ìˆ˜ì¤€'; dDesc='ë¶€ì±„ë¹„ìœ¨ 20% ì´í•˜ë¡œ ê±´ê°•í•œ ì¬ë¬´ ìƒíƒœì…ë‹ˆë‹¤. ì´ ìƒíƒœë¥¼ ìœ ì§€í•˜ì„¸ìš”!'; }
  else if (dr > 20 && dr <= 40) { dClass='warning'; dIcon='âš ï¸'; dTitle='ê´€ë¦¬ í•„ìš”'; dDesc='ë¶€ì±„ë¹„ìœ¨ 40% ì´í•˜ëŠ” ê´€ë¦¬ê°€ í•„ìš”í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ ëŒ€ì¶œì„ ì¤„ì´ê³ , ìƒí™˜ ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.'; dColor='var(--warning)'; }
  else if (dr > 40) { dClass='danger'; dIcon='ğŸš¨'; dTitle='ì¦‰ì‹œ ì¡°ì¹˜ í•„ìš”'; dDesc='ë¶€ì±„ë¹„ìœ¨ì´ 40%ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ì‹ ìš©ëŒ€ì¶œë¶€í„° ìš°ì„  ìƒí™˜í•˜ê³ , ì§€ì¶œì„ ì¤„ì—¬ ë¶€ì±„ íƒˆì¶œ ê³„íšì„ ì„¸ìš°ì„¸ìš”!'; dColor='var(--danger)'; }

  const badges = ['ì‹œì‘','ë¯¸í¡','ë³´í†µ','ì–‘í˜¸','í›Œë¥­'];
  const emojis = ['ğŸ•ï¸','ğŸ›–','ğŸ ','ğŸ¡','ğŸ°'];
  const barW = Math.min(dr, 60) / 60 * 100;

  // ì˜ˆì‚° í…Œì´ë¸” HTML
  let budgetRows = '';
  Object.keys(budgetLabels).forEach(key => {
    const pct = budget[key];
    const amt = Math.round(d.income * pct / 100);
    budgetRows += `<tr><td>${budgetLabels[key]}</td><td>${pct}%</td><td>${amt.toLocaleString()}ë§Œì›</td></tr>`;
  });
  budgetRows += `<tr class="total-row"><td>í•©ê³„</td><td>100%</td><td>${d.income.toLocaleString()}ë§Œì›</td></tr>`;

  document.getElementById('report-wrapper').innerHTML = `
    <div class="report-header">
      <div class="report-confetti">ğŸ‰</div>
      <div class="report-badge"><span>âœ¨</span> ì¬ë¬´ì§„ë‹¨ ì™„ë£Œ</div>
      <h1 class="report-title">${d.nickname}ë‹˜ì˜ ê¸ˆìœµì§‘ì§“ê¸°Â®</h1>
      <p class="report-subtitle">${d.age}ì„¸ Â· ìˆœìì‚° ${formatMoneyShort(netAsset)}</p>
    </div>

    <div class="house-card">
      <div class="house-image-wrap">
        <img id="rpt-house-img" src="${house.image}" alt="${house.name}">
        <div class="house-level-badge">${house.level}ë‹¨ê³„</div>
      </div>
      <div class="house-info">
        <div class="house-name">${house.name}</div>
        <div class="house-score-btn"><span>â­</span><span>ë¶€ìì§€ìˆ˜ ${wi}ì </span></div>
        <div class="house-desc">${house.desc}</div>
      </div>
    </div>

    <!-- ë¶€ìì§€ìˆ˜ ë¶„ì„ -->
    <div class="section-card">
      <div class="section-header">
        <div class="section-icon gold">â­</div>
        <div><div class="section-title">ë¶€ìì§€ìˆ˜ ë¶„ì„</div><div class="section-subtitle">í† ë§ˆìŠ¤ ìŠ¤íƒ ë¦¬ êµìˆ˜ì˜ ë¶€ì ê³µì‹</div></div>
      </div>
      <div class="wealth-formula">
        <div class="wealth-formula-title">ğŸ“ ë¶€ìì§€ìˆ˜ ê³„ì‚° ê³µì‹</div>
        <div class="wealth-formula-text">(ìˆœìì‚° Ã— 10) Ã· (ë‚˜ì´ Ã— ì›”ê¸‰ Ã— 12) Ã— 100</div>
      </div>
      <div>
        ${houseData.slice().reverse().map(h => `
          <div class="wealth-grade ${h.level === house.level ? 'active' : ''}">
            <div class="wealth-grade-icon">${emojis[h.level-1]}</div>
            <div class="wealth-grade-info">
              <div class="wealth-grade-name">${h.name}</div>
              <div class="wealth-grade-range">${h.level===1?'0ì ':h.level===5?'200ì  ì´ˆê³¼':h.minScore+'~'+h.maxScore+'ì '}</div>
            </div>
            <div class="wealth-grade-badge">${h.level===house.level?'â† í˜„ì¬':badges[h.level-1]}</div>
          </div>
        `).join('')}
      </div>
    </div>

    <!-- ë¶€ì±„ë¹„ìœ¨ ë¶„ì„ -->
    <div class="section-card">
      <div class="section-header">
        <div class="section-icon blue">ğŸ’³</div>
        <div><div class="section-title">ë¶€ì±„ë¹„ìœ¨ ë¶„ì„</div><div class="section-subtitle">ì´ìì‚° ëŒ€ë¹„ ë¶€ì±„ ë¹„ìœ¨</div></div>
      </div>
      <div class="debt-bar-wrap">
        <div class="debt-bar-label"><span>ë¶€ì±„ë¹„ìœ¨</span><strong>${dr}%</strong></div>
        <div class="debt-bar-track"><div class="debt-bar-fill" id="debtFill" style="width:0%;background:${dColor}"></div></div>
      </div>
      <div class="debt-status ${dClass}">
        <div class="debt-status-icon">${dIcon}</div>
        <div><div class="debt-status-title">${dTitle}</div><div class="debt-status-desc">${dDesc}</div></div>
      </div>
    </div>

    <!-- ê°€ì¡±ìˆ˜ë³„ ì˜ˆì‚°í‘œ -->
    <div class="section-card">
      <div class="section-header">
        <div class="section-icon green">ğŸ“‹</div>
        <div><div class="section-title">${fc}ì¸ ê°€êµ¬ ë§ì¶¤ ì˜ˆì‚° ì„¤ê³„</div><div class="section-subtitle">ì˜¤ì›íŠ¸ ê¸ˆìœµì§‘ì§“ê¸°Â® ì˜ˆì‚° ê³µì‹</div></div>
      </div>
      <p style="font-size:12px;color:var(--gray);margin-bottom:12px">ì›” ì†Œë“ ${d.income.toLocaleString()}ë§Œì› ê¸°ì¤€ ê¶Œì¥ ë°°ë¶„</p>
      <table class="budget-table">
        <thead><tr><th>í•­ëª©</th><th>ë¹„ìœ¨</th><th>ê¶Œì¥ ê¸ˆì•¡</th></tr></thead>
        <tbody>${budgetRows}</tbody>
      </table>
    </div>

    <!-- AIë¨¸ë‹ˆì•¼ ì•± CTA -->
    <div class="cta-app">
      <h3>ğŸ“± AIë¨¸ë‹ˆì•¼ë¡œ ê´€ë¦¬í•˜ê¸°</h3>
      <p>AIê°€ ë§¤ì¼ ë‚˜ì˜ ì¬ë¬´ ìƒíƒœë¥¼ ì²´í¬í•˜ê³ <br>ë§ì¶¤ ì½”ì¹­ì„ í•´ë“œë¦½ë‹ˆë‹¤</p>
      <button class="btn-app" onclick="window.open('https://moneya-frontend.vercel.app','_blank')">AIë¨¸ë‹ˆì•¼ ì‹œì‘í•˜ê¸° â†’</button>
    </div>

    <!-- ê³µìœ  -->
    <div class="share-bar">
      <button class="share-btn kakao" onclick="shareKakao()">ğŸ’¬ ì¹´í†¡</button>
      <button class="share-btn sms" onclick="shareSMS()">ğŸ’Œ ë¬¸ì</button>
      <button class="share-btn copy" onclick="copyLink()">ğŸ”— ë³µì‚¬</button>
    </div>

    <div class="footer">
      ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œ | ëŒ€í‘œ: ì˜¤ìƒì—´ (CFPÂ®)<br>
      ê¸ˆìœµì§‘ì§“ê¸°Â®ëŠ” ì˜¤ì›íŠ¸ê¸ˆìœµì—°êµ¬ì†Œì˜ ë“±ë¡ìƒí‘œì…ë‹ˆë‹¤.<br>
      ë³¸ ë¦¬í¬íŠ¸ëŠ” ê¸ˆìœµì§‘ì§“ê¸°Â® ì¬ë¬´ì§„ë‹¨ í”„ë¡œê·¸ë¨ì—ì„œ ì œê³µí•˜ëŠ” ë§ì¶¤í˜• ë¶„ì„ ê²°ê³¼ì…ë‹ˆë‹¤.<br>
      ìƒì„±ì¼: ${new Date().toLocaleDateString('ko-KR')}
    </div>
  `;

  // ë¶€ì±„ë¹„ìœ¨ ë°” ì• ë‹ˆë©”ì´ì…˜
  setTimeout(() => {
    const fill = document.getElementById('debtFill');
    if (fill) fill.style.width = barW + '%';
  }, 500);
}

renderReport();
</script>
</body>
</html>
